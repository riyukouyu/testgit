<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="charge" longname="公共收费" kind="3" package="cn.sunline.ltts.busi.cgtran.trans" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <interface package="cn.sunline.ltts.busi.cgtran.trans.intf">
        <input packMode="true">
            <field id="trantp" type="PbEnumType.E_CGTRTP" required="false" multi="false" array="false" longname="交易类别"/>
            <field id="chrgtp" type="PbEnumType.E_CHARTP" required="false" multi="false" array="false" longname="收费类别"/>
            <field id="bgdate" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="起始日期"/>
            <field id="endate" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="截止日期" ref="FnDict.Fnfc.endate"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="账号" ref="PbDict.Charge.acctno"/>
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="卡号"/>
            <field id="acctna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="账户名称" ref="DpDict.Acct.acctna"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="币种" ref="BaseDict.Comm.crcycd"/>
            <field id="totlam" type="PbBaseType.U_DEC212" required="false" multi="false" array="false" longname="总金额" ref="PbDict.Intr.totlam"/>
            <field id="remark" type="BaseType.U_LONGDS" required="false" multi="false" array="false" longname="备注信息" ref="FeDict.Chrg.remark"/>
            <field id="chargeInfo" type="CgComplexType.ChargeInfo" required="false" multi="true" array="false" longname="汇总销记登记簿明细"/>
            <field id="payaListInfo" type="InacTransComplex.IaPayaDetail" required="false" multi="true" array="false" longname="挂账明细"/>
            <field id="paydListInfo" type="InacTransComplex.IaPaydDetail" required="false" multi="true" array="false" longname="销账明细"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="chargeInfo" type="CgComplexType.ChargeInfo" required="false" multi="true" array="false" longname="汇总销记登记簿明细"/>
        </output>
        <property packMode="true">
            <field id="isckqt" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="额度控制标志"/>
            <field id="acctrt" type="BaseEnumType.E_ACCTROUTTYPE" ref="BaseDict.Comm.acctrt" required="false" multi="false" array="false" longname="客户类型"/>
            <field id="limttp" type="QtEnumType.E_LIMTTP" required="false" multi="false" array="false" longname="额度类型"/>
            <field id="risklv" type="QtEnumType.E_RISKLV" required="false" multi="false" array="false" longname="风险承受等级"/>
            <field id="authtp" type="BaseType.U_CHAR16" required="false" multi="false" array="false" longname="认证方式"/>
            <field id="rebktp" type="QtEnumType.E_REBKTP" required="false" multi="false" array="false" longname="收款行范围"/>
            <field id="aclmfg" type="QtEnumType.E_ACLMFG" required="false" multi="false" array="false" longname="累积限额标志"/>
            <field id="servtp" type="MsType.U_CHANNEL" required="false" multi="false" array="false" longname="交易渠道"/>
            <field id="servsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="渠道流水"/>
            <field id="servdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="渠道日期"/>
            <field id="dcflag1" type="QtEnumType.E_RECPAY" required="false" multi="false" array="false" longname="额度收方标志"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="机构号" ref="PbDict.Brch.brchno"/>
            <field id="accttp" type="BaseEnumType.E_ACCATP" required="false" multi="false" array="false" longname="账户分类" ref="BaseDict.Comm.accttp"/>
            <field id="sbactp" type="QtEnumType.E_SBACTP" required="false" multi="false" array="false" longname="子账户类型" ref="QtDict.Qt.sbactp"/>
            <field id="custac" type="PbBaseType.U_CUSTAC" required="false" multi="false" array="false" longname="电子账号" ref="QtDict.Qt.custac"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow>
        <method method="befTran" id="befTran" longname="额度扣减报文设置"/>
        <service serviceName="IoCaSevAccountLimit.IoAcSubQuota" id="IoAcSubQuota2" test="isckqt == #dict.BaseEnumType.E_YES___().YES" longname="电子账户系统扣减客户额度">
            <in_mappings by_interface="true">
                <mapping src="aclmfg" dest="aclmfg" by_interface="true" on_top="true"/>
                <mapping src="authtp" dest="authtp" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="custac" by_interface="true" on_top="true"/>
                <mapping src="acctrt" dest="acctrt" by_interface="true" on_top="true"/>
                <mapping src="limttp" dest="limttp" by_interface="true" on_top="true"/>
                <mapping src="rebktp" dest="rebktp" by_interface="true" on_top="true"/>
                <mapping src="risklv" dest="risklv" by_interface="true" on_top="true"/>
                <mapping src="servdt" dest="servdt" by_interface="true" on_top="true"/>
                <mapping src="servsq" dest="servsq" by_interface="true" on_top="true"/>
                <mapping src="servtp" dest="servtp" by_interface="true" on_top="true"/>
                <mapping src="totlam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="brchno" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="accttp" dest="accttp" by_interface="true" on_top="true"/>
                <mapping src="sbactp" dest="sbactp" by_interface="true" on_top="true"/>
                <mapping src="dcflag1" dest="dcflag" desc="description" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="ChrgSvcType.publicCharge" id="publicCharge" longname="公共收费">
            <in_mappings by_interface="true">
                <mapping src="acctna" dest="input.acctna" by_interface="true" on_top="true"/>
                <mapping src="acctno" dest="input.acctno" by_interface="true" on_top="true"/>
                <mapping src="bgdate" dest="input.bgdate" by_interface="true" on_top="true"/>
                <mapping src="chargeInfo" dest="input.chargeInfo" by_interface="true" on_top="true"/>
                <mapping src="chrgtp" dest="input.chrgtp" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                <mapping src="endate" dest="input.endate" by_interface="true" on_top="true"/>
                <mapping src="payaListInfo" dest="input.payaListInfo" by_interface="true" on_top="true"/>
                <mapping src="paydListInfo" dest="input.paydListInfo" by_interface="true" on_top="true"/>
                <mapping src="remark" dest="input.remark" by_interface="true" on_top="true"/>
                <mapping src="totlam" dest="input.totlam" by_interface="true" on_top="true"/>
                <mapping src="trantp" dest="input.trantp" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="chargeInfo" dest="chargeInfo" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
