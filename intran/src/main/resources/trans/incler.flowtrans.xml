<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="incler" longname="统一支付清算交易" kind="3" package="cn.sunline.ltts.busi.intran.trans" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <interface package="cn.sunline.ltts.busi.intran.trans.intf">
        <input packMode="true">
            <field id="crcycd" type="BaseType.U_CRCYCD" required="true" multi="false" array="false" longname="币种"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="true" default="0.00" multi="false" array="false" longname="资产金额"/>
            <field id="feeamt" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="费用金额"/>
            <field id="intamt" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="利息金额(非保本)"/>
            <field id="chckdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="对账日期"/>
            <field id="keepdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="清算日期"/>
            <field id="clactp" type="BaseEnumType.E_CLACTP" required="false" multi="false" array="false" longname="待清算账户类型"/>
            <field id="ordrid" type="BaseType.U_CHAR32" required="false" multi="false" array="false" longname="订单编号"/>
            <field id="frondt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="前置日期"/>
            <field id="fronsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="前置流水"/>
            <field id="linkno" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="连笔号"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="借方账号"/>
            <field id="toacct" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="贷方账号"/>
            <field id="prodcd" type="BaseType.U_PRODCD" required="false" multi="false" array="false" longname="产品代码"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <field id="vatnam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="进项税"/>
            <field id="stady1" type="BaseType.U_SHORDS" required="false" multi="false" array="false" longname="备用字段1"/>
            <field id="stady2" type="BaseType.U_SHORDS" required="false" multi="false" array="false" longname="备用字段2"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="mntrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="主交易流水"/>
            <field id="mntrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="主交易日期"/>
            <field id="mntrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="主交易时间"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <fields id="acvoch" scope="AcVouchType.AccountVouch" required="false" multi="true" longname="会计凭证" array="false">
                <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="账号"/>
                <field id="acctna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="账号户名"/>
                <field id="amntcd" type="BaseEnumType.E_AMNTCD" required="false" multi="false" array="false" longname="记账方向"/>
                <field id="tranam" type="BaseType.U_ACBLTP" required="false" multi="false" array="false" longname="交易金额"/>
                <field id="dtitcd" type="BaseType.U_DTITCD" required="false" multi="false" array="false" longname="核算口径"/>
                <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="币种"/>
                <field id="ispaya" type="InEnumType.E_ISPAYA" required="false" multi="false" array="false" longname="是否采用销账管理"/>
            </fields>
        </output>
        <property packMode="true">
            <field id="dcctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="借方账号"/>
            <field id="ccctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="贷方账号1"/>
            <field id="ccctwo" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="账号2"/>
            <field id="ccctee" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="账号3"/>
            <field id="chrgpm" type="IoChrgComplexType.IoCgCalCenterReturn" required="false" multi="true" array="false" longname="公共收费参数"/>
            <field id="issucc" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="是否执行标志"/>
            <field id="ischrg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="是否收费"/>
            <field id="chgflg" type="PbEnumType.E_CHGFLG" required="false" multi="false" array="false" longname="记账标志"/>
            <field id="csextg" type="BaseEnumType.E_CSEXTG" required="false" multi="false" array="false" longname="钞汇标志"/>
            <field id="otcsac" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转出方账号"/>
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="predeal" longname="交易处理"/>
        <service mappingToProperty="true" serviceName="IoCgChrgSvcType.IoCalCharge" id="IoCalCharge" test="ischrg == #dict.BaseEnumType.E_YES___().YES" longname="公共收费">
            <in_mappings by_interface="true">
                <mapping src="chrgpm" dest="in.calcenter" by_interface="true" on_top="true"/>
                <mapping src="#dict.BaseEnumType.E_CSTRFG().TRNSFER" dest="in.cstrfg" by_interface="true" on_top="true"/>
                <mapping src="chgflg" dest="in.chgflg" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="in.chrgcy" by_interface="true" on_top="true"/>
                <mapping src="csextg" dest="in.csexfg" by_interface="true" on_top="true"/>
                <mapping src="otcsac" dest="in.custac" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="in.trancy" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="out.custac" dest="ccctee" desc="description" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service serviceName="InSaveClerTransBill.SaveClerBill" longname="登记统一支付清算登记簿">
            <in_mappings by_interface="true">
                <mapping src="ordrid" dest="ordrid" by_interface="true" on_top="true"/>
                <mapping src="fronsq" dest="fronsq" by_interface="true" on_top="true"/>
                <mapping src="frondt" dest="frondt" by_interface="true" on_top="true"/>
                <mapping src="linkno" dest="linkno" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="feeamt" dest="feeamt" by_interface="true" on_top="true"/>
                <mapping src="intamt" dest="intamt" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="dcctno" dest="acctno" by_interface="true" on_top="true"/>
                <mapping src="ccctno" dest="toacct" by_interface="true" on_top="true"/>
                <mapping src="ccctwo" dest="acctwo" by_interface="true" on_top="true"/>
                <mapping src="ccctee" dest="acctee" by_interface="true" on_top="true"/>
                <mapping src="keepdt" dest="keepdt" by_interface="true" on_top="true"/>
                <mapping src="clactp" dest="clactp" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="afterdeal" longname="交易后处理"/>
    </flow>
</flowtran>
