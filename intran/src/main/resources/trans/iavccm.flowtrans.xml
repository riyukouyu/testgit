<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="iavccm" longname="套平入账" kind="3" package="cn.sunline.ltts.busi.intran.trans" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <description><![CDATA[套平入账]]></description>
    <interface package="cn.sunline.ltts.busi.intran.trans.intf">
        <input packMode="false">
            <field id="acstno" type="BaseType.U_SEQUNO" required="true" multi="false" array="false" longname="套号" ref="InDict.inac.acstno"/>
            <field id="trandt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="支付平台日期"/>
            <field id="transq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="支付平台流水"/>
            <field id="acctdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="会计日期"/>
        </input>
        <output asParm="true" packMode="false"/>
        <property packMode="true">
            <field id="iavctp" type="InEnumType.E_IAVCTP" required="false" multi="false" array="false" longname="传票类型" ref="InDict.inac.iavctp"/>
            <field id="amntcd" type="BaseEnumType.E_AMNTCD" required="false" multi="false" array="false" longname="借贷标志" ref="BaseDict.Comm.amntcd"/>
            <field id="cntsys" type="InEnumType.E_CNTSYS" required="false" multi="false" array="false" longname="是否跨系统转账" ref="InDict.inac.cntsys"/>
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="交易卡号" ref="BaseDict.Comm.cardno"/>
            <field id="isckqt" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="额度控制标志"/>
            <field id="acctrt" type="BaseEnumType.E_ACCTROUTTYPE" required="false" multi="false" array="false" longname="账号路由类型" ref="BaseDict.Comm.acctrt"/>
            <field id="limttp" type="QtEnumType.E_LIMTTP" required="false" multi="false" array="false" longname="额度类型"/>
            <field id="risklv" type="QtEnumType.E_RISKLV" required="false" multi="false" array="false" longname="风险承受等级"/>
            <field id="authtp" type="BaseType.U_CHAR16" required="false" multi="false" array="false" longname="认证方式"/>
            <field id="rebktp" type="QtEnumType.E_REBKTP" required="false" multi="false" array="false" longname="收款行范围"/>
            <field id="aclmfg" type="QtEnumType.E_ACLMFG" required="false" multi="false" array="false" longname="累积限额标志"/>
            <field id="servtp" type="MsType.U_CHANNEL" required="false" multi="false" array="false" longname="交易渠道"/>
            <field id="servsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="渠道流水"/>
            <field id="servdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="渠道日期"/>
            <field id="dcflag1" type="QtEnumType.E_RECPAY" required="false" multi="false" array="false" longname="额度收方标志"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="机构号" ref="PbDict.Brch.brchno"/>
            <field id="accttp" type="BaseEnumType.E_ACCATP" required="false" multi="false" array="false" longname="账户分类" ref="BaseDict.Comm.accttp"/>
            <field id="sbactp" type="QtEnumType.E_SBACTP" required="false" multi="false" array="false" longname="子账户类型" ref="QtDict.Qt.sbactp"/>
            <field id="custac" type="PbBaseType.U_CUSTAC" required="false" multi="false" array="false" longname="电子账号" ref="QtDict.Qt.custac"/>
            <field id="tranam" type="PbBaseType.U_TRANAM" required="false" multi="false" array="false" longname="额度金额"/>
            <field id="fronsq" type="BaseType.U_CHAR32" required="false" multi="false" array="false" longname="前置流水"/>
            <field id="busisq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="业务流水" ref="BaseDict.Comm.busisq"/>
            <field id="keepdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="清算日期" ref="DpDict.Acct.keepdt"/>
            <field id="capitp" type="DpEnumType.E_CAPITP" required="false" multi="false" array="false" longname="资产类型"/>
            <field id="tranms" type="PbBaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额"/>
            <field id="ioflag" type="DpEnumType.E_IOFLAG" required="false" multi="false" array="false" longname="出入金标志"/>
            <field id="fromtp" type="DpEnumType.E_FROMTP" required="false" multi="false" array="false" longname="出入金方式"/>
            <field id="toacct" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="对方账号/卡号" ref="PbDict.Cash.toacct"/>
            <field id="transt" type="BaseEnumType.E_TRANST" required="false" multi="false" array="false" longname="交易状态" ref="PbDict.Cash.transt"/>
            <field id="cuacno" type="BaseType.U_CHAR32" required="false" multi="false" array="false" longname="转入方电子账号"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="币种" ref="PbDict.Intr.crcycd"/>
            <field id="iscust" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="是否转入客户账"/>
            <field id="otacno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转出帐号"/>
            <field id="otacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转出户名"/>
            <field id="smrytx" type="BaseType.U_SHORDS" required="false" multi="false" array="false" longname="摘要"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow>
        <method method="befTranCheck" id="befTranCheck" longname="交易前检查" desc="交易前检查"/>
        <service mappingToProperty="true" serviceName="IoInAcctTranOut.AccIavccm" id="accIavccm" longname="套平入账" desc="套平入账">
            <in_mappings by_interface="true">
                <mapping src="acstno" dest="acstno" by_interface="true" on_top="true"/>
                <mapping src="trandt" dest="trandt" by_interface="true" on_top="true"/>
                <mapping src="transq" dest="transq" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="cardno" dest="cardno" by_interface="true" on_top="true"/>
                <mapping src="cntsys" dest="cntsys" by_interface="true" on_top="true"/>
                <mapping src="iavctp" dest="iavctp" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service mappingToProperty="true" serviceName="DpAcctSvcType.DpIavccm" id="dpIavccm" test="iscust == #dict.BaseEnumType.E_YES___().YES" longname="电子账户套平入帐入账">
            <in_mappings by_interface="true">
                <mapping src="amntcd" dest="inamcd" by_interface="true" on_top="true"/>
                <mapping src="cuacno" dest="inacno" by_interface="true" on_top="true"/>
                <mapping src="otacna" dest="otacna" by_interface="true" on_top="true"/>
                <mapping src="otacno" dest="otacno" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="smrytx" dest="smrytx" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="AfterTransferCheck" id="AfterTransferCheck" longname="交易后检查" desc="交易后检查"/>
        <service serviceName="IoCaSevAccountLimit.IoAcSubQuota" id="IoAcSubQuota2" test="isckqt == #dict.BaseEnumType.E_YES___().YES" longname="电子账户系统扣减客户额度">
            <in_mappings by_interface="true">
                <mapping src="aclmfg" dest="aclmfg" by_interface="true" on_top="true"/>
                <mapping src="authtp" dest="authtp" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="custac" by_interface="true" on_top="true"/>
                <mapping src="acctrt" dest="acctrt" by_interface="true" on_top="true"/>
                <mapping src="limttp" dest="limttp" by_interface="true" on_top="true"/>
                <mapping src="rebktp" dest="rebktp" by_interface="true" on_top="true"/>
                <mapping src="risklv" dest="risklv" by_interface="true" on_top="true"/>
                <mapping src="servdt" dest="servdt" by_interface="true" on_top="true"/>
                <mapping src="servsq" dest="servsq" by_interface="true" on_top="true"/>
                <mapping src="servtp" dest="servtp" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="brchno" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="accttp" dest="accttp" by_interface="true" on_top="true"/>
                <mapping src="sbactp" dest="sbactp" by_interface="true" on_top="true"/>
                <mapping src="dcflag1" dest="dcflag" desc="description" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="IoSaveIoTransBill.SaveIoBill" id="SaveIoBill" test="cntsys == #dict.InEnumType.E_CNTSYS()._0" longname="登记出入金登记簿">
            <in_mappings by_interface="true">
                <mapping src="toacct" dest="acctno" by_interface="true" on_top="true"/>
                <mapping src="brchno" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="busisq" dest="busisq" by_interface="true" on_top="true"/>
                <mapping src="capitp" dest="capitp" by_interface="true" on_top="true"/>
                <mapping src="cardno" dest="cardno" by_interface="true" on_top="true"/>
                <mapping src="trandt" dest="chckdt" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="cuacno" dest="cuacno" by_interface="true" on_top="true"/>
                <mapping src="fromtp" dest="fromtp" by_interface="true" on_top="true"/>
                <mapping src="trandt" dest="frondt" by_interface="true" on_top="true"/>
                <mapping src="fronsq" dest="fronsq" by_interface="true" on_top="true"/>
                <mapping src="ioflag" dest="ioflag" by_interface="true" on_top="true"/>
                <mapping src="isckqt" dest="isspan" by_interface="true" on_top="true"/>
                <mapping src="keepdt" dest="keepdt" by_interface="true" on_top="true"/>
                <mapping src="servtp" dest="servtp" by_interface="true" on_top="true"/>
                <mapping src="toacct" dest="toacct" by_interface="true" on_top="true"/>
                <mapping src="toacct" dest="toacno" by_interface="true" on_top="true"/>
                <mapping src="brchno" dest="tobrch" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="transt" dest="transt" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="WroAccRollBack.Acctclebr" id="Acctclebr" test="cntsys == #dict.InEnumType.E_CNTSYS()._0 &amp;&amp; amntcd != null" longname="跨系统省中心清算">
            <in_mappings by_interface="true">
                <mapping src="brchno" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="sendCmqToApp" id="sendCmqToApp" test="iscust == #dict.BaseEnumType.E_YES___().YES" longname="推送消息至APP"/>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
