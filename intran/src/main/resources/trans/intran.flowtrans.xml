<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="intran" longname="内部户转入转出(系统外)" kind="3" package="cn.sunline.ltts.busi.intran.trans" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <interface package="cn.sunline.ltts.busi.intran.trans.intf">
        <input packMode="true">
            <field id="capitp" type="DpEnumType.E_TRINTP" required="true" multi="false" array="false" longname="转账交易类型"/>
            <field id="otacno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转出方账号"/>
            <field id="otacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="内部户名称"/>
            <field id="otbrch" type="BaseType.U_BTCHNO" required="false" multi="false" array="false" longname="转出方账户所属机构"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="true" multi="false" array="false" longname="币种"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="true" multi="false" array="false" longname="交易金额"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <field id="inacno" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="转入方账号"/>
            <field id="inacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转入方户名"/>
            <field id="inbrch" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="转入方账号所属机构"/>
            <field id="chckdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="对账日期"/>
            <field id="keepdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="清算日期"/>
            <field id="stady1" type="BaseType.U_SHORDS" required="false" multi="false" array="false" longname="备用字段1"/>
            <field id="stady2" type="BaseType.U_SHORDS" required="false" multi="false" array="false" longname="备用字段2"/>
            <field id="clactp" type="BaseEnumType.E_CLACTP" required="false" fixed="#dict.BaseEnumType.E_CLACTP()._01" multi="false" array="false" longname="待清算账户类型" desc="和柜面核心往来记账"/>
            <field id="iapayadetail" type="InacTransComplex.IaPayaDetail" required="false" multi="true" array="false" longname="内部户交易挂账明细"/>
            <field id="iapayddetail" type="InacTransComplex.IaPaydDetail" required="false" multi="true" array="false" longname="内部户交易销账明细"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="mntrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="主交易流水"/>
            <field id="mntrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="主交易日期"/>
            <field id="mntrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="主交易时间"/>
        </output>
        <property packMode="true">
            <field id="amntcd" type="BaseEnumType.E_AMNTCD" required="false" multi="false" array="false" longname="借贷标志" ref="BaseDict.Comm.amntcd"/>
            <field id="capitt" type="DpEnumType.E_CAPITP" required="false" multi="false" array="false" longname="交易类型"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow>
        <service serviceName="IoInAcctTranOut.InacctTran" id="InacctTran" longname="内部账户转入转出(系统外)" desc="转出：   D：内部账户出账  C：系统 往来；  转入：  D：系统 往来   C：内部账户入账">
            <in_mappings by_interface="true">
                <mapping src="capitp" dest="capitp" by_interface="true" on_top="true"/>
                <mapping src="chckdt" dest="chckdt" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="iapayadetail" dest="iapayadetail" by_interface="true" on_top="true"/>
                <mapping src="iapayddetail" dest="iapayddetail" by_interface="true" on_top="true"/>
                <mapping src="inacna" dest="inacna" by_interface="true" on_top="true"/>
                <mapping src="inacno" dest="inacno" by_interface="true" on_top="true"/>
                <mapping src="inbrch" dest="inbrch" by_interface="true" on_top="true"/>
                <mapping src="keepdt" dest="keepdt" by_interface="true" on_top="true"/>
                <mapping src="otacna" dest="otacna" by_interface="true" on_top="true"/>
                <mapping src="otacno" dest="otacno" by_interface="true" on_top="true"/>
                <mapping src="otbrch" dest="otbrch" by_interface="true" on_top="true"/>
                <mapping src="smrycd" dest="smrycd" by_interface="true" on_top="true"/>
                <mapping src="stady1" dest="stady1" by_interface="true" on_top="true"/>
                <mapping src="stady2" dest="stady2" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="mntrdt" dest="mntrdt" by_interface="true" on_top="true"/>
                <mapping src="mntrsq" dest="mntrsq" by_interface="true" on_top="true"/>
                <mapping src="mntrtm" dest="mntrtm" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service serviceName="IoCheckBalance.CheckBalance" id="CheckBalance" longname="账务平衡性检查" desc="账务平衡性检查">
            <in_mappings by_interface="true">
                <mapping src="#run.trandt" dest="trandt" by_interface="true" on_top="true"/>
                <mapping src="#run.mntrsq" dest="transq" by_interface="true" on_top="true"/>
                <mapping src="clactp" dest="clactp" desc="description" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="intran" id="intran" longname="交易后检查"/>
        <service serviceName="IoSaveIoTransBill.SaveIoBill" id="SaveIoBill" longname="登记出入金登记簿">
            <in_mappings by_interface="true">
                <mapping src="otacno" dest="acctno" by_interface="true" on_top="true"/>
                <mapping src="otbrch" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="#run.busisq" dest="busisq" by_interface="true" on_top="true"/>
                <mapping src="chckdt" dest="chckdt" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="#run.trandt" dest="frondt" by_interface="true" on_top="true"/>
                <mapping src="#run.mntrsq" dest="fronsq" by_interface="true" on_top="true"/>
                <mapping src="keepdt" dest="keepdt" by_interface="true" on_top="true"/>
                <mapping src="otacno" dest="toacct" by_interface="true" on_top="true"/>
                <mapping src="otacno" dest="toacno" by_interface="true" on_top="true"/>
                <mapping src="inbrch" dest="tobrch" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="capitt" dest="capitp" desc="description" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="WroAccRollBack.Acctclebr" id="Acctclebr" test="amntcd != null" longname="跨系统省中心清算">
            <in_mappings by_interface="true">
                <mapping src="inbrch" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
    </flow>
</flowtran>
