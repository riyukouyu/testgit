<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="ckrtac" longname="身份核查结果确认" kind="2" package="cn.sunline.ltts.busi.catran.trans" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <description><![CDATA[电子账户开户，升级，启用，开立亲情账户进行身份核查，根据审核结果更新电子账户相关信息]]></description>
    <interface package="cn.sunline.ltts.busi.catran.trans.intf">
        <input packMode="true">
            <field id="ckrtsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="核查流水号"/>
            <field id="idckrt" type="CaEnumType.E_IDCKRT" required="false" multi="false" array="false" longname="身份核查结果" ref="CaDict.Eacct.idckrt"/>
            <field id="custcd" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="客户内码" ref="BaseDict.Comm.custcd"/>
            <field id="custid" type="BaseType.U_CUSTID" required="false" multi="false" array="false" longname="用户ID" ref="BaseDict.Comm.custid"/>
        </input>
        <output asParm="true" packMode="true"/>
        <property packMode="true">
            <field id="opensv" type="MsType.U_CHANNEL" required="false" multi="false" array="false" longname="开户渠道"/>
            <field id="agrtno" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="协议模版编号"/>
            <field id="vesion" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="版本号"/>
            <field id="idtfno" type="BaseType.U_IDTFNO" required="false" multi="false" array="false" longname="证件号码" ref="DpDict.Acct.idtfno"/>
            <field id="idtftp" type="BaseEnumType.E_IDTFTP" required="false" multi="false" array="false" longname="证件类型" ref="DpDict.Acct.idtftp"/>
            <field id="cktntp" type="CaEnumType.E_CKTNTP" required="false" multi="false" array="false" longname="核查交易类型" ref="CaDict.Eacct.cktntp"/>
            <field id="custno" type="BaseType.U_CUSTNO" required="false" multi="false" array="false" longname="客户号"/>
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="卡号" ref="DpDict.Acct.cardno"/>
            <field id="custac" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="电子账号"/>
            <field id="cacttp" type="DpEnumType.E_CUSACT" required="false" multi="false" array="false" longname="客户账号类型"/>
            <field id="custna" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="客户名称"/>
            <field id="baprcd" type="BaseType.U_PRODCD" required="false" multi="false" array="false" longname="基础负债产品" ref="CaDict.CardAcc.baprcd"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="负债账号" ref="DpDict.Acct.acctno"/>
            <field id="pddpfg" type="DpEnumType.E_FCFLAG" required="false" multi="false" array="false" longname="业务小类" ref="DpDict.Prod.pddpfg"/>
            <field id="prodtp" type="DpEnumType.E_PRODTP" required="false" enums="存款" fixed="'DEPO'" multi="false" array="false" longname="产品类型" desc="存款开户交易，产品类型设为存款"/>
            <field id="depttm" type="BaseEnumType.E_TERMCD" required="false" enums="T000" fixed="'000'" multi="false" array="false" longname="存期" desc="开电子账户时默认为活期" ref="DpDict.Prod.depttm"/>
            <field id="opacfg" type="BaseEnumType.E_YES___" required="false" enums="YES" fixed="'YES'" multi="false" array="false" longname="首开户标志" desc="判定是否是首次开户，是则负债账户必须是活期"/>
            <field id="upacfg" type="BaseEnumType.E_YES___" required="false" enums="NO" fixed="'NO'" multi="false" array="false" longname="升级首开户标志"/>
            <field id="custtp" type="BaseEnumType.E_CUSTTP" required="false" fixed="'11'" multi="false" array="false" longname="客户类型" desc="客户类型暂时默认为个人"/>
            <field id="signtp" type="CaEnumType.E_SIGNTP" required="false" fixed="'01'" multi="false" array="false" longname="签约类型" desc="签约类型默认为智能储蓄"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="币种" ref="BaseDict.Comm.crcycd"/>
            <field id="csextg" type="BaseEnumType.E_CSEXTG" required="false" multi="false" array="false" longname="钞汇标志" ref="CaDict.Eacct.csextg"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" enums="SJ" fixed="'SJ'" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <field id="smryds" type="BaseType.U_SMRYDS" required="false" multi="false" array="false" longname="摘要描述" ref="BaseDict.Comm.smryds"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="归属机构" ref="CaDict.Eacct.brchno"/>
            <field id="waacno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="钱包子账号"/>
            <field id="wapdfg" type="DpEnumType.E_FCFLAG" required="false" multi="false" array="false" longname="钱包定活标志"/>
            <field id="waprcd" type="BaseType.U_PRODCD" required="false" multi="false" array="false" longname="钱包产品号"/>
            <field id="idckru" type="CaEnumType.E_IDCKRT" required="false" multi="false" array="false" longname="表内身份核查标志"/>
            <field id="mpckrt" type="CaEnumType.E_MPCKRT" required="false" multi="false" array="false" longname="人脸识别结果" ref="CaDict.Eacct.mpckrt"/>
            <field id="opacwy" type="CaEnumType.E_OPACWY" required="false" enums="SINGLE" default="'1'" multi="false" array="false" longname="开户方式" desc="联机交易默认为单笔开户" ref="CaDict.Eacct.opacwy"/>
            <field id="accatp" type="BaseEnumType.E_ACCATP" required="false" multi="false" array="false" longname="账户分类"/>
            <field id="upactp" type="BaseEnumType.E_ACCATP" required="false" multi="false" array="false" longname="升级账户分类"/>
            <field id="reltid" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="亲情关系ID"/>
            <field id="acctnm" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="解约负债账号"/>
            <field id="acalno" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="账户别名" ref="CaDict.Eacct.acalno"/>
            <field id="bdrtfg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="是否有绑卡认证通过标志"/>
            <field id="ischck" type="BaseEnumType.E_YES___" required="false" enums="NO" fixed="'NO'" multi="false" array="false" longname="是否检查"/>
            <field id="smrycd1" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="摘要码"/>
            <field id="negafg" type="BaseEnumType.E_YES___" required="false" enums="YES" fixed="'YES'" multi="false" array="false" longname="是否允许负数"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow>
        <method method="prcCkrtacBefore" id="prcCkrtacBefore" longname="交易前处理" desc="身份核查结果确认交易前处理"/>
        <case id="prcCheckTranTp" longname="根据核查交易类型更新" desc="根据审核结果更新电子账户相关信息">
            <when id="prcOpenAc" test="cktntp == #dict.CaEnumType.E_CKTNTP().OPEN" longname="更新开户信息" desc="更新开户信息">
                <method method="prcOpenBefore" id="prcOpenBefore" longname="开户信息更新前处理" desc="开户信息更新前处理"/>
                <case id="prcOpenAccatp" test="idckrt == #dict.CaEnumType.E_IDCKRT().SUCCESS &amp;&amp; mpckrt == #dict.CaEnumType.E_MPCKRT().SUCCESS &amp;&amp; idckru == #dict.CaEnumType.E_IDCKRT().CHECKING &amp;&amp; bdrtfg == #dict.BaseEnumType.E_YES___().YES" longname="判断开立电子账户分类" desc="判断开立电子账户分类">
                    <when id="prcOpenWallet" test="accatp == #dict.BaseEnumType.E_ACCATP().WALLET" longname="开立Ⅲ类电子账户" desc="开立Ⅲ类电子账户">
                        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addWalletAcct" longname="开立Ⅲ类钱包账户" desc="开立Ⅲ类钱包账户">
                            <in_mappings by_interface="true">
                                <mapping src="custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                                <mapping src="custna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                                <mapping src="cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                                <mapping src="opacfg" dest="opacfg" desc="首开户标志" by_interface="true" on_top="true"/>
                                <mapping src="waprcd" dest="prodcd" desc="钱包账户产品号" by_interface="true" on_top="true"/>
                                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true">
                                <mapping src="cplAddSubAcctOut.acctno" dest="waacno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.pddpfg" dest="wapdfg" desc="定活标志" by_interface="true" on_top="true"/>
                            </out_mappings>
                        </service>
                        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="addWalletEARela" longname="电子账号与钱包子账户关联">
                            <in_mappings by_interface="true">
                                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账号" by_interface="true" on_top="true"/>
                                <mapping src="waacno" dest="cplAddEARelaIn.acctno" desc="子账号" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="csextg" dest="cplAddEARelaIn.csextg" desc="钞汇标志" by_interface="true" on_top="true"/>
                                <mapping src="wapdfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="waprcd" dest="cplAddEARelaIn.prodcd" desc="钱包账户产品编号" by_interface="true" on_top="true"/>
                                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true"/>
                        </service>
                    </when>
                    <when id="prcOpenGlobalOrFinance" test="accatp== #dict.BaseEnumType.E_ACCATP().GLOBAL || accatp== #dict.BaseEnumType.E_ACCATP().FINANCE" longname="开立Ⅰ或Ⅱ类电子账户" desc="开立Ⅰ或Ⅱ类电子账户">
                        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addAccount" longname="开立结算负债子帐户" desc="开立结算负债子帐户">
                            <in_mappings by_interface="true">
                                <mapping src="custna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                                <mapping src="baprcd" dest="prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                                <mapping src="cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                                <mapping src="opacfg" dest="opacfg" desc="首开户标志" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true">
                                <mapping src="cplAddSubAcctOut.acctno" dest="acctno" desc="负债子账号" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.pddpfg" dest="pddpfg" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.prodcd" dest="baprcd" desc="产品编号" by_interface="true" on_top="true"/>
                            </out_mappings>
                        </service>
                        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="addEARelation" longname="建立电子账号与结算负债账号关联" desc="建立电子账号与结算负债账号关联">
                            <in_mappings by_interface="true">
                                <mapping src="acctno" dest="cplAddEARelaIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账户" by_interface="true" on_top="true"/>
                                <mapping src="pddpfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                                <mapping src="baprcd" dest="cplAddEARelaIn.prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true"/>
                        </service>
                        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addWalletAcct" longname="开立Ⅲ类钱包账户" desc="开立Ⅲ类钱包账户">
                            <in_mappings by_interface="true">
                                <mapping src="custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                                <mapping src="custna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                                <mapping src="cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                                <mapping src="opacfg" dest="opacfg" desc="首开户标志" by_interface="true" on_top="true"/>
                                <mapping src="waprcd" dest="prodcd" desc="钱包账户产品号" by_interface="true" on_top="true"/>
                                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true">
                                <mapping src="cplAddSubAcctOut.acctno" dest="waacno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.pddpfg" dest="wapdfg" desc="定活标志" by_interface="true" on_top="true"/>
                            </out_mappings>
                        </service>
                        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="addWalletEARela" longname="电子账号与钱包子账户关联">
                            <in_mappings by_interface="true">
                                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账号" by_interface="true" on_top="true"/>
                                <mapping src="waacno" dest="cplAddEARelaIn.acctno" desc="子账号" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="csextg" dest="cplAddEARelaIn.csextg" desc="钞汇标志" by_interface="true" on_top="true"/>
                                <mapping src="wapdfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="waprcd" dest="cplAddEARelaIn.prodcd" desc="钱包账户产品编号" by_interface="true" on_top="true"/>
                                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true"/>
                        </service>
                    </when>
                </case>
                <method method="sedOpenInfoMessage" id="sedOpenInfoMessage" test="idckrt == #dict.CaEnumType.E_IDCKRT().SUCCESS &amp;&amp; mpckrt == #dict.CaEnumType.E_MPCKRT().SUCCESS &amp;&amp; idckru == #dict.CaEnumType.E_IDCKRT().CHECKING &amp;&amp; bdrtfg == #dict.BaseEnumType.E_YES___().YES" longname="通知开户信息" desc="通知开户信息"/>
            </when>
            <when id="prcUpgradeTran" test="cktntp == #dict.CaEnumType.E_CKTNTP().UPGRADE" longname="更新升级信息" desc="更新升级信息">
                <method method="prcUpgDealBefore" id="prcUpgDealBefore" longname="升级信息更新前处理" desc="升级信息更新前处理"/>
                <case id="prcAcctClassify" test="idckrt == #dict.CaEnumType.E_IDCKRT().SUCCESS &amp;&amp; mpckrt == #dict.CaEnumType.E_MPCKRT().SUCCESS &amp;&amp; idckru == #dict.CaEnumType.E_IDCKRT().CHECKING &amp;&amp; bdrtfg == #dict.BaseEnumType.E_YES___().YES" longname="根据账户分类开立负债子账户" desc="根据账户分类开立负债子账户">
                    <when id="prcWalletToOther" test="accatp == #dict.BaseEnumType.E_ACCATP().WALLET" longname="电子钱包账户升级" desc="电子钱包账户升级为理财功能户或全功能账户">
                        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addAcct" longname="开立负债子帐户" desc="开立负债子帐户">
                            <in_mappings by_interface="true">
                                <mapping src="custna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                                <mapping src="cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="custac" desc="电子账号ID" by_interface="true" on_top="true"/>
                                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
                                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                                <mapping src="upacfg" dest="opacfg" desc="首开户标志" by_interface="true" on_top="true"/>
                                <mapping src="baprcd" dest="prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="false">
                                <mapping src="cplAddSubAcctOut.acctno" dest="acctno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.pddpfg" dest="pddpfg" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.prodcd" dest="baprcd" desc="产品编号" by_interface="true" on_top="true"/>
                            </out_mappings>
                        </service>
                        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="caAddEARela" longname="建立电子账号与负债账号关联" desc="建立电子账号与负债账号关联">
                            <in_mappings by_interface="true">
                                <mapping src="acctno" dest="cplAddEARelaIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账号ID" by_interface="true" on_top="true"/>
                                <mapping src="pddpfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="baprcd" dest="cplAddEARelaIn.prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true"/>
                        </service>
                    </when>
                    <when id="prcFinaToGlob" test="accatp== #dict.BaseEnumType.E_ACCATP().FINANCE" longname="理财功能账户升级为全功能账户" desc="理财功能账户升级为全功能账户">
                        <service mappingToProperty="true" serviceName="DpProdSvcType.IoDpCloseCurAcc" id="closeCurAcc" longname="个人活期结算户销户" desc="个人活期结算户销户">
                            <in_mappings by_interface="true">
                                <mapping src="custac" dest="clsin.custac" by_interface="true" on_top="true"/>
                                <mapping src="smrycd1" dest="clsin.smrycd" by_interface="true" on_top="true"/>
                                <mapping src="cardno" dest="clsin.toacct" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="false">
                                <mapping src="closot.settbl" dest="tranam" desc="交易金额" by_interface="true" on_top="true"/>
                            </out_mappings>
                        </service>
                        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addAcct" longname="开立负债子帐户" desc="开立负债子帐户">
                            <in_mappings by_interface="true">
                                <mapping src="custna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                                <mapping src="cacttp" dest="cacttp" desc="客户账户类型" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="custac" desc="电子账号ID" by_interface="true" on_top="true"/>
                                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
                                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                                <mapping src="upacfg" dest="opacfg" desc="首开户标志" by_interface="true" on_top="true"/>
                                <mapping src="baprcd" dest="prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="false">
                                <mapping src="cplAddSubAcctOut.acctno" dest="acctno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.pddpfg" dest="pddpfg" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="cplAddSubAcctOut.prodcd" dest="baprcd" desc="产品编号" by_interface="true" on_top="true"/>
                            </out_mappings>
                        </service>
                        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="caAddEARela" longname="建立电子账号与负债账号关联" desc="建立电子账号与负债账号关联">
                            <in_mappings by_interface="true">
                                <mapping src="acctno" dest="cplAddEARelaIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账号ID" by_interface="true" on_top="true"/>
                                <mapping src="pddpfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                                <mapping src="baprcd" dest="cplAddEARelaIn.prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true"/>
                        </service>
                        <service serviceName="DpAcctSvcType.addPostAcctDp" id="addPostAcctDp" test="tranam != @java.math.BigDecimal@ZERO" longname="负债账户存入服务" desc="将原结算户余额和利息转入新开立结算户">
                            <in_mappings by_interface="true">
                                <mapping src="acctno" dest="cplSaveAcctIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                                <mapping src="crcycd" dest="cplSaveAcctIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                                <mapping src="custac" dest="cplSaveAcctIn.custac" desc="电子账号ID" by_interface="true" on_top="true"/>
                                <mapping src="custna" dest="cplSaveAcctIn.opacna" desc="对方户名" by_interface="true" on_top="true"/>
                                <mapping src="brchno" dest="cplSaveAcctIn.opbrch" desc="对方账号所属机构" by_interface="true" on_top="true"/>
                                <mapping src="smrycd" dest="cplSaveAcctIn.smrycd" desc="摘要码" by_interface="true" on_top="true"/>
                                <mapping src="smryds" dest="cplSaveAcctIn.smryds" desc="摘要描述" by_interface="true" on_top="true"/>
                                <mapping src="cardno" dest="cplSaveAcctIn.toacct" desc="电子账号" by_interface="true" on_top="true"/>
                                <mapping src="tranam" dest="cplSaveAcctIn.tranam" desc="交易金额" by_interface="true" on_top="true"/>
                                <mapping src="ischck" dest="cplSaveAcctIn.ischck" desc="是否检查标志" by_interface="true" on_top="true"/>
                                <mapping src="negafg" dest="cplSaveAcctIn.negafg" desc="是否允许为负数" by_interface="true" on_top="true"/>
                            </in_mappings>
                            <out_mappings by_interface="true"/>
                        </service>
                        <method method="prcCancelContract" id="prcCancelContract" longname="二类户升级为一类户更新原签约信息" desc="二类户升级为一类户更新原签约信息"/>
                    </when>
                </case>
                <method method="clearTsscTram" id="clearTsscTram" test="idckrt == #dict.CaEnumType.E_IDCKRT().SUCCESS &amp;&amp; mpckrt == #dict.CaEnumType.E_MPCKRT().SUCCESS &amp;&amp; idckru == #dict.CaEnumType.E_IDCKRT().CHECKING &amp;&amp; bdrtfg == #dict.BaseEnumType.E_YES___().YES" longname="升级成功清除累计金额"/>
                <method method="prcTransInform" id="transInform" test="idckrt == #dict.CaEnumType.E_IDCKRT().SUCCESS &amp;&amp; mpckrt == #dict.CaEnumType.E_MPCKRT().SUCCESS &amp;&amp; idckru == #dict.CaEnumType.E_IDCKRT().CHECKING &amp;&amp; bdrtfg == #dict.BaseEnumType.E_YES___().YES" longname="升级信息通知" desc="升级信息通知"/>
            </when>
            <when id="preEnabledTran" test="cktntp == #dict.CaEnumType.E_CKTNTP().ENABLED" longname="更新启用信息" desc="更新启用信息">
                <method method="prcEnableTran" id="prcEnableTran" longname="启用交易核查结果处理" desc="启用交易核查结果处理"/>
            </when>
            <when id="prcKinshipTran" test="cktntp == #dict.CaEnumType.E_CKTNTP().KINSHIP" longname="更新亲情账户信息" desc="更新亲情账户信息">
                <method method="prcFamilyAcct" id="prcFamilyAcct" longname="亲情账户核查结果处理" desc="亲情账户核查结果处理"/>
            </when>
        </case>
        <method method="prcCkrtacAfter" id="prcCkrtacAfter" longname="交易后处理" desc="交易后处理"/>
        <method method="sendMessage" id="sendMessage" longname="短信APP站内信登记" desc="短信APP站内信登记"/>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
