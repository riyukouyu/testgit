<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="cljoca" longname="平台清算" kind="3" package="cn.sunline.ltts.busi.dptran.trans.joint" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <interface package="cn.sunline.ltts.busi.dptran.trans.joint.intf">
        <input packMode="true">
            <field id="platno" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="平台编号"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="币种" ref="BaseDict.Comm.crcycd"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额" ref="BaseDict.Comm.tranam"/>
            <field id="clerdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="清算日期" ref="BaseDict.Comm.clerdt"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="clersq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="清算流水" ref="FcDict.Fnac.clersq"/>
            <field id="clerdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="清算日期" ref="BaseDict.Comm.clerdt"/>
        </output>
        <property packMode="true">
            <field id="pllqbu" type="BaseType.U_BUSINO" required="false" multi="false" array="false" longname="清算业务码"/>
            <field id="plowbu" type="BaseType.U_BUSINO" required="false" multi="false" array="false" longname="自有资金业务码"/>
            <field id="jotrtp" type="DpEnumType.E_JOTRTP" required="false" multi="false" array="false" longname="联名交易类型"/>
            <field id="aggram" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="汇总消费金额"/>
            <field id="clerbr" type="BaseType.U_ORGNBR" required="false" multi="false" array="false" longname="清算机构"/>
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="beforeMethod" id="beforeMethod" longname="交易前处理"/>
        <service mappingToProperty="true" serviceName="IoDpJointSvc.SelAggregateAmountByTrandt" id="SelAggregateAmountByTrandt" longname="根据日期查询汇总消费明细">
            <in_mappings by_interface="true">
                <mapping src="platno" dest="platno" desc="description" by_interface="true" on_top="true"/>
                <mapping src="clerdt" dest="trandt" desc="description" by_interface="true" on_top="true"/>
                <mapping src="jotrtp" dest="jotrtp" desc="description" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="aggram" dest="aggram" desc="description" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service mappingToProperty="true" serviceName="IoInAccount.IoInAcdr" id="IoInAcdr" longname="内部户借方记账服务" desc="借：304103401网络柜面核心内往来">
            <in_mappings by_interface="true">
                <mapping src="clerbr" dest="input.acbrch" by_interface="true" on_top="true"/>
                <mapping src="pllqbu" dest="input.busino" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                <mapping src="plowbu" dest="input.toacct" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="input.tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="IoInAccount.IoInAccr" id="IoInAccr" longname="内部户贷方记账服务" desc="贷：30410401网络柜面核心内往来">
            <in_mappings by_interface="true">
                <mapping src="clerbr" dest="input.acbrch" by_interface="true" on_top="true"/>
                <mapping src="plowbu" dest="input.busino" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                <mapping src="pllqbu" dest="input.toacct" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="input.tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="afterMethod" id="afterMethod" longname="交易后处理"/>
    </flow>
</flowtran>
