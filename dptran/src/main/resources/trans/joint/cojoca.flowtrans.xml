<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="cojoca" longname="联名账户消费" kind="3" package="cn.sunline.ltts.busi.dptran.trans.joint" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <interface package="cn.sunline.ltts.busi.dptran.trans.joint.intf">
        <input packMode="true">
            <field id="platno" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="平台编码"/>
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="交易卡号" ref="BaseDict.Comm.cardno"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额" ref="BaseDict.Comm.tranam"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="transq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="交易流水" ref="BaseDict.Comm.transq"/>
            <field id="trandt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="交易日期" ref="BaseDict.Comm.trandt"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额" ref="BaseDict.Comm.tranam"/>
            <field id="acctbl" type="BaseType.U_ACBLTP" required="false" multi="false" array="false" longname="交易后金额"/>
        </output>
        <property packMode="true">
            <field id="custac" type="BaseType.U_CHAR32" required="false" multi="false" array="false" longname="客户账号" ref="BaseDict.Comm.custac"/>
            <field id="joinac" type="BaseType.U_CHAR32" required="false" multi="false" array="false" longname="联名账号"/>
            <field id="amondr" type="BaseEnumType.E_AMONDR" required="false" multi="false" array="false" longname="交易方向"/>
            <field id="jotrtp" type="DpEnumType.E_JOTRTP" required="false" default="#dict.DpEnumType.E_JOTRTP().XF" multi="false" array="false" longname="联名交易类型"/>
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="beforeMethod" id="beforeMethod" longname="交易前处理"/>
        <service serviceName="IoDpJointSvc.UpdJointAcctBalance" id="UpdJointAcctBalance" longname="更新联名账户余额并登记到交易明细表">
            <in_mappings by_interface="true">
                <mapping src="custac" dest="joinin.custac" desc="description" by_interface="true" on_top="true"/>
                <mapping src="joinac" dest="joinin.joinac" desc="description" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="joinin.tranam" desc="description" by_interface="true" on_top="true"/>
                <mapping src="amondr" dest="joinin.amondr" desc="description" by_interface="true" on_top="true"/>
                <mapping src="jotrtp" dest="joinin.jotrtp" desc="description" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="acctbl" dest="acctbl" desc="description" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <method method="afterMetond" id="afterMetond" longname="交易后方法"/>
    </flow>
</flowtran>
