<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="dpsaop" longname="开子户交易(带金额)" kind="account" package="cn.sunline.ltts.busi.dptran.trans.online" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <description><![CDATA[]]></description>
    <interface package="cn.sunline.ltts.busi.dptran.trans.online.intf">
        <input packMode="true">
            <field id="acctna" type="BaseType.U_ACCTNA" required="true" multi="false" array="false" longname="账户名称" ref="DpDict.Acct.acctna"/>
            <field id="depttm" type="BaseEnumType.E_TERMCD" required="true" multi="false" array="false" longname="存期" ref="DpDict.Prod.depttm"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="true" multi="false" array="false" longname="货币代号" ref="DpDict.Acct.crcycd"/>
            <field id="cacttp" type="DpEnumType.E_CUSACT" required="false" multi="false" array="false" longname="客户账号类型" ref="DpDict.Prod.cacttp"/>
            <field id="custac" type="BaseType.U_CUACNO" required="true" multi="false" array="false" longname="客户账号" ref="DpDict.Acct.custac"/>
            <field id="prodcd" type="BaseType.U_PRODCD" required="true" multi="false" array="false" longname="产品编号" ref="DpDict.Prod.prodcd"/>
            <field id="opintr" type="BaseType.U_INSTRT" required="false" multi="false" array="false" longname="开户利率" ref="DpDict.Prod.opintr"/>
            <field id="passwd" type="BaseType.U_TRANPW" required="false" multi="false" array="false" longname="交易密码"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" enums="" default="0" multi="false" array="false" longname="交易金额" desc="默认为0" ref="DpDict.Acct.tranam"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="toacct" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="对方账号" ref="InDict.inac.toacct"/>
            <field id="pddpfg" type="DpEnumType.E_FCFLAG" required="false" multi="false" array="false" longname="产品定活标志" ref="DpDict.Prod.pddpfg"/>
        </output>
        <property packMode="true">
            <field id="custno" type="BaseType.U_CUSTNO" required="true" multi="false" array="false" longname="客户号" ref="DpDict.Acct.custno"/>
            <field id="cardno" type="BaseType.U_CARDNO" required="false" fixed="" default="" multi="false" array="false" longname="卡号" desc="" ref="DpDict.Acct.cardno"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="负债账号" ref="DpDict.Acct.acctno"/>
            <field id="toacct" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="对方账号" ref="InDict.inac.toacct"/>
            <field id="pddpfg" type="DpEnumType.E_FCFLAG" required="false" multi="false" array="false" longname="产品定活标志" ref="DpDict.Prod.pddpfg"/>
            <field id="prodtp" type="DpEnumType.E_PRODTP" required="false" fixed="'DEPO'" multi="false" array="false" longname="产品类型" desc="存款开户时，产品类型设为存款"/>
            <field id="opacfg" type="BaseEnumType.E_YES___" required="false" fixed="'0'" multi="false" array="false" longname="首开户标志" desc="判定是否是首次开户，是则负债账户必须是活期"/>
            <field id="custtp" type="BaseEnumType.E_CUSTTP" required="false" enums="PERSON" fixed="'11'" multi="false" array="false" longname="客户类型" desc="客户类型暂时默认为个人"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow id="" test="" longname="" desc="">
        <method method="chkOpsbacInfo" id="chkOpsbacInfo" test="" longname="开子户检查" desc="检查开子户交易"/>
        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addAcct" test="" longname="开立负债子账户" desc="开立负债子账户">
            <in_mappings by_interface="true">
                <mapping src="acctna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                <mapping src="cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                <mapping src="opacfg" dest="opacfg" desc="定活标志" by_interface="true" on_top="true"/>
                <mapping src="prodcd" dest="prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
                <mapping src="opintr" dest="openir" desc="开户利率(协议利率)" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="cplAddSubAcctOut.acctno" dest="toacct" by_interface="true" on_top="true"/>
                <mapping src="cplAddSubAcctOut.pddpfg" dest="pddpfg" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="addEARela" test="" longname="建立负债账户与电子账号关联" desc="建立负债账户与电子账号关联">
            <in_mappings by_interface="true">
                <mapping src="toacct" dest="cplAddEARelaIn.acctno" desc="新开负债账号" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账号" by_interface="true" on_top="true"/>
                <mapping src="pddpfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                <mapping src="prodcd" dest="cplAddEARelaIn.prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="DpAcctSvcType.addDrawAcctDp" id="custacDraw" test="tranam &gt; 0" longname="电子账户支取" desc="电子账户支取">
            <in_mappings by_interface="true">
                <mapping src="acctno" dest="cplDrawAcctIn.acctno" desc="" by_interface="true" on_top="true"/>
                <mapping src="cardno" dest="cplDrawAcctIn.cardno" desc="" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplDrawAcctIn.crcycd" desc="" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="cplDrawAcctIn.custac" desc="" by_interface="true" on_top="true"/>
                <mapping src="acctna" dest="cplDrawAcctIn.opacna" desc="" by_interface="true" on_top="true"/>
                <mapping src="toacct" dest="cplDrawAcctIn.toacct" desc="" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="cplDrawAcctIn.tranam" desc="" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service mappingToProperty="false" serviceName="DpAcctSvcType.addPostAcctDp" id="subsacSave" test="tranam &gt; 0" longname="新开子户存入" desc="新开子户存入">
            <in_mappings by_interface="true">
                <mapping src="toacct" dest="cplSaveAcctIn.acctno" desc="" by_interface="true" on_top="true"/>
                <mapping src="cardno" dest="cplSaveAcctIn.cardno" desc="" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplSaveAcctIn.crcycd" desc="" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="cplSaveAcctIn.custac" desc="" by_interface="true" on_top="true"/>
                <mapping src="acctna" dest="cplSaveAcctIn.opacna" desc="" by_interface="true" on_top="true"/>
                <mapping src="acctno" dest="cplSaveAcctIn.toacct" desc="" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="cplSaveAcctIn.tranam" desc="" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="prcOpsbacOut" id="prcOpsbacOut" test="" longname="设置开子户输出参数" desc="设置开子户输出参数"/>
    </flow>
</flowtran>
