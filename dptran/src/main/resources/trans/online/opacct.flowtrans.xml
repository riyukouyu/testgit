<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="opacct" longname="电子账户与负债账户首开户交易" kind="3" package="cn.sunline.ltts.busi.dptran.trans.online" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <description><![CDATA[电子账户新开户，同时开虚拟实体卡，及对应的默认负债子账户，容器账户类型可以开多个电子账户。]]></description>
    <interface package="cn.sunline.ltts.busi.dptran.trans.online.intf">
        <input packMode="true">
            <field id="custna" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="客户名称"/>
            <field id="idtftp" type="BaseEnumType.E_IDTFTP" required="false" multi="false" array="false" longname="证件类型"/>
            <field id="idtfno" type="BaseType.U_IDTFNO" required="false" multi="false" array="false" longname="证件号码"/>
            <field id="agisln" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="证件是否长期有效"/>
            <field id="agstdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="证件生效日期"/>
            <field id="agendt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="证件失效日期"/>
            <field id="worktp" type="BaseEnumType.E_WORKTP" required="false" multi="false" array="false" longname="职业"/>
            <field id="cutycd" type="BaseType.U_COUNCD" required="false" multi="false" array="false" longname="国籍"/>
            <field id="sextyp" type="BaseEnumType.E_SEXTYP" required="false" multi="false" array="false" longname="性别"/>
            <field id="addres" type="BaseType.U_CHAR200" required="false" multi="false" array="false" longname="地址"/>
            <field id="prsnpr" type="BaseEnumType.E_PRSNPR" required="false" multi="false" array="false" longname="存款人类别"/>
            <field id="worktx" type="BaseType.U_CHAR200" required="false" multi="false" array="false" longname="工作单位"/>
            <field id="teleno" type="BaseType.U_IDTFNO" required="false" multi="false" array="false" longname="电话号码"/>
            <field id="pswdtp" type="BaseEnumType.E_PSWDTP" required="false" multi="false" array="false" longname="加密方式"/>
            <field id="tranpw" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="交易密码"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" enums="RMB" multi="false" array="false" longname="货币代号" ref="DpDict.Acct.crcycd"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="custac" type="BaseType.U_CUACNO" required="false" multi="false" array="false" longname="电子账号"/>
        </output>
        <property packMode="true">
            <field id="custno" type="BaseType.U_CUSTNO" required="false" multi="false" array="false" longname="客户号"/>
            <field id="custac" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="电子账号"/>
            <field id="cacttp" type="DpEnumType.E_CUSACT" required="false" multi="false" array="false" longname="客户账号类型" ref="DpDict.Prod.cacttp"/>
            <field id="opendt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="开户日期"/>
            <field id="opensq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="开户流水"/>
            <field id="baprcd" type="BaseType.U_PRODCD" required="false" multi="false" array="false" longname="基础负债产品" ref="CaDict.CardAcc.baprcd"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="负债账号" ref="DpDict.Acct.acctno"/>
            <field id="pddpfg" type="DpEnumType.E_FCFLAG" required="false" multi="false" array="false" longname="产品定活标志" ref="DpDict.Prod.pddpfg"/>
            <field id="debttp" type="BaseEnumType.E_DEBTTP" required="false" multi="false" array="false" longname="存款种类" ref="DpDict.Prod.debttp"/>
            <field id="acctcd" type="BaseType.U_DTITCD" required="false" multi="false" array="false" longname="核算代码" ref="DpDict.Prod.acctcd"/>
            <field id="prodtp" type="DpEnumType.E_PRODTP" required="false" enums="存款" fixed="'DEPO'" multi="false" array="false" longname="产品类型" desc="存款开户交易，产品类型设为存款"/>
            <field id="prodcd" type="BaseType.U_PRODCD" required="false" default="'0101001001'" multi="false" array="false" longname="产品号" desc="产品号"/>
            <field id="depttm" type="BaseEnumType.E_TERMCD" required="false" enums="T000" fixed="'000'" multi="false" array="false" longname="存期" desc="开电子账户时默认为活期" ref="DpDict.Prod.depttm"/>
            <field id="opacfg" type="BaseEnumType.E_YES___" required="false" fixed="'YES'" multi="false" array="false" longname="首开户标志" desc="判定是否是首次开户，是则负债账户必须是活期"/>
            <field id="accttp" type="BaseEnumType.E_ACCATP" required="false" enums="WACCT" fixed="'1'" multi="false" array="false" longname="电子账户分类" desc="暂时默认为弱电子账户"/>
            <field id="chckfs" type="DpEnumType.E_CHCKFS" required="false" enums="SWCHECK" fixed="'1'" multi="false" array="false" longname="检验方式" desc="暂时默认为软件校验"/>
            <field id="custtp" type="BaseEnumType.E_CUSTTP" required="false" fixed="'01'" multi="false" array="false" longname="客户类型" desc="客户类型暂时默认为个人"/>
            <field id="signtp" type="CaEnumType.E_SIGNTP" required="false" fixed="'01'" multi="false" array="false" longname="签约类型" desc="签约类型默认为智能储蓄"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow>
        <method method="chkCustInfo" id="chkCustInfo" longname="检查客户输入信息" desc="检查客户输入信息"/>
        <service mappingToProperty="true" serviceName="IoCaSrvGenEAccountInfo.IoCaAddEAccount" id="addEAccount" longname="新增电子账户" desc="先根据客户账户类型检查容器账户标志，看是否容器账户，容器账户可开多个电子账户，单一账户只能开一个电子账户；再新增相关卡信息，并建立卡与电子账户关联关系">
            <in_mappings by_interface="true">
                <mapping src="cacttp" dest="cplAddEAccountIn.cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                <mapping src="custna" dest="cplAddEAccountIn.custna" desc="客户名称" by_interface="true" on_top="true"/>
                <mapping src="custno" dest="cplAddEAccountIn.custno" desc="客户号" by_interface="true" on_top="true"/>
                <mapping src="tranpw" dest="cplAddEAccountIn.tranpw" desc="交易密码" by_interface="true" on_top="true"/>
                <mapping src="chckfs" dest="cplAddEAccountIn.chckfs" desc="校验方式" by_interface="true" on_top="true"/>
                <mapping src="accttp" dest="cplAddEAccountIn.accttp" desc="电子账户性质" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="cplAddEAccountOut.custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.opendt" dest="opendt" desc="开户日期" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.opensq" dest="opensq" desc="开户流水" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service mappingToProperty="true" serviceName="DpAcctSvcType.AddAcct" id="addAccount" longname="开立负债子帐户" desc="开负债子帐户">
            <in_mappings by_interface="true">
                <mapping src="custna" dest="acctna" desc="客户名称" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                <mapping src="custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                <mapping src="depttm" dest="depttm" desc="存期" by_interface="true" on_top="true"/>
                <mapping src="baprcd" dest="prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                <mapping src="cacttp" dest="cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                <mapping src="opacfg" dest="opacfg" desc="首开户标志" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" desc="币种" by_interface="true" on_top="true"/>
                <mapping src="custtp" dest="custtp" desc="客户类型" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="cplAddSubAcctOut.acctno" dest="acctno" desc="负债子账号" by_interface="true" on_top="true"/>
                <mapping src="cplAddSubAcctOut.pddpfg" dest="pddpfg" desc="定活标志" by_interface="true" on_top="true"/>
                <mapping src="cplAddSubAcctOut.prodcd" dest="prodcd" desc="产品号" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <service serviceName="IoCaSrvGenEAccountInfo.IoCaAddEARela" id="addEARelation" longname="建立电子账号与负债账号关联" desc="建立电子账号与负债账号关联">
            <in_mappings by_interface="true">
                <mapping src="acctno" dest="cplAddEARelaIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="cplAddEARelaIn.custac" desc="电子账户" by_interface="true" on_top="true"/>
                <mapping src="pddpfg" dest="cplAddEARelaIn.fcflag" desc="定活标志" by_interface="true" on_top="true"/>
                <mapping src="prodtp" dest="cplAddEARelaIn.prodtp" desc="产品类型" by_interface="true" on_top="true"/>
                <mapping src="prodcd" dest="cplAddEARelaIn.prodcd" desc="产品编号" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplAddEARelaIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="prcOpacctOut" id="prcOpacctOut" longname="设置输出接口数据" desc="设置输出接口数据"/>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
