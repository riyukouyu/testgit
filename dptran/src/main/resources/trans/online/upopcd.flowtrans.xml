<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="upopcd" longname="服务商变更" kind="2" package="cn.sunline.edsp.busi.dptran.trans.online" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <interface package="cn.sunline.edsp.busi.dptran.trans.online.intf">
        <input packMode="true">
            <field id="cacttp" type="DpEnumType.E_CUSACT" required="false" default="'1'" multi="false" array="false" longname="客户账号类型" ref="DpDict.Prod.cacttp"/>
            <field id="accatp" type="BaseEnumType.E_ACCATP" required="false" default="'2'" multi="false" array="false" longname="账户分类"/>
            <field id="custno" type="BaseType.U_CUSTNO" required="true" multi="false" array="false" longname="客户号" ref="DpDict.Acct.custno"/>
            <field id="custna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="客户名称" ref="DpDict.Acct.custna"/>
            <field id="tlphno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="手机号码" ref="DpDict.Acct.tlphno"/>
            <field id="idtftp" type="BaseEnumType.E_IDTFTP" required="false" multi="false" array="false" longname="证件类型" ref="DpDict.Acct.idtftp"/>
            <field id="idtfno" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="证件号码"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="true" multi="false" array="false" longname="账户所属机构" ref="DpDict.Acct.brchno"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" default="'CNY'" multi="false" array="false" longname="币种" ref="BaseDict.Comm.crcycd"/>
            <field id="uschnl" type="BaseEnumType.E_USCHNL" required="false" multi="false" array="false" longname="开户渠道" ref="DpDict.Acct.uschnl"/>
            <field id="mactid" type="BaseType.U_CHAR30" required="true" multi="false" array="false" longname="电子主账户开户标识" ref="DpDict.Acct.mactid"/>
            <field id="usertp" type="BaseEnumType.E_USTYPE" required="false" multi="false" array="false" longname="客户标识" ref="DpDict.Acct.usertp"/>
            <field id="sbrand" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="品牌" ref="DpDict.Acct.sbrand"/>
            <field id="bradna" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="品牌名称" ref="DpDict.Acct.bradna"/>
            <field id="acctna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="子账户名称" ref="DpDict.Acct.acctna"/>
            <field id="acctid" type="BaseType.U_CHAR30" required="true" multi="false" array="false" longname="子账户开户标识" ref="DpDict.Acct.acctid"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="客户账号" alias_name="虚拟卡号" ref="DpDict.Acct.cardno"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="机构号" ref="BaseDict.Comm.brchno"/>
            <field id="mactid" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="电子主账户开户标识" ref="DpDict.Acct.mactid"/>
            <field id="acctid" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="子账户开户标识" ref="DpDict.Acct.acctid"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="子账号" ref="DpDict.Acct.acctno"/>
        </output>
        <property packMode="true">
            <field id="mAccountFlag" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="主户是否新增"/>
            <field id="zAccountFlag" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="子户是否变更"/>
            <field id="idckrt" type="CaEnumType.E_IDCKRT" required="false" default="'1'" multi="false" array="false" longname="身份核查结果" ref="CaDict.Eacct.idckrt"/>
            <field id="mpckrt" type="CaEnumType.E_MPCKRT" required="false" default="'1'" multi="false" array="false" longname="人脸识别结果" ref="CaDict.Eacct.mpckrt"/>
            <field id="csextg" type="BaseEnumType.E_CSEXTG" required="false" multi="false" array="false" longname="钞汇标志" ref="CaDict.Eacct.csextg"/>
            <field id="opacwy" type="CaEnumType.E_OPACWY" required="false" enums="SINGLE" default="'1'" multi="false" array="false" longname="开户方式" desc="联机交易默认为单笔开户" ref="CaDict.Eacct.opacwy"/>
            <field id="ckrtsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="核查流水号" ref="CaDict.Eacct.ckrtsq"/>
            <field id="facesg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="面签标识"/>
            <field id="bdrtfg" type="BaseEnumType.E_YES___" required="false" default="'1'" multi="false" array="false" longname="是否有绑卡认证通过标志"/>
            <field id="passwd" type="BaseType.U_TRANPW" required="false" multi="false" array="false" longname="交易密码" ref="ApDict.Aplt.passwd"/>
            <field id="authif" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="加密因子"/>
            <field id="custno" type="BaseType.U_CUSTNO" required="false" multi="false" array="false" longname="客户号" ref="DpDict.Acct.custno"/>
            <field id="custac" type="BaseType.U_CUACNO" required="false" multi="false" array="false" longname="电子账号" ref="CaDict.Eacct.custac"/>
            <field id="opensq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="开户流水"/>
            <field id="opendt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="开户日期"/>
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="客户账号" ref="DpDict.Acct.cardno"/>
            <field id="acctno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="子账号" ref="DpDict.Acct.acctno"/>
            <field id="acaltp" type="CaEnumType.E_ACALTP" required="false" fixed="'1'" multi="false" array="false" longname="账户别名类型" desc="暂时默认绑定手机号" ref="CaDict.Eacct.acaltp"/>
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="checkOpcd" id="checkOpcd" longname="开户变更信息检查"/>
        <service mappingToProperty="true" serviceName="IoCaSrvGenEAccountInfo.IoCaAddEAccount" id="IoCaAddEAccount" test="mAccountFlag==#dict.BaseEnumType.E_YES___().YES" longname="开立电子账户服务">
            <in_mappings by_interface="true">
                <mapping src="cacttp" dest="cplAddEAccountIn.cacttp" desc="客户账号类型" by_interface="true" on_top="true"/>
                <mapping src="custna" dest="cplAddEAccountIn.custna" desc="客户名称" by_interface="true" on_top="true"/>
                <mapping src="custno" dest="cplAddEAccountIn.custno" desc="客户号" by_interface="true" on_top="true"/>
                <mapping src="brchno" dest="cplAddEAccountIn.brchno" desc="账户归属机构" by_interface="true" on_top="true"/>
                <mapping src="idckrt" dest="cplAddEAccountIn.idckrt" desc="身份核查结果" by_interface="true" on_top="true"/>
                <mapping src="mpckrt" dest="cplAddEAccountIn.mpckrt" desc="人脸识别结果" by_interface="true" on_top="true"/>
                <mapping src="tlphno" dest="cplAddEAccountIn.tlphno" desc="电话号码" by_interface="true" on_top="true"/>
                <mapping src="accatp" dest="cplAddEAccountIn.accttp" desc="账户分类" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplAddEAccountIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                <mapping src="csextg" dest="cplAddEAccountIn.csextg" desc="钞汇标志" by_interface="true" on_top="true"/>
                <mapping src="opacwy" dest="cplAddEAccountIn.opacwy" desc="开户方式" by_interface="true" on_top="true"/>
                <mapping src="ckrtsq" dest="cplAddEAccountIn.ckrtsq" desc="核查流水号" by_interface="true" on_top="true"/>
                <mapping src="facesg" dest="cplAddEAccountIn.facesg" desc="面签标识" by_interface="true" on_top="true"/>
                <mapping src="bdrtfg" dest="cplAddEAccountIn.bdrtfg" desc="是否有绑卡认证通过标志" by_interface="true" on_top="true"/>
                <mapping src="idtfno" dest="cplAddEAccountIn.idtfno" desc="证件号码" by_interface="true" on_top="true"/>
                <mapping src="idtftp" dest="cplAddEAccountIn.idtftp" desc="证件类型" by_interface="true" on_top="true"/>
                <mapping src="passwd" dest="cplAddEAccountIn.tranpw" desc="交易密码" by_interface="true" on_top="true"/>
                <mapping src="authif" dest="cplAddEAccountIn.authif" desc="加密因子" by_interface="true" on_top="true"/>
                <mapping src="uschnl" dest="cplAddEAccountIn.uschnl" desc="开户渠道" by_interface="true" on_top="true"/>
                <mapping src="usertp" dest="cplAddEAccountIn.usertp" desc="客户标识" by_interface="true" on_top="true"/>
                <mapping src="mactid" dest="cplAddEAccountIn.mactid" desc="电子主账户开户标识" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true">
                <mapping src="cplAddEAccountOut.custac" dest="custac" desc="电子账号" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.custno" dest="custno" desc="客户号" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.opendt" dest="opendt" desc="开户日期" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.opensq" dest="opensq" desc="开户流水" by_interface="true" on_top="true"/>
                <mapping src="cplAddEAccountOut.cardno" dest="cardno" desc="客户账号" by_interface="true" on_top="true"/>
            </out_mappings>
        </service>
        <method method="setCardNo" id="setCardNo" longname="设置内部卡号"/>
        <service serviceName="IoCaSevAliasBindChange.IoSevAliasBinding" id="prcAliasBind" test="mAccountFlag==#dict.BaseEnumType.E_YES___().YES" longname="绑定手机号" desc="绑定手机号">
            <in_mappings by_interface="true">
                <mapping src="tlphno" dest="tlphno" desc="账户别名" by_interface="true" on_top="true"/>
                <mapping src="acaltp" dest="acaltp" desc="账户别名类型" by_interface="true" on_top="true"/>
                <mapping src="cardno" dest="cardno" desc="内部卡号" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="updateOpaccd" id="updateOpaccd" longname="服务商信息变更"/>
        <method method="outResult" longname="输出返回参数"/>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
