<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran id="pbchrg" longname="电子账户收费" kind="3" package="cn.sunline.ltts.busi.dptran.trans" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <interface package="cn.sunline.ltts.busi.dptran.trans.intf">
        <input packMode="true">
            <field id="cardno" type="BaseType.U_CARDNO" required="false" multi="false" array="false" longname="客户电子账号"/>
            <field id="otacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转出方户名"/>
            <field id="otbrch" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="转出方账户所属机构"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="币种" ref="BaseDict.Comm.crcycd"/>
            <field id="csextg" type="BaseEnumType.E_CSEXTG" required="false" multi="false" array="false" longname="钞汇标志"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <field id="tlcgam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="收费总额"/>
            <field id="chckdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="对账日期"/>
            <field id="keepdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="清算日期"/>
            <field id="stady1" type="BaseType.U_SMRYDS" required="false" multi="false" array="false" longname="备用字段1"/>
            <field id="stady2" type="BaseType.U_SMRYDS" required="false" multi="false" array="false" longname="备用字段2"/>
            <field id="chkpwd" type="IoDpCapital.chkpwd" required="false" multi="false" array="false" longname="密码验证参数"/>
            <field id="chkqtn" type="IoDpCapital.chkqtn" required="false" multi="false" array="false" longname="额度中心参数"/>
            <field id="chrgpm" type="IoChrgComplexType.IoCgCalCenterReturn" required="false" multi="true" array="false" longname="电子账户收费输入列表"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="mntrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="交易日期"/>
            <field id="mntrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="交易时间"/>
            <field id="mntrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="主交易流水"/>
        </output>
        <property packMode="true">
            <field id="custac" type="BaseType.U_CUSTAC" required="false" multi="false" array="false" longname="客户账号"/>
            <field id="accttp" type="BaseEnumType.E_ACCATP" required="false" multi="false" array="false" longname="账户分类"/>
            <field id="servtp" type="MsType.U_CHANNEL" required="false" multi="false" array="false" longname="渠道"/>
            <field id="servsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="交易渠道流水"/>
            <field id="servdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="渠道日期"/>
            <field id="chgflg" type="PbEnumType.E_CHGFLG" required="false" multi="false" array="false" longname="记账标志"/>
        </property>
        <printer packMode="false"/>
    </interface>
    <flow>
        <method method="DtransBefore" id="DtransBefore" longname="收费前处理"/>
        <service serviceName="IoCaSevQryAccout.IoCaQryInacInfo" id="IoCaQryInacInfo" test="iscase == #dict.BaseEnumType.E_YES___().YES" longname="可疑账户涉案账户检查" desc="可疑账户涉案账户检查">
            <in_mappings by_interface="true">
                <mapping src="cardno" dest="cardno" desc="电子账号" by_interface="true" on_top="true"/>
                <mapping src="otacna" dest="custna" desc="户名" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="IoCaSevAccountLimit.IoAcSubQuota" id="IoAcSubQuota" test="chkqtn.isckqt == #dict.BaseEnumType.E_YES___().YES" longname="电子账户系统扣减客户额度">
            <in_mappings by_interface="true">
                <mapping src="accttp" dest="accttp" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.aclmfg" dest="aclmfg" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.authtp" dest="authtp" by_interface="true" on_top="true"/>
                <mapping src="otbrch" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="custac" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.custid" dest="custid" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.custlv" dest="custlv" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.acctrt" dest="acctrt" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.limttp" dest="limttp" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.pytltp" dest="pytltp" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.rebktp" dest="rebktp" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.risklv" dest="risklv" by_interface="true" on_top="true"/>
                <mapping src="chkqtn.sbactp" dest="sbactp" by_interface="true" on_top="true"/>
                <mapping src="servdt" dest="servdt" by_interface="true" on_top="true"/>
                <mapping src="servsq" dest="servsq" by_interface="true" on_top="true"/>
                <mapping src="servtp" dest="servtp" by_interface="true" on_top="true"/>
                <mapping src="tlcgam" dest="tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="IoCgChrgSvcType.IoCalCharge" id="IoCalCharge" longname="公共收费">
            <in_mappings by_interface="true">
                <mapping src="chrgpm" dest="in.calcenter" by_interface="true" on_top="true"/>
                <mapping src="csextg" dest="in.csexfg" desc="钞汇标志" by_interface="true" on_top="true"/>
                <mapping src="smrycd" dest="in.smrycd" desc="摘要码" by_interface="true" on_top="true"/>
                <mapping src="custac" dest="in.custac" desc="客户账号" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="in.trancy" desc="交易币种" by_interface="true" on_top="true"/>
                <mapping src="chgflg" dest="in.chgflg" desc="记账标志" by_interface="true" on_top="true"/>
                <mapping src="#dict.BaseEnumType.E_CSTRFG().TRNSFER" dest="in.cstrfg" desc="现转标志" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="in.chrgcy" desc="收费币种" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="DtransAfter" id="DtransAfter" longname="收费后处理"/>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
