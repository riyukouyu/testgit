<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="acctin" longname="即富收单" kind="3" package="cn.sunline.ltts.busi.dptran.trans.lzbank" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <error_prof serviceName="KnlIoblService.geterrorthrow" id="geterrorthrow" longname="收单异常数据记录">
        <in_mappings by_interface="true">
            <mapping src="actiid" dest="actiid" by_interface="true" on_top="true"/>
            <mapping src="addfee" dest="addfee" by_interface="true" on_top="true"/>
            <mapping src="adflag" dest="adflag" by_interface="true" on_top="true"/>
            <mapping src="authno" dest="authno" by_interface="true" on_top="true"/>
            <mapping src="avalcr" dest="avalcr" by_interface="true" on_top="true"/>
            <mapping src="buodno" dest="buodno" by_interface="true" on_top="true"/>
            <mapping src="cardtp" dest="cardtp" by_interface="true" on_top="true"/>
            <mapping src="chantp" dest="chantp" by_interface="true" on_top="true"/>
            <mapping src="citycd" dest="citycd" by_interface="true" on_top="true"/>
            <mapping src="cityif" dest="cityif" by_interface="true" on_top="true"/>
            <mapping src="cletip" dest="cletip" by_interface="true" on_top="true"/>
            <mapping src="coorpa" dest="coorpa" by_interface="true" on_top="true"/>
            <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
            <mapping src="devtyp" dest="devtyp" by_interface="true" on_top="true"/>
            <mapping src="fiel0" dest="fiel0" by_interface="true" on_top="true"/>
            <mapping src="fiel03" dest="fiel03" by_interface="true" on_top="true"/>
            <mapping src="fiel60" dest="fiel60" by_interface="true" on_top="true"/>
            <mapping src="fiel6201" dest="fiel6201" by_interface="true" on_top="true"/>
            <mapping src="fiel6202" dest="fiel6202" by_interface="true" on_top="true"/>
            <mapping src="finsty" dest="finsty" by_interface="true" on_top="true"/>
            <mapping src="flowid" dest="flowid" by_interface="true" on_top="true"/>
            <mapping src="frodfg" dest="frodfg" by_interface="true" on_top="true"/>
            <mapping src="frteno" dest="frteno" by_interface="true" on_top="true"/>
            <mapping src="gprsps" dest="gprsps" by_interface="true" on_top="true"/>
            <mapping src="idenfg" dest="idenfg" by_interface="true" on_top="true"/>
            <mapping src="inmeid" dest="inmeid" by_interface="true" on_top="true"/>
            <mapping src="markfe" dest="markfe" by_interface="true" on_top="true"/>
            <mapping src="mercfg" dest="mercfg" by_interface="true" on_top="true"/>
            <mapping src="messtp" dest="messtp" by_interface="true" on_top="true"/>
            <mapping src="ordeno" dest="ordeno" by_interface="true" on_top="true"/>
            <mapping src="orgaid" dest="orgaid" by_interface="true" on_top="true"/>
            <mapping src="otbkna" dest="otbkna" by_interface="true" on_top="true"/>
            <mapping src="otcafg" dest="otcafg" by_interface="true" on_top="true"/>
            <mapping src="pabkno" dest="pabkno" by_interface="true" on_top="true"/>
            <mapping src="pacaat" dest="pacaat" by_interface="true" on_top="true"/>
            <mapping src="pamena" dest="pamena" by_interface="true" on_top="true"/>
            <mapping src="pameno" dest="pameno" by_interface="true" on_top="true"/>
            <mapping src="pateid" dest="pateid" by_interface="true" on_top="true"/>
            <mapping src="pmanam" dest="pmanam" by_interface="true" on_top="true"/>
            <mapping src="posnum" dest="posnum" by_interface="true" on_top="true"/>
            <mapping src="prepdt" dest="prepdt" by_interface="true" on_top="true"/>
            <mapping src="prepsq" dest="prepsq" by_interface="true" on_top="true"/>
            <mapping src="preptm" dest="preptm" by_interface="true" on_top="true"/>
            <mapping src="prpoin" dest="prpoin" by_interface="true" on_top="true"/>
            <mapping src="prvamd" dest="prvamd" by_interface="true" on_top="true"/>
            <mapping src="psbhno" dest="psbhno" by_interface="true" on_top="true"/>
            <mapping src="psdate" dest="psdate" by_interface="true" on_top="true"/>
            <mapping src="pssnno" dest="pssnno" by_interface="true" on_top="true"/>
            <mapping src="pssque" dest="pssque" by_interface="true" on_top="true"/>
            <mapping src="refeno" dest="refeno" by_interface="true" on_top="true"/>
            <mapping src="reflid" dest="reflid" by_interface="true" on_top="true"/>
            <mapping src="remark" dest="remark" by_interface="true" on_top="true"/>
            <mapping src="revsad" dest="revsad" by_interface="true" on_top="true"/>
            <mapping src="rsmglv" dest="rsmglv" by_interface="true" on_top="true"/>
            <mapping src="seleke" dest="seleke" by_interface="true" on_top="true"/>
            <mapping src="signim" dest="signim" by_interface="true" on_top="true"/>
            <mapping src="spcipy" dest="spcipy" by_interface="true" on_top="true"/>
            <mapping src="svcode" dest="svcode" by_interface="true" on_top="true"/>
            <mapping src="teleno" dest="teleno" by_interface="true" on_top="true"/>
            <mapping src="tfcrfg" dest="tfcrfg" by_interface="true" on_top="true"/>
            <mapping src="tleway" dest="tleway" by_interface="true" on_top="true"/>
            <mapping src="tpdu" dest="tpdu" by_interface="true" on_top="true"/>
            <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
            <mapping src="uniseq" dest="uniseq" by_interface="true" on_top="true"/>
            <mapping src="unkpdt" dest="unkpdt" by_interface="true" on_top="true"/>
            <mapping src="untrdt" dest="untrdt" by_interface="true" on_top="true"/>
            <mapping src="untrst" dest="untrst" by_interface="true" on_top="true"/>
            <mapping src="untrtm" dest="untrtm" by_interface="true" on_top="true"/>
            <mapping src="voucfe" dest="voucfe" by_interface="true" on_top="true"/>
            <mapping src="voucid" dest="voucid" by_interface="true" on_top="true"/>
        </in_mappings>
        <out_mappings by_interface="false"/>
    </error_prof>
    <interface package="cn.sunline.ltts.busi.dptran.trans.lzbank.intf">
        <input packMode="true">
            <field id="buodno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="商户订单号"/>
            <field id="ordeno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="支付订单号"/>
            <field id="untrst" type="JfDpEnumType.E_PASTAT" required="false" multi="false" array="false" longname="posp交易状态"/>
            <field id="uniseq" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="银联流水"/>
            <field id="posnum" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="内部终端号码"/>
            <field id="inmeid" type="BaseType.U_CHAR25" required="false" multi="false" array="false" longname="内部商户号"/>
            <field id="prepsq" type="PbBaseType.U_PREPSQ" required="false" multi="false" array="false" longname="posp流水"/>
            <field id="prepdt" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="posp日期"/>
            <field id="preptm" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="posp时间"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额"/>
            <field id="pmanam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="保费金额"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" fixed="'CNY'" default="'CNY'" multi="false" array="false" longname="币种"/>
            <field id="unkpdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="银联清算日期"/>
            <field id="untrtm" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="银联交易时间（发往通道时间）"/>
            <field id="untrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="银联交易日期（发往通道日期）"/>
            <field id="refeno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="参考号"/>
            <field id="teleno" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="手机号（收款）"/>
            <field id="frteno" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="来源手机号（付款）"/>
            <field id="pssnno" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="终端sn序列号"/>
            <field id="pabkno" type="BaseType.U_CHAR64" required="false" multi="false" array="false" longname="支付银行卡账号"/>
            <field id="otbkna" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="支付银行名称"/>
            <field id="cardtp" type="DsEnumType.E_CARDTP" required="false" multi="false" array="false" longname="卡类型"/>
            <field id="pacaat" type="JfDpEnumType.E_PACAAT" required="false" multi="false" array="false" longname="支付银行卡属性"/>
            <field id="svcode" type="JfDpEnumType.E_SERVCD" required="false" multi="false" array="false" longname="服务编码"/>
            <field id="messtp" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="报文类型"/>
            <field id="cletip" type="BaseType.U_CHAR25" required="false" multi="false" array="false" longname="客户端ip地址"/>
            <field id="pameno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="支付商户号"/>
            <field id="pamena" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="支付商户号名称"/>
            <field id="pateid" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="支付终端号"/>
            <field id="gprsps" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="经纬度"/>
            <field id="signim" type="BaseType.U_CHAR200" required="false" multi="false" array="false" longname="签购单url"/>
            <field id="orgaid" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="机构号（品牌id）"/>
            <field id="cityif" type="BaseType.U_CHAR200" required="false" multi="false" array="false" longname="城市"/>
            <field id="citycd" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="城市码"/>
            <field id="devtyp" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="卡头类型"/>
            <field id="prvamd" type="BaseType.U_CHAR05" required="false" multi="false" array="false" longname="预授权信息输入模式"/>
            <field id="psbhno" type="BaseType.U_CHAR06" required="false" multi="false" array="false" longname="pos批次号（大pos上送）"/>
            <field id="psdate" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="pos日期（大pos上送）"/>
            <field id="pssque" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="pos流水（大pos上送）"/>
            <field id="authno" type="BaseType.U_CHAR06" required="false" multi="false" array="false" longname="授权码"/>
            <field id="seleke" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="银联二维码返回"/>
            <field id="idenfg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="认证非认证卡标志"/>
            <field id="actiid" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="活动id"/>
            <field id="addfee" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="附加费率"/>
            <field id="spcipy" type="JfDpEnumType.E_SPCIPY" required="false" multi="false" array="false" longname="特殊优惠"/>
            <field id="mercfg" type="JfDpEnumType.E_MERCFG" required="false" multi="false" array="false" longname="商户类型"/>
            <field id="prpoin" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="赠送积分"/>
            <field id="voucid" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="抵用券id"/>
            <field id="voucfe" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="活动抵扣"/>
            <field id="markfe" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="总抵扣 |基础抵扣 |D0抵扣 |附加抵扣 "/>
            <field id="finsty" type="JfDpEnumType.E_FINSTY" required="false" multi="false" array="false" longname="结算类型"/>
            <field id="fiel60" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="60域"/>
            <field id="tleway" type="JfDpEnumType.E_TLEWAY" required="false" multi="false" array="false" longname="结算方式"/>
            <field id="otcafg" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="外卡标识"/>
            <field id="tpdu" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="TPDU"/>
            <field id="fiel6201" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="62域上送的基站信息"/>
            <field id="fiel6202" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="62域上送的IP信息"/>
            <field id="revsad" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="回调地址"/>
            <field id="flowid" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="交易自增id"/>
            <field id="reflid" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="原交易自增id"/>
            <field id="frodfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否押金"/>
            <field id="adflag" type="BaseType.U_CHAR05" required="false" multi="false" array="false" longname="路由类型"/>
            <field id="coorpa" type="JfDpEnumType.E_COORPA" required="false" multi="false" array="false" longname="收付款标志"/>
            <field id="rsmglv" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="商户风控等级"/>
            <field id="remark" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="摘要"/>
            <field id="avalcr" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="风控可用额度"/>
            <field id="tfcrfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否已调用风控"/>
            <field id="chantp" type="JfDpEnumType.E_CHANTP" required="false" multi="false" array="false" longname="交易渠道"/>
            <field id="fiel0" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="0域"/>
            <field id="fiel03" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="3域"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="mntrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="收单交易流水"/>
            <field id="mntrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="收单交易日期"/>
            <field id="mntrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="收单交易时间"/>
            <field id="cuanam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="商户存入金额"/>
            <field id="finsty" type="JfDpEnumType.E_FINSTY" required="false" multi="false" array="false" longname="结算类型"/>
            <field id="edtrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="代发交易流水"/>
            <field id="edtrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="代发交易日期"/>
            <field id="edtrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="代发交易时间"/>
            <field id="cdopac" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="结算卡账号" ref="DpDict.Acct.cdopac"/>
            <field id="acctna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="子账户名称" ref="DpDict.Acct.acctna"/>
            <field id="brchna" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="银行卡开户行名称" ref="DpDict.Acct.brchna"/>
            <field id="edmflg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否已代发"/>
            <field id="opbrch" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="银行卡开户行号" ref="DpDict.Acct.opbrch"/>
            <field id="jnanam" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="商户手续费"/>
            <field id="frozfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="该笔流水是否冻结"/>
            <field id="tmcdopac" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="结算卡账号"/>
            <field id="tmbankph" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="结算卡预留手机号"/>
        </output>
        <property packMode="true">
            <field id="busino" type="BaseType.U_CHAR16" required="false" multi="false" array="false" longname="待清算业务编码"/>
            <field id="reanam" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="银联手续费金额"/>
            <field id="amanam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="分润金额"/>
            <field id="jnanam" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="商户手续费"/>
            <field id="cuanam" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="商户存入金额"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="交易机构"/>
            <field id="detlsq" type="BaseType.U_LONGIN" required="false" multi="false" array="false" longname="明细序号"/>
            <field id="ischck" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否检查标志"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" default="'CX'" multi="false" array="false" longname="摘要代码"/>
            <field id="isexit" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否存在交易"/>
            <field id="cardno" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="交易卡号"/>
            <field id="custac" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="电子账号"/>
            <field id="frstbi" type="BaseType.U_CHAR16" required="false" multi="false" array="false" longname="服务费收入业务编码"/>
            <field id="inacct" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转入账号"/>
            <field id="inacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转入户名"/>
            <field id="busidn" type="InEnumType.E_BLNCDN" required="false" multi="false" array="false" longname="业务代码方向"/>
            <field id="corpno" type="BaseType.U_CORPNO" required="false" multi="false" array="false" longname="法人代码"/>
            <field id="sechke" type="BaseType.U_CHAR200" required="false" multi="false" array="false" longname="搜索键"/>
            <field id="atsvpr" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="归属服务商"/>
            <field id="atsvna" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="归属服务商名称"/>
            <field id="ad01na" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="一级服务商名称"/>
            <field id="agid01" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="一级服务商"/>
            <field id="sbrand" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="pos品牌"/>
            <field id="busitp" type="DsEnumType.E_BUSITP" required="false" multi="false" array="false" longname="业务类型" ref="DsDict.Ds.busitp"/>
            <field id="clerinfo" type="IoAccountComplexType.IoAccounttingIntf" required="false" multi="false" array="false" longname="流水信息登记"/>
            <field id="rgflfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否只登记流水标志"/>
            <field id="knlioblcups" type="DpDepoBusiMain.KnlIoblCups" required="false" multi="false" array="false" longname="原交易流水实体"/>
            <field id="prcsfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="交易中流水是否存在"/>
            <field id="dtrsnt" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否D0转T1"/>
            <field id="edflge" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否允许代发"/>
            <field id="edbino" type="BaseType.U_CHAR16" required="false" multi="false" array="false" longname="代发业务编码"/>
            <field id="trantm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="交易时间" ref="BaseDict.Comm.trantm"/>
            <field id="bindfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否有默认绑定卡"/>
            <field id="knaCacd" type="ElectronicAccount.KnaCacd" required="false" multi="false" array="false" longname="绑卡信息"/>
            <field id="merate" type="BaseType.U_CHAR100" required="false" default="''" multi="false" array="false" longname="商户费率"/>
            <field id="remark" type="BaseType.U_CHAR50" required="false" default="''" multi="false" array="false" longname="摘要"/>
            <field id="coupon" type="BaseType.U_TRANAM" required="false" default="0.00" multi="false" array="false" longname="实际活动抵扣"/>
            <field id="servtp" type="JfDpEnumType.E_RETYPE" required="false" multi="false" array="false" longname="支付渠道"/>
            <field id="unionCastInfo" type="DpdebitAcctnos.UnionCastInfo" required="false" multi="false" array="false" longname="银联成本信息"/>
            <field id="edtrsq" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="代发流水"/>
            <field id="edtrdt" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="代发日期"/>
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="checkDeal" id="checkDeal" longname="交易前检查处理"/>
        <block id="isExcueBlock" test="isexit==#dict.BaseEnumType.E_YES___().NO &amp;&amp; rgflfg== #dict.BaseEnumType.E_YES___().NO" longname="是否执行block模块">
            <service mappingToProperty="false" serviceName="IoInAccount.IoInAcdr" id="IoInAcdr" longname="待清算户转出">
                <in_mappings by_interface="true">
                    <mapping src="brchno" dest="input.acbrch" by_interface="true" on_top="true"/>
                    <mapping src="busino" dest="input.busino" by_interface="true" on_top="true"/>
                    <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                    <mapping src="tranam" dest="input.tranam" by_interface="true" on_top="true"/>
                </in_mappings>
                <out_mappings by_interface="true"/>
            </service>
            <method method="unionPayDeal" id="unionPayDeal" longname="银联手续费处理"/>
            <service mappingToProperty="false" serviceName="IoInAccount.IoInAccr" id="IoInAccr" test="reanam!=@java.math.BigDecimal@ZERO" longname="银联手续费扣除">
                <in_mappings by_interface="true">
                    <mapping src="brchno" dest="input.acbrch" by_interface="true" on_top="true"/>
                    <mapping src="busino" dest="input.busino" by_interface="true" on_top="true"/>
                    <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                    <mapping src="reanam" dest="input.tranam" by_interface="true" on_top="true"/>
                </in_mappings>
                <out_mappings by_interface="true"/>
            </service>
            <method method="shareBenefitDeal" id="shareBenefitDeal" test="frodfg==#dict.BaseEnumType.E_YES___().NO" longname="分润处理调用"/>
            <method method="custDeptDeal" id="custDeptDeal" longname="客户入账处理"/>
            <case id="businessPostDp" longname="存入记账处理">
                <when id="businessAcctPost" test="frodfg==#dict.BaseEnumType.E_YES___().NO" longname="商户存款入账处理">
                    <method method="shareBenefitPostDeal" id="shareBenefitPostDeal" test="amanam!=@java.math.BigDecimal@ZERO" longname="分润费用登记会计流水（损益类科目不允许记账只能登记流水）"/>
                    <method method="voucfePostDeal" id="voucfePostDeal" test="coupon!=@java.math.BigDecimal@ZERO &amp;&amp; (dtrsnt==#dict.BaseEnumType.E_YES___().NO || bindfg==#dict.BaseEnumType.E_YES___().YES)" longname="抵扣金额处理（损益类科目不允许记账只能登记流水）"/>
                    <service mappingToProperty="false" serviceName="DpAcctSvcType.addPostAcctDp" id="addPostAcctDp" test="cuanam!=@java.math.BigDecimal@ZERO" longname="存入记账处理">
                        <in_mappings by_interface="true">
                            <mapping src="cardno" dest="cplSaveAcctIn.cardno" by_interface="true" on_top="true"/>
                            <mapping src="crcycd" dest="cplSaveAcctIn.crcycd" by_interface="true" on_top="true"/>
                            <mapping src="remark" dest="cplSaveAcctIn.remark" by_interface="true" on_top="true"/>
                            <mapping src="cuanam" dest="cplSaveAcctIn.tranam" by_interface="true" on_top="true"/>
                            <mapping src="inacct" dest="cplSaveAcctIn.acctno" by_interface="true" on_top="true"/>
                            <mapping src="detlsq" dest="cplSaveAcctIn.detlsq" by_interface="true" on_top="true"/>
                            <mapping src="ischck" dest="cplSaveAcctIn.ischck" by_interface="true" on_top="true"/>
                            <mapping src="smrycd" dest="cplSaveAcctIn.smrycd" by_interface="true" on_top="true"/>
                            <mapping src="custac" dest="cplSaveAcctIn.custac" desc="description" by_interface="true" on_top="true"/>
                        </in_mappings>
                        <out_mappings by_interface="true"/>
                    </service>
                </when>
                <when id="hangAcctPost" test="frodfg==#dict.BaseEnumType.E_YES___().YES" longname="服务费入账处理">
                    <method method="cashPledgePostDeal" id="cashPledgePostDeal" test="cuanam!=@java.math.BigDecimal@ZERO" longname="服务费收入处理"/>
                </when>
            </case>
            <method method="checkBalance" id="afterTranDeal" longname="平衡性检查"/>
        </block>
        <method method="afterTranDeal" id="afterTranDeal" test="isexit==#dict.BaseEnumType.E_YES___().NO" longname="存入交易后处理"/>
        <method method="edBeforeCheckDeal" id="edBeforeCheckDeal" test="edflge==#dict.BaseEnumType.E_YES___().YES" longname="代发交易前检查"/>
        <block id="isExcueEdBlock" test="edflge==#dict.BaseEnumType.E_YES___().YES" longname="是否执行代发模块">
            <service serviceName="DpAcctSvcType.addDrawAcctDp" id="addDrawAcctDp" test="cuanam!=@java.math.BigDecimal@ZERO" longname="存款支取服务" desc="存款支取服务，电子账户默认活期支取">
                <in_mappings by_interface="true">
                    <mapping src="inacct" dest="cplDrawAcctIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                    <mapping src="cuanam" dest="cplDrawAcctIn.tranam" desc="交易金额" by_interface="true" on_top="true"/>
                    <mapping src="crcycd" dest="cplDrawAcctIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                    <mapping src="cardno" dest="cplDrawAcctIn.cardno" desc="电子账号" by_interface="true" on_top="true"/>
                    <mapping src="inacna" dest="cplDrawAcctIn.opacna" desc="客户名称" by_interface="true" on_top="true"/>
                    <mapping src="smrycd" dest="cplDrawAcctIn.smrycd" by_interface="true" on_top="true"/>
                    <mapping src="detlsq" dest="cplDrawAcctIn.detlsq" by_interface="true" on_top="true"/>
                    <mapping src="custac" dest="cplDrawAcctIn.custac" by_interface="true" on_top="true"/>
                </in_mappings>
                <out_mappings by_interface="true"/>
            </service>
            <service serviceName="IoInAccount.IoInAccr" id="IoInAccr" test="cuanam!=@java.math.BigDecimal@ZERO" longname="内部户转入处理">
                <in_mappings by_interface="true">
                    <mapping src="brchno" dest="input.acbrch" by_interface="true" on_top="true"/>
                    <mapping src="edbino" dest="input.busino" by_interface="true" on_top="true"/>
                    <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                    <mapping src="cuanam" dest="input.tranam" by_interface="true" on_top="true"/>
                </in_mappings>
                <out_mappings by_interface="true"/>
            </service>
            <method method="afterDeal" id="afterDeal" longname="代发交易后处理"/>
        </block>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
