<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="revkin" longname="收单交易撤销/冲正" kind="3" package="cn.sunline.edsp.busi.dptran.trans.lzbank" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <error_prof serviceName="KnlIoblService.insertErrorKnlIoblCupsRe" id="insertErrorKnlIoblCupsRe" longname="抛出异常时插入反向交易流水登记信息">
        <in_mappings by_interface="true">
            <mapping src="actiid" dest="actiid" by_interface="true" on_top="true"/>
            <mapping src="addfee" dest="addfee" by_interface="true" on_top="true"/>
            <mapping src="adflag" dest="adflag" by_interface="true" on_top="true"/>
            <mapping src="authno" dest="authno" by_interface="true" on_top="true"/>
            <mapping src="buodno" dest="buodno" by_interface="true" on_top="true"/>
            <mapping src="cardtp" dest="cardtp" by_interface="true" on_top="true"/>
            <mapping src="chantp" dest="chantp" by_interface="true" on_top="true"/>
            <mapping src="citycd" dest="citycd" by_interface="true" on_top="true"/>
            <mapping src="cityif" dest="cityif" by_interface="true" on_top="true"/>
            <mapping src="cletip" dest="cletip" by_interface="true" on_top="true"/>
            <mapping src="coorpa" dest="coorpa" by_interface="true" on_top="true"/>
            <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
            <mapping src="devtyp" dest="devtyp" by_interface="true" on_top="true"/>
            <mapping src="fiel0" dest="fiel0" by_interface="true" on_top="true"/>
            <mapping src="fiel03" dest="fiel03" by_interface="true" on_top="true"/>
            <mapping src="fiel60" dest="fiel60" by_interface="true" on_top="true"/>
            <mapping src="fiel6201" dest="fiel6201" by_interface="true" on_top="true"/>
            <mapping src="fiel6202" dest="fiel6202" by_interface="true" on_top="true"/>
            <mapping src="finsty" dest="finsty" by_interface="true" on_top="true"/>
            <mapping src="flowid" dest="flowid" by_interface="true" on_top="true"/>
            <mapping src="frodfg" dest="frodfg" by_interface="true" on_top="true"/>
            <mapping src="frteno" dest="frteno" by_interface="true" on_top="true"/>
            <mapping src="gprsps" dest="gprsps" by_interface="true" on_top="true"/>
            <mapping src="idenfg" dest="idenfg" by_interface="true" on_top="true"/>
            <mapping src="inmeid" dest="inmeid" by_interface="true" on_top="true"/>
            <mapping src="markfe" dest="markfe" by_interface="true" on_top="true"/>
            <mapping src="mercfg" dest="mercfg" by_interface="true" on_top="true"/>
            <mapping src="messtp" dest="messtp" by_interface="true" on_top="true"/>
            <mapping src="ordeno" dest="ordeno" by_interface="true" on_top="true"/>
            <mapping src="orgaid" dest="orgaid" by_interface="true" on_top="true"/>
            <mapping src="otbkna" dest="otbkna" by_interface="true" on_top="true"/>
            <mapping src="otcafg" dest="otcafg" by_interface="true" on_top="true"/>
            <mapping src="pabkno" dest="pabkno" by_interface="true" on_top="true"/>
            <mapping src="pacaat" dest="pacaat" by_interface="true" on_top="true"/>
            <mapping src="pamena" dest="pamena" by_interface="true" on_top="true"/>
            <mapping src="pameno" dest="pameno" by_interface="true" on_top="true"/>
            <mapping src="pateid" dest="pateid" by_interface="true" on_top="true"/>
            <mapping src="pmanam" dest="pmanam" by_interface="true" on_top="true"/>
            <mapping src="posnum" dest="posnum" by_interface="true" on_top="true"/>
            <mapping src="prepdt" dest="prepdt" by_interface="true" on_top="true"/>
            <mapping src="prepsq" dest="prepsq" by_interface="true" on_top="true"/>
            <mapping src="preptm" dest="preptm" by_interface="true" on_top="true"/>
            <mapping src="prvamd" dest="prvamd" by_interface="true" on_top="true"/>
            <mapping src="psbhno" dest="psbhno" by_interface="true" on_top="true"/>
            <mapping src="psdate" dest="psdate" by_interface="true" on_top="true"/>
            <mapping src="pssnno" dest="pssnno" by_interface="true" on_top="true"/>
            <mapping src="pssque" dest="pssque" by_interface="true" on_top="true"/>
            <mapping src="refeno" dest="refeno" by_interface="true" on_top="true"/>
            <mapping src="reflid" dest="reflid" by_interface="true" on_top="true"/>
            <mapping src="remark" dest="remark" by_interface="true" on_top="true"/>
            <mapping src="revsad" dest="revsad" by_interface="true" on_top="true"/>
            <mapping src="rsmglv" dest="rsmglv" by_interface="true" on_top="true"/>
            <mapping src="seleke" dest="seleke" by_interface="true" on_top="true"/>
            <mapping src="signim" dest="signim" by_interface="true" on_top="true"/>
            <mapping src="spcipy" dest="spcipy" by_interface="true" on_top="true"/>
            <mapping src="svcode" dest="svcode" by_interface="true" on_top="true"/>
            <mapping src="teleno" dest="teleno" by_interface="true" on_top="true"/>
            <mapping src="tleway" dest="tleway" by_interface="true" on_top="true"/>
            <mapping src="tpdu" dest="tpdu" by_interface="true" on_top="true"/>
            <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
            <mapping src="uniseq" dest="uniseq" by_interface="true" on_top="true"/>
            <mapping src="unkpdt" dest="unkpdt" by_interface="true" on_top="true"/>
            <mapping src="untrdt" dest="untrdt" by_interface="true" on_top="true"/>
            <mapping src="untrst" dest="untrst" by_interface="true" on_top="true"/>
            <mapping src="untrtm" dest="untrtm" by_interface="true" on_top="true"/>
            <mapping src="voucfe" dest="voucfe" by_interface="true" on_top="true"/>
            <mapping src="voucid" dest="voucid" by_interface="true" on_top="true"/>
        </in_mappings>
        <out_mappings by_interface="true"/>
    </error_prof>
    <interface package="cn.sunline.edsp.busi.dptran.trans.lzbank.intf">
        <input packMode="true">
            <field id="buodno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="商户订单号"/>
            <field id="ordeno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="支付订单号"/>
            <field id="untrst" type="JfDpEnumType.E_PASTAT" required="false" multi="false" array="false" longname="posp交易状态"/>
            <field id="uniseq" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="银联流水"/>
            <field id="posnum" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="内部终端号码"/>
            <field id="inmeid" type="BaseType.U_CHAR25" required="false" multi="false" array="false" longname="内部商户号"/>
            <field id="prepsq" type="PbBaseType.U_PREPSQ" required="false" multi="false" array="false" longname="posp流水"/>
            <field id="prepdt" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="posp日期"/>
            <field id="preptm" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="posp时间"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额"/>
            <field id="pmanam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="保费金额"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" fixed="'CNY'" default="'CNY'" multi="false" array="false" longname="币种"/>
            <field id="unkpdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="银联清算日期"/>
            <field id="untrtm" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="银联交易时间（发往通道时间）"/>
            <field id="untrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="银联交易日期（发往通道日期）"/>
            <field id="refeno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="参考号"/>
            <field id="teleno" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="手机号（收款）"/>
            <field id="frteno" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="来源手机号（付款）"/>
            <field id="pssnno" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="终端sn序列号"/>
            <field id="pabkno" type="BaseType.U_CHAR64" required="false" multi="false" array="false" longname="支付银行卡账号"/>
            <field id="otbkna" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="支付银行名称"/>
            <field id="cardtp" type="DsEnumType.E_CARDTP" required="false" multi="false" array="false" longname="卡类型"/>
            <field id="pacaat" type="JfDpEnumType.E_PACAAT" required="false" multi="false" array="false" longname="支付银行卡属性"/>
            <field id="svcode" type="JfDpEnumType.E_SERVCD" required="false" multi="false" array="false" longname="服务编码"/>
            <field id="messtp" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="报文类型"/>
            <field id="cletip" type="BaseType.U_CHAR25" required="false" multi="false" array="false" longname="客户端ip地址"/>
            <field id="pameno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="支付商户号"/>
            <field id="pamena" type="BaseType.U_CHAR80" required="false" multi="false" array="false" longname="支付商户号名称"/>
            <field id="pateid" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="支付终端号"/>
            <field id="gprsps" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="经纬度"/>
            <field id="signim" type="BaseType.U_CHAR200" required="false" multi="false" array="false" longname="签购单url"/>
            <field id="orgaid" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="机构号（品牌id）"/>
            <field id="cityif" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="城市"/>
            <field id="citycd" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="城市码"/>
            <field id="devtyp" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="卡头类型"/>
            <field id="prvamd" type="BaseType.U_CHAR05" required="false" multi="false" array="false" longname="预授权信息输入模式"/>
            <field id="psbhno" type="BaseType.U_CHAR06" required="false" multi="false" array="false" longname="pos批次号（大pos上送）"/>
            <field id="psdate" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="pos日期（大pos上送）"/>
            <field id="pssque" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="pos流水（大pos上送）"/>
            <field id="authno" type="BaseType.U_CHAR06" required="false" multi="false" array="false" longname="授权码"/>
            <field id="seleke" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="银联二维码返回"/>
            <field id="idenfg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="认证非认证卡标志"/>
            <field id="actiid" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="活动id"/>
            <field id="addfee" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="附加费率"/>
            <field id="spcipy" type="JfDpEnumType.E_SPCIPY" required="false" multi="false" array="false" longname="特殊优惠"/>
            <field id="mercfg" type="JfDpEnumType.E_MERCFG" required="false" multi="false" array="false" longname="商户类型"/>
            <field id="voucid" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="抵用券id"/>
            <field id="voucfe" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="活动抵扣"/>
            <field id="markfe" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="总抵扣 |基础抵扣 |D0抵扣 |附加抵扣 |"/>
            <field id="finsty" type="JfDpEnumType.E_FINSTY" required="false" multi="false" array="false" longname="结算类型"/>
            <field id="fiel60" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="60域"/>
            <field id="tleway" type="JfDpEnumType.E_TLEWAY" required="false" multi="false" array="false" longname="结算方式"/>
            <field id="otcafg" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="外卡标识"/>
            <field id="tpdu" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="TPDU"/>
            <field id="fiel6201" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="62域上送的基站信息"/>
            <field id="fiel6202" type="BaseType.U_CHAR35" required="false" multi="false" array="false" longname="62域上送的IP信息"/>
            <field id="revsad" type="BaseType.U_CHAR100" required="false" multi="false" array="false" longname="回调地址"/>
            <field id="flowid" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="交易自增id"/>
            <field id="reflid" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="原交易自增id"/>
            <field id="frodfg" type="BaseEnumType.E_YES___" required="false" default="'0'" multi="false" array="false" longname="是否押金"/>
            <field id="adflag" type="BaseType.U_CHAR05" required="false" multi="false" array="false" longname="路由类型"/>
            <field id="coorpa" type="JfDpEnumType.E_COORPA" required="false" multi="false" array="false" longname="收付款标志"/>
            <field id="fiel0" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="0域"/>
            <field id="fiel03" type="BaseType.U_CHAR10" required="false" multi="false" array="false" longname="3域"/>
            <field id="rsmglv" type="BaseType.U_CHAR20" required="false" multi="false" array="false" longname="商户风控等级"/>
            <field id="chantp" type="JfDpEnumType.E_CHANTP" required="false" multi="false" array="false" longname="交易渠道"/>
            <field id="remark" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="摘要"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="exitfg" type="BaseEnumType.E_YES___" required="false" default="'1'" multi="false" array="false" longname="是否存在交易"/>
            <field id="isresu" type="BaseEnumType.E_YES___" required="false" default="'1'" multi="false" array="false" longname="是否退货成功"/>
        </output>
        <property packMode="true"/>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="revokeDeal" id="revokeDeal" longname="收单撤销/冲正交易"/>
    </flow>
</flowtran>
