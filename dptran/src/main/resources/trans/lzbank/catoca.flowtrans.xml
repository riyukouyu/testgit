<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="catoca" longname="电子账户间转账" kind="3" package="cn.sunline.edsp.busi.dptran.trans.lzbank" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <interface package="cn.sunline.edsp.busi.dptran.trans.lzbank.intf">
        <input packMode="true">
            <field id="servsq" type="PbBaseType.U_PREPSQ" required="false" multi="false" array="false" longname="渠道流水"/>
            <field id="servdt" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="渠道日期"/>
            <field id="otacno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转出方子账号"/>
            <field id="otacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转出方户名"/>
            <field id="trantp" type="DpEnumType.E_TRNESS" required="false" default="‘1’" multi="false" array="false" longname="转账时效类型"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="true" multi="false" array="false" longname="币种"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="true" multi="false" array="false" longname="交易金额"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <field id="inacno" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转入方子账号"/>
            <field id="inacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转入方户名"/>
            <field id="chckdt" type="BaseType.U_DATE08" required="true" multi="false" array="false" longname="对账日期"/>
            <field id="keepdt" type="BaseType.U_DATE08" required="true" multi="false" array="false" longname="清算日期"/>
            <field id="servtp" type="MsType.U_CHANNEL" required="false" multi="false" array="false" longname="交易渠道"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="mntrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="主交易流水"/>
            <field id="mntrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="主交易日期"/>
            <field id="mntrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="主交易时间"/>
        </output>
        <property packMode="true">
            <field id="brbrch" type="BaseType.U_BRCHNO" required="false" multi="false" array="false" longname="转入方账号所属机构"/>
            <field id="otcard" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="转出方卡号/账号"/>
            <field id="incard" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="转入方卡号/账号"/>
            <field id="otacct" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="转出放负债账号"/>
            <field id="inacct" type="BaseType.U_ACCTNO" required="true" multi="false" array="false" longname="转入方负债账号"/>
            <field id="otcsac" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转出方电子账号ID"/>
            <field id="incsac" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转入方电子账号ID"/>
            <field id="auacfg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="存取标志"/>
            <field id="smryco" type="BaseType.U_SMRYCD" required="false" multi="false" array="false" longname="转出方摘要码"/>
            <field id="busisq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="业务跟踪编号"/>
            <field id="prcscd" type="BaseType.U_PRCSCD" required="false" multi="false" array="false" longname="处理码" ref="InDict.inac.prcscd"/>
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="beforeTranDeal" id="beforeTranDeal" longname="交易前处理"/>
        <service serviceName="DpAcctSvcType.addDrawAcctDp" id="addDrawAcctDp" longname="电子账户支取记账服务">
            <in_mappings by_interface="true">
                <mapping src="otacct" dest="cplDrawAcctIn.acctno" by_interface="true" on_top="true"/>
                <mapping src="auacfg" dest="cplDrawAcctIn.auacfg" by_interface="true" on_top="true"/>
                <mapping src="otcard" dest="cplDrawAcctIn.cardno" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplDrawAcctIn.crcycd" by_interface="true" on_top="true"/>
                <mapping src="otcsac" dest="cplDrawAcctIn.custac" by_interface="true" on_top="true"/>
                <mapping src="inacna" dest="cplDrawAcctIn.opacna" by_interface="true" on_top="true"/>
                <mapping src="inacct" dest="cplDrawAcctIn.toacct" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="cplDrawAcctIn.tranam" by_interface="true" on_top="true"/>
                <mapping src="smryco" dest="cplDrawAcctIn.smrycd" desc="转出方摘要码" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="DpAcctSvcType.addPostAcctDp" id="addPostAcctDp" longname="电子账户存入记账处理">
            <in_mappings by_interface="true">
                <mapping src="inacct" dest="cplSaveAcctIn.acctno" by_interface="true" on_top="true"/>
                <mapping src="incard" dest="cplSaveAcctIn.cardno" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="cplSaveAcctIn.crcycd" by_interface="true" on_top="true"/>
                <mapping src="incsac" dest="cplSaveAcctIn.custac" by_interface="true" on_top="true"/>
                <mapping src="otacna" dest="cplSaveAcctIn.opacna" by_interface="true" on_top="true"/>
                <mapping src="otacct" dest="cplSaveAcctIn.toacct" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="cplSaveAcctIn.tranam" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <service serviceName="IoSaveIoTransBill.SaveActoac" id="saveActoac" longname="登记电子账户转电子账户登记簿">
            <in_mappings by_interface="true">
                <mapping src="inacno" dest="acctno" by_interface="true" on_top="true"/>
                <mapping src="brbrch" dest="brchno" by_interface="true" on_top="true"/>
                <mapping src="busisq" dest="busisq" by_interface="true" on_top="true"/>
                <mapping src="incard" dest="cardno" by_interface="true" on_top="true"/>
                <mapping src="chckdt" dest="chckdt" by_interface="true" on_top="true"/>
                <mapping src="crcycd" dest="crcycd" by_interface="true" on_top="true"/>
                <mapping src="incsac" dest="cuacno" by_interface="true" on_top="true"/>
                <mapping src="prcscd" dest="prcscd" by_interface="true" on_top="true"/>
                <mapping src="servdt" dest="servdt" by_interface="true" on_top="true"/>
                <mapping src="servsq" dest="servsq" by_interface="true" on_top="true"/>
                <mapping src="servtp" dest="servtp" by_interface="true" on_top="true"/>
                <mapping src="otcard" dest="toacct" by_interface="true" on_top="true"/>
                <mapping src="otacno" dest="toacno" by_interface="true" on_top="true"/>
                <mapping src="brbrch" dest="tobrch" by_interface="true" on_top="true"/>
                <mapping src="otcsac" dest="toscac" by_interface="true" on_top="true"/>
                <mapping src="tranam" dest="tranam" by_interface="true" on_top="true"/>
                <mapping src="chckdt" dest="trandt" by_interface="true" on_top="true"/>
                <mapping src="trantp" dest="trantp" by_interface="true" on_top="true"/>
            </in_mappings>
            <out_mappings by_interface="true"/>
        </service>
        <method method="afterTranDeal" id="afterTranDeal" longname="交易后处理"/>
    </flow>
</flowtran>
