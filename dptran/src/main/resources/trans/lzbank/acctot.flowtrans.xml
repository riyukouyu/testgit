<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<flowtran xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="acctot" longname="即富出账(提现)" kind="3" package="cn.sunline.ltts.busi.dptran.trans.lzbank" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <interface package="cn.sunline.ltts.busi.dptran.trans.lzbank.intf">
        <input packMode="true">
            <field id="prepsq" type="PbBaseType.U_PREPSQ" required="false" multi="false" array="false" longname="前置流水"/>
            <field id="prepdt" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="前置日期"/>
            <field id="unkpdt" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="银联清算日期"/>
            <field id="uniseq" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="银联流水"/>
            <field id="refeno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="参考号"/>
            <field id="ordeno" type="BaseType.U_CHAR50" required="false" multi="false" array="false" longname="订单号"/>
            <field id="acctid" type="BaseType.U_CHAR30" required="false" multi="false" array="false" longname="服务商id/商户id"/>
            <field id="messtp" type="BaseType.U_CHAR04" required="false" multi="false" array="false" longname="报文类型"/>
            <field id="prepty" type="BaseEnumType.E_PREPTY" required="false" multi="false" array="false" longname="银联交易类型"/>
            <field id="crcycd" type="BaseType.U_CRCYCD" required="false" multi="false" array="false" longname="货币代号" ref="DpDict.Acct.crcycd"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额"/>
            <field id="servtp" type="JfDpEnumType.E_RETYPE" required="false" multi="false" array="false" longname="支付渠道"/>
			<field id="sabkna" longname="结算卡银行名称" type="BaseType.U_CHAR50"  required="false" multi="false" array="false"/>
            <field id="sacdno" longname="结算卡账号" type="BaseType.U_CHAR50"  required="false" multi="false" array="false"/>
            <field id="sacdna" longname="结算卡账号名称" type="BaseType.U_CHAR50"  required="false" multi="false" array="false"/>
            <field id="bankno" longname="联行号" type="BaseType.U_CHAR50"  required="false" multi="false" array="false"/>
            <field id="bindfg" type="BaseEnumType.E_YES___" required="false" multi="false" array="false" longname="是否绑定关系"/>
            <field id="finsty" type="JfDpEnumType.E_FINSTY" required="false" multi="false" array="false" longname="结算方式"/>
			<field id="retrsq" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="原交易流水"/>
            <field id="retrdt" type="BaseType.U_CHAR08" required="false" multi="false" array="false" longname="原交易日期"/>
            <field id="remark" longname="备注" type="BaseType.U_SHORDS" ref="DpDict.Acct.remark" required="false" multi="false" array="false"/>
        </input>
        <output asParm="true" packMode="true">
            <field id="mntrsq" type="BaseType.U_SEQUNO" required="false" multi="false" array="false" longname="主交易流水"/>
            <field id="mntrdt" type="BaseType.U_DATE08" required="false" multi="false" array="false" longname="主交易日期"/>
            <field id="mntrtm" type="BaseType.U_TRTMCH" required="false" multi="false" array="false" longname="主交易时间"/>
        </output>
        <property packMode="true">
            <field id="custna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="客户名称" ref="DpDict.Acct.custna"/>
            <field id="custno" type="BaseType.U_CUSTNO" required="false" multi="false" array="false" longname="客户号" ref="DpDict.Acct.custno"/>
            <field id="tranam" type="BaseType.U_TRANAM" required="false" multi="false" array="false" longname="交易金额"/>
            <field id="busino" type="BaseType.U_CHAR16" required="false" default="'A_112202'" multi="false" array="false" longname="待清算业务编码"/>
            <field id="brchno" type="BaseType.U_BRCHNO" required="false" default="'70100'" multi="false" array="false" longname="交易机构"/>
            <field id="smrycd" type="BaseType.U_SMRYCD" required="false" default="'QX'" multi="false" array="false" longname="摘要代码" ref="BaseDict.Comm.smrycd"/>
            <field id="detlsq" type="BaseType.U_LONGIN" required="false" default="1" multi="false" array="false" longname="明细序号"/>
            <field id="isexit" type="BaseEnumType.E_YES___" required="false" default="'1'" multi="false" array="false" longname="是否存在交易"/>
            <field id="custac" type="BaseType.U_CUACNO" required="false" multi="false" array="false" longname="电子账号"/>
            <field id="cardno" type="BaseType.U_CHAR40" required="false" multi="false" array="false" longname="交易卡号"/>
			<field id="otacct" type="BaseType.U_ACCTNO" required="false" multi="false" array="false" longname="转出账号"/>
            <field id="otacna" type="BaseType.U_ACCTNA" required="false" multi="false" array="false" longname="转出户名"/>        
        </property>
        <printer packMode="true"/>
    </interface>
    <flow>
        <method method="beforeCheckDeal" id="beforeCheckDeal" longname="交易前检查"/>
        <block id="isExcueBlock" test="isexit==#dict.BaseEnumType.E_YES___().YES" longname="是否执行block模块">
            <service serviceName="DpAcctSvcType.addDrawAcctDp" id="addDrawAcctDp" test="tranam!=@java.math.BigDecimal@ZERO" longname="存款支取服务" desc="存款支取服务，电子账户默认活期支取">
                <in_mappings by_interface="true">
                    <mapping src="otacct" dest="cplDrawAcctIn.acctno" desc="负债账号" by_interface="true" on_top="true"/>
                    <mapping src="tranam" dest="cplDrawAcctIn.tranam" desc="交易金额" by_interface="true" on_top="true"/>
                    <mapping src="crcycd" dest="cplDrawAcctIn.crcycd" desc="币种" by_interface="true" on_top="true"/>
                    <mapping src="cardno" dest="cplDrawAcctIn.cardno" desc="电子账号" by_interface="true" on_top="true"/>
                    <mapping src="otacna" dest="cplDrawAcctIn.opacna" desc="客户名称" by_interface="true" on_top="true"/>
                    <mapping src="smrycd" dest="cplDrawAcctIn.smrycd" desc="description" by_interface="true" on_top="true"/>
                    <mapping src="detlsq" dest="cplDrawAcctIn.detlsq" desc="description" by_interface="true" on_top="true"/>
                    <mapping src="custac" dest="cplDrawAcctIn.custac" desc="description" by_interface="true" on_top="true"/>
                </in_mappings>
                <out_mappings by_interface="true"/>
            </service>
            <service serviceName="IoInAccount.IoInAccr" id="IoInAccr" test="tranam!=@java.math.BigDecimal@ZERO" longname="内部户转入处理">
                <in_mappings by_interface="true">
                    <mapping src="brchno" dest="input.acbrch" by_interface="true" on_top="true"/>
                    <mapping src="busino" dest="input.busino" by_interface="true" on_top="true"/>
                    <mapping src="crcycd" dest="input.crcycd" by_interface="true" on_top="true"/>
                    <mapping src="tranam" dest="input.tranam" by_interface="true" on_top="true"/>
                </in_mappings>
                <out_mappings by_interface="true"/>
            </service>
            <method method="afterDeal" id="afterDeal" longname="交易后处理"/>
        </block>
    </flow>
    <outMapping/>
    <propertyToPrinterMapping/>
    <outToPrinterMapping/>
</flowtran>
