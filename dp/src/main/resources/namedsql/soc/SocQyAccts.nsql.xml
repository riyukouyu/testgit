<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="SocQyAccts" longname="赊销模块使用查询账户相关信息" package="cn.sunline.edsp.busi.dp.namedsql.soc" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <select cache="none" method="selectAll" type="sql" id="selAcctnoInfos" longname="根据品牌和主体查询子账户信息">
        <sql><![CDATA[
        	select 
        		kna_sbad.custac,kna_sbad.acctno,kna_acct.onlnbl,kna_acct.crcycd
        	from 
        		kna_sbad join kna_acct on kna_sbad.acctno = kna_acct.acctno
        	where
        		 kna_acct.acctst <> '2'
        	 and kna_sbad.mactid = #mactid#
        	 and kna_sbad.sbrand = #psedid#
        ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="mactid" jdbcType="VARCHAR" javaType="string" mode="in" longname="主体ID" parameterType="condition"/>
            <parameter property="psedid" jdbcType="VARCHAR" javaType="string" mode="in" longname="品牌ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpdebitAcctnos.BatchNoParmentAccts"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selCustnoInfos" longname="根据主体名称模糊查询电子账户信息">
        <sql><![CDATA[
        	select 
        		custac,custno,custna,opendt
        	from 
        		kna_cust
        	where
        		custna = #custna#
        ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custna" jdbcType="VARCHAR" javaType="string" mode="in" longname="主体名称" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpdebitAcctnos.CustacList"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAcctnosByCustno" longname="根据电子账户查询子账户信息">
        <sql><![CDATA[
        select 
            kna_cust.custno
            ,kna_cust.custna
            ,kna_cust.custac
            ,kna_sbad.SBRAND as psedid
            ,kna_sbad.BRADNA as Psedna 
            ,kna_sbad.acctno
            ,kna_acct.acctna
            ,kna_acct.onlnbl
          from   kna_cust 
          join kna_sbad on kna_sbad.custac = kna_cust.custac 
          join kna_acct on kna_acct.acctno = kna_sbad.acctno
          where  kna_cust.custac = #custac#
        ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="string" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpdebitAcctnos.AcctnoList"/>
    </select>
</sqls>
