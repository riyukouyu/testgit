<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="RpBatchTrans" longname="红包交易SQL" package="cn.sunline.ltts.busi.dp.namedsql.redpck" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <select cache="none" method="selectAll" type="sql" id="selDataidByFilesq" longname="查询文件批次作业号">
        <sql><![CDATA[
    	select
    	    	distinct dataid 
    	from
    	    	knb_rptr_bach 
    	where
    	    	filesq=#filesq# and sourdt=#sourdt#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	distinct dataid 
    	from
    	    	knb_rptr_bach 
    	where
    	    	filesq=#filesq# and sourdt=#sourdt#
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	distinct dataid 
    	from
    	    	knb_rptr_bach 
    	where
    	    	filesq=#filesq# and sourdt=#sourdt#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="批量交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.lang.String"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selBatchDataByFilesq" longname="查询文件批量数据集">
        <sql><![CDATA[
    	select
    	    	* 
    	from
    	    	knb_rptr_bach 
    	where
    	    	filesq=#filesq# and dataid=#dataid# 
    	    	and sourdt=#sourdt# and transt <> '9'
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	* 
    	from
    	    	knb_rptr_bach 
    	where
    	    	filesq=#filesq# and dataid=#dataid# 
    	    	and sourdt=#sourdt# and transt <> '9'
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	* 
    	from
    	    	knb_rptr_bach 
    	where
    	    	filesq=#filesq# and dataid=#dataid# 
    	    	and sourdt=#sourdt# and transt <> '9'
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="批量交易日期" parameterType="condition"/>
            <parameter property="dataid" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="作业ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbRptrBach"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selBatchWriteData" longname="查询反盘文件数据集">
        <sql><![CDATA[select * from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt# ]]></sql>
        <sql type="oracle"><![CDATA[select * from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt# ]]></sql>
        <sql type="mysql"><![CDATA[select * from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="批量交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbRptrBach"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selCountByFilesq" longname="统计总条数">
        <sql><![CDATA[select count(1) from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt#]]></sql>
        <sql type="oracle"><![CDATA[select count(1) from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selGroupCountByFilesq" longname="按交易状态统计记录数">
        <sql><![CDATA[select transt,count(1) record from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt# group by transt]]></sql>
        <sql type="oracle"><![CDATA[select transt,count(1) record from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt# group by transt]]></sql>
        <sql type="mysql"><![CDATA[select transt,count(1) record from knb_rptr_bach where filesq=#filesq# and sourdt=#sourdt# group by transt]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.util.Map">
            <result property="transt" javaType="BaseEnumType.E_TRANST" column="transt"/>
            <result property="record" javaType="BaseType.U_LONGIN" column="record"/>
        </resultMap>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selWriteDataCheckDetail" longname="查询红包对账数据">
        <sql type="db2"><![CDATA[select a.* from knb_rptr_detl a where a.chckdt = #sourdt#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_rptr_detl a where a.chckdt = #sourdt#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_rptr_detl a where a.chckdt = #sourdt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="对账日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbRptrDetl"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selGroupCountDetailBySourdt" longname="统计笔数">
        <sql type="db2"><![CDATA[select count(1)  from knb_rptr_detl where sourdt=#sourdt# ]]></sql>
        <sql type="oracle"><![CDATA[select count(1)  from knb_rptr_detl where sourdt=#sourdt# ]]></sql>
        <sql type="mysql"><![CDATA[select count(1)  from knb_rptr_detl where sourdt=#sourdt# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="sourdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="对账日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selRppathInfo" longname="查询文件路径">
        <sql type="db2"><![CDATA[select a.pmval1,a.pmval2 from knp_para a where a.parmcd = #parmcd# and a.pmkey1 = #pmkey1# and pmkey2 = #pmkey2#
and pmkey3 = #pmkey3#]]></sql>
        <sql type="oracle"><![CDATA[select a.pmval1,a.pmval2 from knp_para a where a.parmcd = #parmcd# and a.pmkey1 = #pmkey1# and pmkey2 = #pmkey2#
and pmkey3 = #pmkey3#]]></sql>
        <sql type="mysql"><![CDATA[select a.pmval1,a.pmval2 from knp_para a where a.parmcd = #parmcd# and a.pmkey1 = #pmkey1# and pmkey2 = #pmkey2#
and pmkey3 = #pmkey3#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="parmcd" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
            <parameter property="pmkey1" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
            <parameter property="pmkey2" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
            <parameter property="pmkey3" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.util.Map">
            <result property="pmval1" javaType="BaseType.U_CHAR32" column="pmval1" longname="上传路径"/>
            <result property="pmval2" javaType="BaseType.U_CHAR32" column="pmval2" longname="下载路径"/>
        </resultMap>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAccInfoByFilesq" longname="查询可入账账户文件数据集">
        <sql type="db2"><![CDATA[select a.* from knb_rptr_cbai a where filesq=#filesq# and trandt=#trandt#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_rptr_cbai a where filesq=#filesq# and trandt=#trandt#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_rptr_cbai a where filesq=#filesq# and trandt=#trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbRptrCbai"/>
    </select>
    <delete method="delete" id="delKnbRptrCbai" longname="删除可入账账户信息表">
        <sql type="db2"><![CDATA[delete from knb_rptr_cbai]]></sql>
        <sql type="oracle"><![CDATA[delete from knb_rptr_cbai]]></sql>
        <sql type="mysql"><![CDATA[delete from knb_rptr_cbai]]></sql>
        <parameterMap class="java.util.Map"/>
    </delete>
    <select cache="none" method="selectOne" type="sql" id="selCountDrawByFileSq" longname="统计总记录数">
        <sql><![CDATA[select count(1) from knb_qery_bach where filesq=#filesq#]]></sql>
        <sql type="oracle"><![CDATA[select count(1) from knb_qery_bach where filesq=#filesq#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) from knb_qery_bach where filesq=#filesq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
</sqls>
