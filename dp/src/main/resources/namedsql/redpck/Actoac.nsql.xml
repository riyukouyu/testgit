<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Actoac" longname="电子账户转账替代odb查询" package="cn.sunline.ltts.busi.dp.namedsql.redpck" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <select cache="none" method="selectOne" type="sql" id="selKnlCary" longname="查询电子账户转电子账户登记簿">
        <sql><![CDATA[select * from knl_cary where servsq=#transq# and servdt=#trandt#]]></sql>
        <sql type="oracle"><![CDATA[select * from knl_cary where servsq=#transq# and servdt=#trandt#]]></sql>
        <sql type="mysql"><![CDATA[select * from knl_cary where servsq=#transq# and servdt=#trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlCary"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaCacd" longname="查询外部卡与客户账户对照表">
        <sql><![CDATA[select * from kna_cacd where custac=#custac# and cardno = #cardno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_cacd where custac=#custac# and cardno = #cardno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_cacd where custac=#custac# and cardno = #cardno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" parameterType="condition"/>
            <parameter property="cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCacd"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaCust" longname="查询电子账户表">
        <sql><![CDATA[select * from kna_cust where custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_cust where custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_cust where custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCust"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcdc" longname="查询卡客户账户对照表">
        <sql><![CDATA[select * from kna_acdc where cardno = #cardno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acdc where cardno = #cardno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acdc where cardno = #cardno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaAcdc"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcdcByCustac" longname="查询卡客户账户对照表">
        <sql><![CDATA[select * from kna_acdc where custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acdc where custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acdc where custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaAcdc"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcctAc" longname="查询负债账户信息表">
        <sql><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst <> #acctst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst <> #acctst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst <> #acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcctAcWithLock" longname="查询负债账户信息表">
        <sql><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst <> #acctst# for update ]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst <> #acctst# for update ]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst <> #acctst# for update ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnlIoblDetl" longname="查询出入金登记簿记录是否存在">
        <sql><![CDATA[select * from knl_iobl where servsq=#servsq# and servdt=#servdt# ]]></sql>
        <sql type="mysql"><![CDATA[select * from knl_iobl where servsq=#servsq# and servdt=#servdt# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="servsq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="流水" parameterType="condition"/>
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlIobl"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnlIoblCups" longname="银联转入登记簿查询">
        <sql><![CDATA[select * from knl_iobl_cups where uniseq = #uniseq#]]></sql>
        <sql type="oracle"><![CDATA[select * from knl_iobl_cups where uniseq = #uniseq#]]></sql>
        <sql type="mysql"><![CDATA[select * from knl_iobl_cups where uniseq = #uniseq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="uniseq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR50" mode="in" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlIoblCups"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcctWithLock" longname="查询活期负债账户表">
        <sql><![CDATA[select * from kna_acct where acctno=#acctno# for update]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where acctno=#acctno# for update]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where acctno=#acctno# for update]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaFxac" longname="查询定期负债账户表">
        <sql><![CDATA[select * from kna_fxac where acctno=#acctno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_fxac where acctno=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac where acctno=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <update method="update" id="updKnaAccs" longname="修改客户账号与负债账号对照表">
        <sql><![CDATA[update kna_accs set acctst=#acctst#,tmstmp=#tmstmp# where  acctno = #acctno#]]></sql>
        <sql type="oracle"><![CDATA[update kna_accs set acctst=#acctst#,tmstmp=#tmstmp# where  acctno = #acctno#]]></sql>
        <sql type="mysql"><![CDATA[update kna_accs set acctst=#acctst#,tmstmp=#tmstmp# where  acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" parameterType="condition"/>
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
            <parameter property="tmstmp" ref="ApDict.Aplt.tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <update method="update" id="updKnaCustStat" longname="更新电子账户信息表状态">
        <sql><![CDATA[update kna_cust set acctst=#acctst#, closdt=#closdt#,clossv=#servtp#,cuacst=#cuacst#, clossq=#clossq#,tmstmp=#tmstmp# where custac=#custac#]]></sql>
        <sql type="oracle"><![CDATA[update kna_cust set acctst=#acctst#, closdt=#closdt#,clossv=#servtp#,cuacst=#cuacst#, clossq=#clossq#,tmstmp=#tmstmp# where custac=#custac#]]></sql>
        <sql type="mysql"><![CDATA[update kna_cust set acctst=#acctst#, closdt=#closdt#,clossv=#servtp#,cuacst=#cuacst#, clossq=#clossq#,tmstmp=#tmstmp# where custac=#custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACCTST" mode="in" parameterType="condition"/>
            <parameter property="cuacst" ref="CaDict.Eacct.cuacst" jdbcType="VARCHAR" javaType="CaEnumType.E_CUACST" mode="in" longname="客户账户状态" parameterType="condition"/>
            <parameter property="closdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" parameterType="condition"/>
            <parameter property="clossq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" parameterType="condition"/>
            <parameter property="tmstmp" ref="ApDict.Aplt.tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
            <parameter property="servtp" jdbcType="VARCHAR" javaType="MsType.U_CHANNEL" mode="in" parameterType="condition"/>
        </parameterMap>
    </update>
    <update method="update" id="updKnaAcctStat" longname="修改结算户状态">
        <sql><![CDATA[update kna_acct set acctst=#acctst#,clossq=#clossq#, closdt=#closdt#,tmstmp=#tmstmp# where acctno = #acctno#]]></sql>
        <sql type="oracle"><![CDATA[update kna_acct set acctst=#acctst#,clossq=#clossq#, closdt=#closdt#,tmstmp=#tmstmp# where acctno = #acctno#]]></sql>
        <sql type="mysql"><![CDATA[update kna_acct set acctst=#acctst#,clossq=#clossq#, closdt=#closdt#,tmstmp=#tmstmp# where acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" parameterType="condition"/>
            <parameter property="closdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" parameterType="condition"/>
            <parameter property="clossq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" parameterType="condition"/>
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" parameterType="condition"/>
            <parameter property="tmstmp" ref="ApDict.Aplt.tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <select cache="none" method="selectAll" type="sql" id="selAllKnaAcctWithLock" longname="加锁查询活期负债账户表记录">
        <sql><![CDATA[select * from kna_acct where custac=#custac# and crcycd = #crcycd# and prodcd=#prodcd# for update]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where custac=#custac# and crcycd = #crcycd# and prodcd=#prodcd# for update]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where custac=#custac# and crcycd = #crcycd# and prodcd=#prodcd# for update]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品代码" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKnaFxacWithLock" longname="加锁查询定期负债账户表记录">
        <sql><![CDATA[select * from kna_fxac where crcycd = #crcycd# and prodcd=#prodcd# and custac=#custac# for update ]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_fxac where crcycd = #crcycd# and prodcd=#prodcd# and custac=#custac# for update ]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac where crcycd = #crcycd# and prodcd=#prodcd# and custac=#custac# for update ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品代码" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKnaAcctByClose" longname="查询未关户的活期负债账户表记录">
        <sql><![CDATA[select * from kna_acct where custac=#custac# and crcycd = #crcycd# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where custac=#custac# and crcycd = #crcycd# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where custac=#custac# and crcycd = #crcycd# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品代码" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号ID" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKnaFxacByClose" longname="查询未关户的定期负债账户表记录">
        <sql><![CDATA[select * from kna_fxac where crcycd = #crcycd# and prodcd=#prodcd# and custac=#custac# and acctst <> #acctst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_fxac where crcycd = #crcycd# and prodcd=#prodcd# and custac=#custac# and acctst <> #acctst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac where crcycd = #crcycd# and prodcd=#prodcd# and custac=#custac# and acctst <> #acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品代码" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号ID" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKnaAcctByCustnoClose" longname="根据客户号查询未关户的活期负债账户表记录">
        <sql><![CDATA[select * from kna_acct where custno = #custno# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where custno = #custno# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where custno = #custno# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品代码" parameterType="condition"/>
            <parameter property="custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKnaFxacByCustnoClose" longname="根据客户号查询未关户的定期负债账户表记录">
        <sql><![CDATA[select * from kna_fxac where custno = #custno# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_fxac where custno = #custno# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac where custno = #custno# and prodcd=#prodcd# and acctst <> #acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品代码" parameterType="condition"/>
            <parameter property="custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcctAddtByAcctno" longname="根据账号查询负债信息附加表">
        <sql type="db2"><![CDATA[select a.* from kna_acct_addt a where a.acctno=#acctno#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from kna_acct_addt a where a.acctno=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from kna_acct_addt a where a.acctno=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcctAddt"/>
    </select>
    <update method="update" id="updKnbSlepStat" longname="修改休眠登记簿状态">
        <sql><![CDATA[update knb_slep set 
spprst=#spprst#, 
spprdt = #spprdt#, 
spprtm = #spprtm#, 
slepst = #slepst#,
tmstmp=#tmstmp#
where custac = #custac# 
and slepst=#slepst2#]]></sql>
        <sql type="oracle"><![CDATA[update knb_slep set 
spprst=#spprst#, 
spprdt = #spprdt#, 
spprtm = #spprtm#, 
slepst = #slepst#,
tmstmp=#tmstmp#
where custac = #custac# 
and slepst=#slepst2#]]></sql>
        <sql type="mysql"><![CDATA[update knb_slep set 
spprst=#spprst#, 
spprdt = #spprdt#, 
spprtm = #spprtm#, 
slepst = #slepst#,
tmstmp=#tmstmp#
where custac = #custac# 
and slepst=#slepst2#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="spprst" jdbcType="VARCHAR" javaType="CaEnumType.E_SPPRST" mode="in" longname="处理结果" parameterType="condition"/>
            <parameter property="spprdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="处理日期" parameterType="condition"/>
            <parameter property="spprtm" jdbcType="VARCHAR" javaType="BaseType.U_TIME06" mode="in" longname="处理时间" parameterType="condition"/>
            <parameter property="slepst" jdbcType="VARCHAR" javaType="CaEnumType.E_SLEPST" mode="in" longname="休眠状态" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="slepst2" jdbcType="VARCHAR" javaType="CaEnumType.E_SLEPST" mode="in" longname="原休眠状态" parameterType="condition"/>
            <parameter property="tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <update method="update" id="updKnaCustToNormal" longname="修改电子账户信息表状态为正常">
        <sql><![CDATA[update kna_cust set acctst=#acctst#,tmstmp=#tmstmp# where custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[update kna_cust set acctst=#acctst#,tmstmp=#tmstmp# where custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[update kna_cust set acctst=#acctst#,tmstmp=#tmstmp# where custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACCTST" mode="in" longname="账户状态" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号ID" parameterType="condition"/>
            <parameter property="tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <update method="update" id="updKnaAcctToNormal" longname="修改负债账户信息表状态为正常">
        <sql><![CDATA[update kna_acct set acctst=#acctst# , tmstmp = #tmstmp# where custac = #custac# and acctst = #acctst2#]]></sql>
        <sql type="oracle"><![CDATA[update kna_acct set acctst=#acctst# , tmstmp = #tmstmp# where custac = #custac# and acctst = #acctst2#]]></sql>
        <sql type="mysql"><![CDATA[update kna_acct set acctst=#acctst# , tmstmp = #tmstmp# where custac = #custac# and acctst = #acctst2#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="新状态" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账户" parameterType="condition"/>
            <parameter property="acctst2" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="原状态" parameterType="condition"/>
            <parameter property="tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcct" longname="查询活期负债账户表">
        <sql><![CDATA[select * from kna_acct where acctno=#acctno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where acctno=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where acctno=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selKnaSignDetl" longname="查询转存签约明细表">
        <sql type="db2"><![CDATA[select * from kna_sign_detl where acctno = #acctno# and signtp = #signtp# and signst = #signst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_sign_detl where acctno = #acctno# and signtp = #signtp# and signst = #signst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_sign_detl where acctno = #acctno# and signtp = #signtp# and signst = #signst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="活期账户号" parameterType="condition"/>
            <parameter property="signtp" jdbcType="VARCHAR" javaType="CaEnumType.E_SIGNTP" mode="in" longname="签约类型" parameterType="condition"/>
            <parameter property="signst" jdbcType="VARCHAR" javaType="CaEnumType.E_SIGNST" mode="in" longname="签约状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaSignDetl"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaCuad" longname="查询账户附加信息">
        <sql><![CDATA[select  custac, facesg ,custid from kna_cuad where custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select  custac, facesg ,custid from kna_cuad where custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select  custac, facesg ,custid from kna_cuad where custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账户ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpCapital.ChkCuad"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selknaAcctclose" longname="查询所有负债子账户">
        <sql type="db2"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaCustByCustacCorp" longname="通过机构号和电子账号查询账户信息">
        <sql><![CDATA[select * from kna_cust where custac=#custac# and corpno=#corpno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_cust where custac=#custac# and corpno=#corpno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_cust where custac=#custac# and corpno=#corpno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCust"/>
    </select>
    <update method="update" id="updKnaFxacByAcctno" longname="根据负债账号更新账户信息">
        <sql><![CDATA[update kna_fxac set corpno=#corpno#,acctna=#acctna#,custac = #custac#,custno=#custno#  where acctno = #acctno#]]></sql>
        <sql type="oracle"><![CDATA[update kna_fxac set corpno=#corpno#,acctna=#acctna#,custac = #custac#,custno=#custno#  where acctno = #acctno#]]></sql>
        <sql type="mysql"><![CDATA[update kna_fxac set corpno=#corpno#,acctna=#acctna#,custac = #custac#,custno=#custno#  where acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="custno" ref="DpDict.Acct.custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
            <parameter property="acctna" ref="DpDict.Acct.acctna" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNA" mode="in" longname="账户名称" parameterType="condition"/>
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
    </update>
    <update method="update" id="updKnaAccsByAcct" longname="根据账号更新负债电子账户对照信息">
        <sql><![CDATA[update kna_accs set corpno=#corpno#,subsac=#subsac#,custac = #custac#  where acctno = #acctno#]]></sql>
        <sql type="oracle"><![CDATA[update kna_accs set corpno=#corpno#,subsac=#subsac#,custac = #custac#  where acctno = #acctno#]]></sql>
        <sql type="mysql"><![CDATA[update kna_accs set corpno=#corpno#,subsac=#subsac#,custac = #custac#  where acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="subsac" ref="PbDict.Dcmt.subsac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR20" mode="in" longname="会员子账号" parameterType="condition"/>
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
    </update>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcctByAcst" longname="查询客户下状态正常的结算账户">
        <sql><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst = #acctst#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst = #acctst#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where  acsetp = #acsetp# and  custac = #custac# and acctst = #acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acctst" ref="DpDict.Acct.acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnlIoblCupsDetl" longname="查询银联cups转入登记簿是否存在">
        <sql><![CDATA[select * from knl_iobl_cups where mntrsq= #mntrsq# and trandt= #trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="mntrsq" jdbcType="VARCHAR" javaType="PbBaseType.U_TRNSEQ" mode="in" longname="主交易流水" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlIoblCups"/>
    </select>
</sqls>
