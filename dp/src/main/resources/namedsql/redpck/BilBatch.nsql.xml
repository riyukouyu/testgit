<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls id="BilBatch" longname="信用卡还款SQL" package="cn.sunline.ltts.busi.dp.namedsql.redpck" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <select cache="none" method="selectOne" type="sql" id="selCountByFilesq" longname="统计总条数">
        <sql><![CDATA[select count(1) from knb_crcd_bach where filesq=#filesq# and trandt=#trandt#]]></sql>
        <sql type="oracle"><![CDATA[select count(1) from knb_crcd_bach where filesq=#filesq# and trandt=#trandt#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) from knb_crcd_bach where filesq=#filesq# and trandt=#trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selGroupCountByFilesq" longname="按交易状态统计记录数">
        <sql><![CDATA[select transt,count(1) record from knb_crcd_bach where filesq=#filesq# and trandt=#trandt# group by transt]]></sql>
        <sql type="oracle"><![CDATA[select transt,count(1) record from knb_crcd_bach where filesq=#filesq# and trandt=#trandt# group by transt]]></sql>
        <sql type="mysql"><![CDATA[select transt,count(1) record from knb_crcd_bach where filesq=#filesq# and trandt=#trandt# group by transt]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.util.Map">
            <result property="transt" javaType="BaseEnumType.E_TRANST" column="transt"/>
            <result property="record" javaType="BaseType.U_LONGIN" column="record"/>
        </resultMap>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selBatchWriteData" longname="查询反盘文件数据集">
        <sql><![CDATA[select * from knb_crcd_bach where filesq=#filesq# and trandt=#trandt#]]></sql>
        <sql type="oracle"><![CDATA[select * from knb_crcd_bach where filesq=#filesq# and trandt=#trandt#]]></sql>
        <sql type="mysql"><![CDATA[select * from knb_crcd_bach where filesq=#filesq# and trandt=#trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbCrcdBach"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selDataidByFilesq" longname="查询文件批次作业号">
        <sql><![CDATA[select distinct dataid from knb_crcd_bach where filesq=#filesq#  and trandt=#trandt#]]></sql>
        <sql type="oracle"><![CDATA[select distinct dataid from knb_crcd_bach where filesq=#filesq#  and trandt=#trandt#]]></sql>
        <sql type="mysql"><![CDATA[select distinct dataid from knb_crcd_bach where filesq=#filesq#  and trandt=#trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.lang.String"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selBatchDataByFilesq" longname="查询文件批量数据集">
        <sql type="db2"><![CDATA[select * from knb_crcd_bach where filesq=#filesq# and dataid=#dataid# and trandt=#trandt# and dealst is null
union
select * from knb_crcd_bach where filesq=#filesq# and dataid=#dataid# and trandt=#trandt# and dealst <> '00']]></sql>
        <sql type="oracle"><![CDATA[select * from knb_crcd_bach where filesq=#filesq# and dataid=#dataid# and trandt=#trandt# and dealst is null
union
select * from knb_crcd_bach where filesq=#filesq# and dataid=#dataid# and trandt=#trandt# and dealst <> '00']]></sql>
        <sql type="mysql"><![CDATA[select * from knb_crcd_bach where filesq=#filesq# and dataid=#dataid# and trandt=#trandt# and dealst is null
union
select * from knb_crcd_bach where filesq=#filesq# and dataid=#dataid# and trandt=#trandt# and dealst <> '00']]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="dataid" jdbcType="VARCHAR" javaType="BaseType.U_CHAR06" mode="in" longname="作业ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbCrcdBach"/>
    </select>
</sqls>
