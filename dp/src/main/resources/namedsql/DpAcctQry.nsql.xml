<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="DpAcctQry" longname="存款账户相关查询" package="cn.sunline.ltts.busi.dp.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <description><![CDATA[存款账户相关查询]]></description>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcctCountByPordcd" longname="根据产品编号查询活期账户笔数">
        <sql type="oracle"><![CDATA[select count(1) as cnt from kna_acct a where a.prodcd = #prodcd#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) as cnt from kna_acct a where a.prodcd = #prodcd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" ref="DpDict.Prod.prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.lang.Integer"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaFxacCountByPordcd" longname="根据产品遍号查询定期账户笔数">
        <sql type="oracle"><![CDATA[select count(1) as cnt from kna_fxac a where a.prodcd = #prodcd#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) as cnt from kna_fxac a where a.prodcd = #prodcd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" ref="DpDict.Prod.prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.lang.Integer"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaAcctByPordcdAndCustno" longname="根据产品编号查询客户的活期账户信息">
        <sql type="oracle"><![CDATA[select * from kna_acct a where a.prodcd = #prodcd# and custno = #custno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct a where a.prodcd = #prodcd# and custno = #custno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" ref="DpDict.Prod.prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号" parameterType="condition"/>
            <parameter property="custno" ref="DpDict.Acct.custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaFxacByProdcdAndCustno" longname="根据产品编号查询客户的定期账户信息">
        <sql type="oracle"><![CDATA[select * from kna_fxac a where a.prodcd = #prodcd# and custno = #custno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac a where a.prodcd = #prodcd# and custno = #custno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" ref="DpDict.Prod.prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号" parameterType="condition"/>
            <parameter property="custno" ref="DpDict.Acct.custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaFxacByCustacAndProdcd" longname="根据电子账户、产品编号、货币代号查询定存账户信息">
        <sql type="oracle"><![CDATA[select * from kna_fxac a where custac=#custac# and  prodcd=#prodcd# and crcycd=#crcycd#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac a where custac=#custac# and  prodcd=#prodcd# and crcycd=#crcycd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="prodcd" ref="DpDict.Prod.prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号" parameterType="condition"/>
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <update method="update" id="updIndlstKnbPidlByPyinsq" longname="根据付息流水更新付息明细状态">
        <sql type="oracle"><![CDATA[update knb_pidl set indlst = '0',tmstmp=#tmstmp# where acctno = #acctno# and pyindt = #pyindt# and pyinsq = #pyinsq#]]></sql>
        <sql type="mysql"><![CDATA[update knb_pidl set indlst = '0',tmstmp=#tmstmp# where acctno = #acctno# and pyindt = #pyindt# and pyinsq = #pyinsq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
            <parameter property="pyindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="付息日期" parameterType="condition"/>
            <parameter property="pyinsq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="付息流水" parameterType="condition"/>
            <parameter property="tmstmp" ref="ApDict.Aplt.tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <select cache="none" method="selectAll" type="sql" id="selKnaFxacCountByCustno" longname="根据客户号查新多产品账户数">
        <sql type="oracle"><![CDATA[select * from kna_fxac a where (a.prodcd = #prodcd# or a.prodcd = #prodno#) and a.custno = #custno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac a where (a.prodcd = #prodcd# or a.prodcd = #prodno#) and a.custno = #custno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号1" parameterType="condition"/>
            <parameter property="prodno" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号2" parameterType="condition"/>
            <parameter property="custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaFxacByCustacOrderDetlfg" longname="根据客户账号排序查询智能储蓄和定期子账户">
        <sql type="oracle"><![CDATA[select fc.* from kna_fxac fc,kna_fxsv fv 
where fc.ACCTNO=fv.ACCTNO 
and fc.custac=#custac# 
and fc.acctst <> #acctst#
order by fv.detlfg desc,fc.opendt desc,fc.tmstmp desc]]></sql>
        <sql type="mysql"><![CDATA[select fc.* from kna_fxac fc,kna_fxsv fv 
where fc.ACCTNO=fv.ACCTNO 
and fc.custac=#custac# 
and fc.acctst <> #acctst#
order by fv.detlfg desc,fc.opendt desc,fc.tmstmp desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acctst" ref="DpDict.Acct.acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DPACST" mode="in" longname="账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaFxac"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAccsByAcctno" longname="根据子账号查询电子账户与子账户关联信息">
        <sql type="db2"><![CDATA[select * from kna_accs where acctno = #acctno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_accs where acctno = #acctno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_accs where acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaAccs"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaAcdcInfo" longname="根据电子账号查询绑定卡信息">
        <sql type="db2"><![CDATA[select a.custac,a.cardno from kna_acdc a where a.custac = #cardno#]]></sql>
        <sql type="oracle"><![CDATA[select a.custac,a.cardno from kna_acdc a where a.custac = #cardno#]]></sql>
        <sql type="mysql"><![CDATA[select a.custac,a.cardno from kna_acdc a where a.custac = #cardno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="cardno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.util.Map">
            <result property="cardno" javaType="BaseType.U_CUACNO" column="custac" longname="电子账号"/>
            <result property="acount" javaType="BaseType.U_CARDNO" column="cardno" longname="绑定卡号"/>
        </resultMap>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaCacdInfo" longname="查询绑定卡信息">
        <sql type="db2"><![CDATA[select b.brchno,b.brchna,b.isbkca,b.cardtp,b.cardno from kna_cacd b where b.custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select b.brchno,b.brchna,b.isbkca,b.cardtp,b.cardno from kna_cacd b where b.custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select b.brchno,b.brchna,b.isbkca,b.cardtp,b.cardno from kna_cacd b where b.custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpProdQuery.IoEacctSelpayInfo">
            <result property="cardtp" javaType="CaEnumType.E_BACATP" column="cardtp" longname="绑定卡类型"/>
            <result property="isbkca" javaType="PbEnumType.E_YES___" column="isbkca" longname="是否本行卡"/>
            <result property="brchna" javaType="BaseType.U_BRCHNA" column="brchna" longname="开户行名称"/>
            <result property="brchno" javaType="BaseType.U_BRCHNO" column="brchno" longname="开户行机构"/>
            <result property="cardno" javaType="BaseType.U_CARDNO" column="cardno" longname="绑定卡号"/>
        </resultMap>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaAcctInfo" longname="查询负债账户信息">
        <sql type="db2"><![CDATA[select a.acctno,a.debttp,a.acctst  from kna_acct a where a.custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select a.acctno,a.debttp,a.acctst  from kna_acct a where a.custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select a.acctno,a.debttp,a.acctst  from kna_acct a where a.custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.util.List">
            <result property="debttp" javaType="BaseEnumType.E_DEBTTP" column="debttp" longname="存款种类"/>
            <result property="status" javaType="BaseEnumType.E_ACCTST" column="acctst" longname="账户状态"/>
            <result property="acctno" javaType="BaseType.U_ACCTNO" column="acctno" longname="子账号"/>
        </resultMap>
    </select>
    <insert id="insKnbpaycbatchByiobl" longname="获取支付2.0对账文件明细">
        <sql type="mysql"><![CDATA[
    	Insert 
    	Into
    	    	knb_payc_batch
    	    	(corpno,otcustac,otcustna,incustac,incustna,tranam,servsq,servdt,transq,keepdt,status,capitp,ioflag) select
    	    	    	a.corpno,a.cardno,'',a.toacct,'',
    	    	    	a.tranam,a.servsq,a.servdt,a.transq,a.keepdt,
    	    	    	a.status,a.capitp,a.ioflag
    	    	from
    	    	    	knl_iobl a 
    	    	where
    	    	    	a.servdt = #servdt#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	Insert 
    	Into
    	    	knb_payc_batch
    	    	(corpno,otcustac,otcustna,incustac,incustna,tranam,servsq,servdt,transq,keepdt,status,capitp,ioflag) select
    	    	    	a.corpno,a.cardno,'',a.toacct,'',
    	    	    	a.tranam,a.servsq,a.servdt,a.transq,a.keepdt,
    	    	    	a.status,a.capitp,a.ioflag
    	    	from
    	    	    	knl_iobl a 
    	    	where
    	    	    	a.servdt = #servdt#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="渠道日期" parameterType="condition"/>
        </parameterMap>
    </insert>
    <insert id="insKnbpaycbatchBycary" longname="获取支付2.0对账文件明细">
        <sql type="mysql"><![CDATA[
    	Insert 
    	Into
    	    	knb_payc_batch
    	    	(corpno,otcustac,otcustna,incustac,incustna,tranam,servsq,servdt,transq,keepdt,status,capitp,ioflag) select
    	    	    	a.corpno,a.toscac,c.custna as otcustna,a.cuacno,d.custna as otcustna,
    	    	    	a.tranam,a.servsq,a.servdt,a.transq,a.keepdt,
    	    	    	a.status,a.capitp,a.ioflag
    	    	from
    	    	    	knl_cary a,kna_acdc b,kna_cust c,kna_cust d,
    	    	    	kna_acdc e 
    	    	where
    	    	    	a.servdt = #servdt# and a.cardno = b.cardno 
    	    	    	and b.CUSTAC = c.CUSTAC and a.cuacno = e.cardno 
    	    	    	and e.CUSTAC = d.CUSTAC
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	Insert 
    	Into
    	    	knb_payc_batch
    	    	(corpno,otcustac,otcustna,incustac,incustna,tranam,servsq,servdt,transq,keepdt,status,capitp,ioflag) select
    	    	    	a.corpno,a.toscac,c.custna as otcustna,a.cuacno,d.custna as otcustna,
    	    	    	a.tranam,a.servsq,a.servdt,a.transq,a.keepdt,
    	    	    	a.status,a.capitp,a.ioflag
    	    	from
    	    	    	knl_cary a,kna_acdc b,kna_cust c,kna_cust d,
    	    	    	kna_acdc e 
    	    	where
    	    	    	a.servdt = #servdt# and a.cardno = b.cardno 
    	    	    	and b.CUSTAC = c.CUSTAC and a.cuacno = e.cardno 
    	    	    	and e.CUSTAC = d.CUSTAC
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="渠道日期" parameterType="condition"/>
        </parameterMap>
    </insert>
    <delete method="delete" id="delKnbpaycbatchByday" longname="删除支付2.0对账文件数据">
        <sql type="mysql"><![CDATA[
    	delete 
    	from
    	    	knb_payc_batch 
    	where
    	    	servdt = #servdt#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	delete 
    	from
    	    	knb_payc_batch 
    	where
    	    	servdt = #servdt#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="渠道日期" parameterType="condition"/>
        </parameterMap>
    </delete>
    <select cache="none" method="selectAll" type="sql" id="selKnbpaycbatchByFile" longname="支付2.0对账文件生成">
        <sql type="mysql"><![CDATA[
    	select
    	    	otcustac,otcustna,incustac,incustna,tranam,
    	    	servsq,servdt,transq,keepdt,'1' status,
    	    	capitp,ioflag 
    	from
    	    	knb_payc_batch 
    	where   status in('2','9') and 
    	    	servdt = #servdt#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	otcustac,otcustna,incustac,incustna,tranam,
    	    	servsq,servdt,transq,keepdt,'1' status,
    	    	capitp,ioflag 
    	from
    	    	knb_payc_batch 
    	where   status in('2','9') and 
    	    	servdt = #servdt#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="渠道日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoInst.KnbPaycBatch"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selknlcnapotOne" longname="查询大小额登记薄单条记录">
        <sql><![CDATA[select * from knl_cnapot where subsys = #subsys# and msetdt = #msetdt# and msetsq = #msetsq# and crdbtg = #crdbtg# and iotype = #iotype# and pyercd = #pyercd#]]></sql>
        <sql type="oracle"><![CDATA[select * from knl_cnapot where subsys = #subsys# and msetdt = #msetdt# and msetsq = #msetsq# and crdbtg = #crdbtg# and iotype = #iotype# and pyercd = #pyercd#]]></sql>
        <sql type="mysql"><![CDATA[select * from knl_cnapot where subsys = #subsys# and msetdt = #msetdt# and msetsq = #msetsq# and crdbtg = #crdbtg# and iotype = #iotype# and pyercd = #pyercd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="subsys" jdbcType="VARCHAR" javaType="BaseType.U_CHAR01" mode="in" longname="清算渠道" parameterType="condition"/>
            <parameter property="msetdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="委托日期" parameterType="condition"/>
            <parameter property="msetsq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR12" mode="in" longname="交易序号" parameterType="condition"/>
            <parameter property="crdbtg" jdbcType="VARCHAR" javaType="BaseType.U_CHAR01" mode="in" longname="借贷标志" parameterType="condition"/>
            <parameter property="iotype" jdbcType="VARCHAR" javaType="DpEnumType.E_IOTYPE" mode="in" longname="往来标志" parameterType="condition"/>
            <parameter property="pyercd" jdbcType="VARCHAR" javaType="LnBaseType.U_BANKNO" mode="in" longname="发起行行号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlCnapot"/>
    </select>
    <update method="update" id="updknlcnapotOne" longname="更新大小额登记薄单条记录">
        <sql><![CDATA[update knl_cnapot set msetdt = #msetdt#,keepdt = #keepdt#,chfcnb = #chfcnb#,npcpdt = #npcpdt#,npcpbt=#npcpbt#,pakgdt=#pakgdt#,pakgsq=#pakgsq#,tmstmp=#tmstmp# 
where servsq=#servsq# and servdt=#servdt# and corpno=#corpno#]]></sql>
        <sql type="oracle"><![CDATA[update knl_cnapot set msetdt = #msetdt#,keepdt = #keepdt#,chfcnb = #chfcnb#,npcpdt = #npcpdt#,npcpbt=#npcpbt#,pakgdt=#pakgdt#,pakgsq=#pakgsq#,tmstmp=#tmstmp# 
where servsq=#servsq# and servdt=#servdt# and corpno=#corpno#]]></sql>
        <sql type="mysql"><![CDATA[update knl_cnapot set msetdt = #msetdt#,keepdt = #keepdt#,chfcnb = #chfcnb#,npcpdt = #npcpdt#,npcpbt=#npcpbt#,pakgdt=#pakgdt#,pakgsq=#pakgsq#,tmstmp=#tmstmp# 
where servsq=#servsq# and servdt=#servdt# and corpno=#corpno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="msetdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="委托日期" parameterType="condition"/>
            <parameter property="keepdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="清算日期" parameterType="condition"/>
            <parameter property="chfcnb" jdbcType="VARCHAR" javaType="KBaseType.U_LEIXIN15" mode="in" longname="对账分类编号" parameterType="condition"/>
            <parameter property="npcpdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="轧差日期" parameterType="condition"/>
            <parameter property="npcpbt" jdbcType="VARCHAR" javaType="BaseType.U_CHAR02" mode="in" longname="轧差场次" parameterType="condition"/>
            <parameter property="pakgdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="包委托日期" parameterType="condition"/>
            <parameter property="pakgsq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR12" mode="in" longname="包标识序号" parameterType="condition"/>
            <parameter property="servsq" ref="DpDict.Acct.servsq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="渠道流水" parameterType="condition"/>
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="渠道日期" parameterType="condition"/>
            <parameter property="corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="tmstmp" ref="ApDict.Aplt.tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <update method="update" id="updknlcnapotCnapre" longname="大小额冲正更新大小额登记薄状态">
        <sql><![CDATA[update knl_cnapot set status=#status#,tmstmp=#tmstmp# where transq=#mntrsq# and trandt=#trandt# ]]></sql>
        <sql type="oracle"><![CDATA[update knl_cnapot set status=#status#,tmstmp=#tmstmp# where transq=#mntrsq# and trandt=#trandt# ]]></sql>
        <sql type="mysql"><![CDATA[update knl_cnapot set status=#status#,tmstmp=#tmstmp# where transq=#mntrsq# and trandt=#trandt# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="status" jdbcType="VARCHAR" javaType="BaseEnumType.E_TRANST" mode="in" longname="交易状态" parameterType="condition"/>
            <parameter property="mntrsq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="主交易流水" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="revrsq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="冲正流水" parameterType="condition"/>
            <parameter property="revrdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="冲正日期" parameterType="condition"/>
            <parameter property="tmstmp" ref="ApDict.Aplt.tmstmp" jdbcType="VARCHAR" javaType="ApBaseType.U_TMSTMP" mode="in" longname="时间戳" parameterType="condition"/>
        </parameterMap>
    </update>
    <select cache="none" method="selectOne" type="sql" id="selknlcnapotChk" longname="查询大小额是否已登记">
        <sql><![CDATA[select * from knl_cnapot where msetdt = #msetdt# and msetsq = #msetsq# and pyercd = #pyercd# and iotype = #iotype# and crdbtg = #crdbtg# and status = #status#]]></sql>
        <sql type="oracle"><![CDATA[select * from knl_cnapot where msetdt = #msetdt# and msetsq = #msetsq# and pyercd = #pyercd# and iotype = #iotype# and crdbtg = #crdbtg# and status = #status#]]></sql>
        <sql type="mysql"><![CDATA[select * from knl_cnapot where msetdt = #msetdt# and msetsq = #msetsq# and pyercd = #pyercd# and iotype = #iotype# and crdbtg = #crdbtg# and status = #status#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="msetdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="委托日期" parameterType="condition"/>
            <parameter property="msetsq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR12" mode="in" longname="交易序号" parameterType="condition"/>
            <parameter property="pyercd" jdbcType="VARCHAR" javaType="LnBaseType.U_BANKNO" mode="in" longname="发起行行号" parameterType="condition"/>
            <parameter property="iotype" jdbcType="VARCHAR" javaType="DpEnumType.E_IOTYPE" mode="in" longname="往来标志" parameterType="condition"/>
            <parameter property="crdbtg" jdbcType="VARCHAR" javaType="DpEnumType.E_CRDBTG" mode="in" longname="借贷标志" parameterType="condition"/>
            <parameter property="status" jdbcType="VARCHAR" javaType="BaseEnumType.E_TRANST" mode="in" longname="交易状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlCnapot"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaAcctZNhq" longname="根据电子账号查询活期智能账户按开户时间排序">
        <sql><![CDATA[select * from kna_acct a where a.custac = #custac# and a.acsetp = #acsetp# order by a.opendt desc]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct a where a.custac = #custac# and a.acsetp = #acsetp# order by a.opendt desc]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct a where a.custac = #custac# and a.acsetp = #acsetp# order by a.opendt desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnaAcct"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKubInrtOrder1" longname="查询账户利率表排序1">
        <sql><![CDATA[select * from kub_inrt where acctno = #acctno# order by lvaday, lvamot]]></sql>
        <sql type="oracle"><![CDATA[select * from kub_inrt where acctno = #acctno# order by lvaday, lvamot]]></sql>
        <sql type="mysql"><![CDATA[select * from kub_inrt where acctno = #acctno# order by lvaday, lvamot]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoInst.KubInrt"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selAllKubInrtOrder2" longname="查询账户利率表排序2">
        <sql><![CDATA[select * from kub_inrt where acctno = #acctno# order by lvamot,lvaday]]></sql>
        <sql type="oracle"><![CDATA[select * from kub_inrt where acctno = #acctno# order by lvamot,lvaday]]></sql>
        <sql type="mysql"><![CDATA[select * from kub_inrt where acctno = #acctno# order by lvamot,lvaday]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoInst.KubInrt"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selMenuInfo" longname="查询层级目录信息">
        <sql type="db2"><![CDATA[select a.* from knb_para_menu_temp a where a.usesys in ('11','12','13')  and (statdt = '' or statdt <= #trandt#) and (stopdt = '' or stopdt > #trandt#)]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_para_menu_temp a where a.usesys in ('11','12','13')  and (statdt = '' or statdt <= #trandt#) and (stopdt = '' or stopdt > #trandt#)]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_para_menu_temp a where a.usesys in ('11','12','13')  and (statdt = '' or statdt <= #trandt#) and (stopdt = '' or stopdt > #trandt#)]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpAccount.KnbParaMenuTemp"/>
    </select>
    <delete method="delete" id="delMenuHistInfo" longname="删除目录树历史信息">
        <sql type="db2"><![CDATA[delete  from knb_para_menu_hist where filesq <> #filesq#]]></sql>
        <sql type="oracle"><![CDATA[delete  from knb_para_menu_hist where filesq <> #filesq#]]></sql>
        <sql type="mysql"><![CDATA[delete  from knb_para_menu_hist where filesq <> #filesq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
        </parameterMap>
    </delete>
    <delete method="delete" id="delMenuInfo" longname="删除目录树正式表信息">
        <sql type="db2"><![CDATA[delete  from knb_para_menu  where filesq <> #filesq#]]></sql>
        <sql type="oracle"><![CDATA[delete  from knb_para_menu  where filesq <> #filesq#]]></sql>
        <sql type="mysql"><![CDATA[delete  from knb_para_menu  where filesq <> #filesq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="文件批次号" parameterType="condition"/>
        </parameterMap>
    </delete>
    <select cache="none" method="selectFirst" type="sql" id="selFrozInfoByFrozno" longname="根据冻结编号查询冻结信息">
        <sql type="db2"><![CDATA[select a.frbgdt as frozdt,a.freddt,a.frexog,a.frogna,a.frozsq
	from knb_froz a
	where a.frozno = #frozno# 
       and a.frozst = '0' 
      order by a.frozsq asc ]]></sql>
        <sql type="oracle"><![CDATA[select a.frbgdt as frozdt,a.freddt,a.frexog,a.frogna,a.frozsq
	from knb_froz a
	where a.frozno = #frozno# 
       and a.frozst = '0' 
      order by a.frozsq asc ]]></sql>
        <sql type="mysql"><![CDATA[select a.frbgdt as frozdt,a.freddt,a.frexog,a.frogna,a.frozsq
	from knb_froz a
	where a.frozno = #frozno# 
       and a.frozst = '0' 
      order by a.frozsq asc ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="frozno" ref="DpDict.Froz.frozno" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="冻结编号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpFrozComplexType.IofrozInfo"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selknlbillchk" longname="电子账户对账单查询">
        <sql type="db2"><![CDATA[select trandt,trantm,amntcd,trancy,tranam,acctbl,opcuac,opacna,smryds,remark from knl_bill where acctno = #acctno# and 
trandt >= #begndt# and trandt <= #endddt# order by trandt asc, detlsq asc]]></sql>
        <sql type="oracle"><![CDATA[select trandt,trantm,amntcd,trancy,tranam,acctbl,opcuac,opacna,smryds,remark from knl_bill where acctno = #acctno# and 
trandt >= #begndt# and trandt <= #endddt# order by trandt asc, detlsq asc]]></sql>
        <sql type="mysql"><![CDATA[select trandt,trantm,amntcd,trancy,tranam,acctbl,opcuac,opacna,smryds,remark from knl_bill where acctno = #acctno# and 
trandt >= #begndt# and trandt <= #endddt# order by trandt asc, detlsq asc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="卡号" parameterType="condition"/>
            <parameter property="begndt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlBill"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selknlbillchkcnt" longname="查询账单总条数">
        <sql type="db2"><![CDATA[select count(1) from knl_bill where acctno = #acctno# and 
trandt >= #begndt# and trandt <= #endddt#]]></sql>
        <sql type="oracle"><![CDATA[select count(1) from knl_bill where acctno = #acctno# and 
trandt >= #begndt# and trandt <= #endddt#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) from knl_bill where acctno = #acctno# and 
trandt >= #begndt# and trandt <= #endddt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="卡号" parameterType="condition"/>
            <parameter property="begndt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selknbstatAll" longname="查询待处理账户对账单数据">
        <sql type="db2"><![CDATA[select a.* from knb_stat a where a.dealst = #dealst# and a.trandt = #trandt# and a.filesq = #filesq#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_stat a where a.dealst = #dealst# and a.trandt = #trandt# and a.filesq = #filesq#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_stat a where a.dealst = #dealst# and a.trandt = #trandt# and a.filesq = #filesq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="dealst" jdbcType="VARCHAR" javaType="BaseEnumType.E_PROCST" mode="in" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" parameterType="condition"/>
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" parameterType="condition"/>
        </parameterMap>
        <resultMap class="RpMgr.KnbStat"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnbStatbyfilesqAndtrandt" longname="根据文件流水和日期查询对账单记录数">
        <sql type="db2"><![CDATA[select count(1) from knb_stat where filesq = #filesq# and trandt = #trandt#]]></sql>
        <sql type="oracle"><![CDATA[select count(1) from knb_stat where filesq = #filesq# and trandt = #trandt#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) from knb_stat where filesq = #filesq# and trandt = #trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnlCnapotbytransq" longname="根据交易流水查询大小额往来账明细">
        <sql type="db2"><![CDATA[select a.* from knl_cnapot a where a.TRANSQ = #transq#
]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knl_cnapot a where a.TRANSQ = #transq#
]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knl_cnapot a where a.TRANSQ = #transq#
]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="transq" ref="DpDict.Acct.transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="主交易流水" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.InknlcnapotDetl"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnlIoblbyTransq" longname="根据交易流水查询电子账户出入金">
        <sql type="db2"><![CDATA[select a.* from knl_iobl a where a.TRANSQ = #transq#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knl_iobl a where a.TRANSQ = #transq#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knl_iobl a where a.TRANSQ = #transq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="transq" ref="DpDict.Acct.transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="主交易流水" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoKnlIobl"/>
    </select>
    <update method="update" id="updKnbParaMenuTempvalue" longname="更新目录树子值代码为空的记录">
        <sql><![CDATA[update knb_para_menu_temp a set a.chcode='end'  where chcode ='' and filesq = #filesq#]]></sql>
        <sql type="oracle"><![CDATA[update knb_para_menu_temp a set a.chcode='end'  where chcode ='' and filesq = #filesq#]]></sql>
        <sql type="mysql"><![CDATA[update knb_para_menu_temp a set a.chcode='end'  where chcode ='' and filesq = #filesq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="ApBaseType.U_LEIXIN32" mode="in" longname="文件批次号" parameterType="condition"/>
        </parameterMap>
    </update>
    <delete method="delete" id="delKnsProdClerHist" longname="删除核算代码规则数据">
        <sql><![CDATA[delete  from kns_prod_cler_hist  where trandt <= #trandt#]]></sql>
        <sql type="oracle"><![CDATA[delete  from kns_prod_cler_hist  where trandt <= #trandt#]]></sql>
        <sql type="mysql"><![CDATA[delete  from kns_prod_cler_hist  where trandt <= #trandt#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
    </delete>
    <select cache="none" method="selectOne" type="sql" id="selknbslepinfo" longname="查询休眠登记簿信息">
        <sql type="db2"><![CDATA[select a.* from knb_slep a where a.custac = #custac# and a.slepst = #slepst#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_slep a where a.custac = #custac# and a.slepst = #slepst#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_slep a where a.custac = #custac# and a.slepst = #slepst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="slepst" jdbcType="VARCHAR" javaType="CaEnumType.E_SLEPST" mode="in" longname="休眠状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnbSlep"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selknareltbycustac" longname="查询是否开通亲情钱包">
        <sql type="db2"><![CDATA[select a.* from kna_relt a where a.custac = #custac# and a.reltst <> '2']]></sql>
        <sql type="oracle"><![CDATA[select a.* from kna_relt a where a.custac = #custac# and a.reltst <> '2']]></sql>
        <sql type="mysql"><![CDATA[select a.* from kna_relt a where a.custac = #custac# and a.reltst <> '2']]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="WaAcctType.IoWaKnaRelt"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selFacesgByCustac" longname="根据电子账号查询面签标识">
        <sql><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <sql type="oracle"><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <sql type="mysql"><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="BaseEnumType.E_YES___"/>
    </select>
    <dynamicSelect cache="none" method="selectAll" type="sql" id="selknlbillchkwithup" longname="查询有升级记录的电子账户账单">
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_CHAR1000" mode="in" longname="负债账号" parameterType="condition"/>
            <parameter property="begndt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlBill"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select trandt,trantm,amntcd,trancy,tranam,acctbl,opcuac,opacna,smryds,
remark from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[acctno in (${acctno})]]></str>
                    <if test="begndt!=null&amp;&amp;begndt!=&quot;&quot;&amp;&amp;endddt!=null&amp;&amp;endddt!=&quot;&quot; " type="If">
                        <str type="Str"><![CDATA[trandt between #begndt# and #endddt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by trandt asc, detlsq asc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select trandt,trantm,amntcd,trancy,tranam,acctbl,opcuac,opacna,smryds,
remark from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[acctno in (${acctno})]]></str>
                    <if test="begndt!=null&amp;&amp;begndt!=&quot;&quot;&amp;&amp;endddt!=null&amp;&amp;endddt!=&quot;&quot; " type="If">
                        <str type="Str"><![CDATA[trandt between #begndt# and #endddt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by trandt asc, detlsq asc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select trandt,trantm,amntcd,trancy,tranam,acctbl,opcuac,opacna,smryds,
remark from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[acctno in (${acctno})]]></str>
                    <if test="begndt!=null&amp;&amp;begndt!=&quot;&quot;&amp;&amp;endddt!=null&amp;&amp;endddt!=&quot;&quot; " type="If">
                        <str type="Str"><![CDATA[trandt between #begndt# and #endddt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by trandt asc, detlsq asc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectOne" type="sql" id="selknlbillchkwithupcnt" longname="查询有升级记录的电子账户账单总条数">
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_CHAR1000" mode="in" longname="负债账号" parameterType="condition"/>
            <parameter property="begndt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select count(1) from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[acctno in (${acctno})]]></str>
                    <if test="begndt!=null&amp;&amp;begndt!=&quot;&quot;&amp;&amp;endddt!=null&amp;&amp;endddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt between #begndt# and #endddt#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(1) from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[acctno in (${acctno})]]></str>
                    <if test="begndt!=null&amp;&amp;begndt!=&quot;&quot;&amp;&amp;endddt!=null&amp;&amp;endddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt between #begndt# and #endddt#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(1) from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[acctno in (${acctno})]]></str>
                    <if test="begndt!=null&amp;&amp;begndt!=&quot;&quot;&amp;&amp;endddt!=null&amp;&amp;endddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt between #begndt# and #endddt#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selkcdcardbycardno" longname="销户交易允许跨法人根据卡号查询卡信息表">
        <sql type="db2"><![CDATA[select a.* from kcd_card a where a.cardno = #cardno#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from kcd_card a where a.cardno = #cardno#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from kcd_card a where a.cardno = #cardno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKcdCard"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnbparamenuTempOne" longname="查询目录树临时表子值代码">
        <sql><![CDATA[select a.* from knb_para_menu_temp a where a.filesq = #filesq# and a.chcode = #chcode#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_para_menu_temp a where a.filesq = #filesq# and a.chcode = #chcode#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_para_menu_temp a where a.filesq = #filesq# and a.chcode = #chcode#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="批次号" parameterType="condition"/>
            <parameter property="chcode" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="子值代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpAccount.KnbParaMenuTemp"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnbparamenuOne" longname="查询目录树子值代码">
        <sql><![CDATA[select a.* from knb_para_menu a where a.filesq = #filesq# and a.chcode = #chcode#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from knb_para_menu a where a.filesq = #filesq# and a.chcode = #chcode#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_para_menu a where a.filesq = #filesq# and a.chcode = #chcode#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="filesq" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="批次号" parameterType="condition"/>
            <parameter property="chcode" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="子值代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpAccount.KnbParaMenu"/>
    </select>
    <delete method="delete" id="delMenuTemp" longname="清空目录树临时表数据">
        <sql><![CDATA[delete  from knb_para_menu_temp]]></sql>
        <sql type="oracle"><![CDATA[delete  from knb_para_menu_temp]]></sql>
        <sql type="mysql"><![CDATA[delete  from knb_para_menu_temp]]></sql>
        <parameterMap class="java.util.Map"/>
    </delete>
    <delete method="delete" id="delProdInfo" longname="请款产品核算正式表数据">
        <sql type="db2"><![CDATA[delete from kns_prod_cler]]></sql>
        <sql type="oracle"><![CDATA[delete from kns_prod_cler]]></sql>
        <sql type="mysql"><![CDATA[delete from kns_prod_cler]]></sql>
        <parameterMap class="java.util.Map"/>
    </delete>
    <select cache="none" method="selectOne" type="sql" id="selDpbPswdbyAcctno" longname="查询密码信息表">
        <sql><![CDATA[SELECT corpno,acctno,servno,servtp,passwd,acctrt,pwerct,maxerr,psdwst,tmstmp FROM dpb_pswd WHERE acctno = #acctno#]]></sql>
        <sql type="oracle"><![CDATA[SELECT corpno,acctno,servno,servtp,passwd,acctrt,pwerct,maxerr,psdwst,tmstmp FROM dpb_pswd WHERE acctno = #acctno#]]></sql>
        <sql type="mysql"><![CDATA[SELECT corpno,acctno,servno,servtp,passwd,acctrt,pwerct,maxerr,psdwst,tmstmp FROM dpb_pswd WHERE acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="BaseDict.Comm.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaDpbPswd"/>
    </select>
    <update method="update" id="updDpbPswdbyAcctno" longname="更新卡账户状态">
        <sql><![CDATA[update dpb_pswd set psdwst=#psdwst# WHERE acctno=#acctno#]]></sql>
        <sql type="oracle"><![CDATA[update dpb_pswd set psdwst=#psdwst# WHERE acctno=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[update dpb_pswd set psdwst=#psdwst# WHERE acctno=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="BaseDict.Comm.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="账号" parameterType="condition"/>
            <parameter property="psdwst" jdbcType="VARCHAR" javaType="BaseEnumType.E_PSDWST" mode="in" longname="状态" parameterType="condition"/>
        </parameterMap>
    </update>
    <select cache="none" method="selectOne" type="sql" id="selPrincipalAndInterestByAcctno" longname="根据负债账号查询本金和利息">
        <sql><![CDATA[select  
(LNNPBL + LNOPBL + LNDPBL + LNBPBL + HXXXPR) principal ,
(YSYJNI + CSYJNI + YSXXOI + CSXXOI + YSYJPI + CSYJPI + YSXXPI + CSXXPI + YJXXCI + CIXXXX + YJXXTI + YSXXTI +TXXXIN +
 HXXXIN + YSXXFE + YSXXPE ) intest 
 from lna_acct   where  acctno=#acctno# and acctst=#acctst#]]></sql>
        <sql type="oracle"><![CDATA[select  
(LNNPBL + LNOPBL + LNDPBL + LNBPBL + HXXXPR) principal ,
(YSYJNI + CSYJNI + YSXXOI + CSXXOI + YSYJPI + CSYJPI + YSXXPI + CSXXPI + YJXXCI + CIXXXX + YJXXTI + YSXXTI +TXXXIN +
 HXXXIN + YSXXFE + YSXXPE ) intest 
 from lna_acct   where  acctno=#acctno# and acctst=#acctst#]]></sql>
        <sql type="mysql"><![CDATA[select  
(LNNPBL + LNOPBL + LNDPBL + LNBPBL + HXXXPR) principal ,
(YSYJNI + CSYJNI + YSXXOI + CSXXOI + YSYJPI + CSYJPI + YSXXPI + CSXXPI + YJXXCI + CIXXXX + YJXXTI + YSXXTI +TXXXIN +
 HXXXIN + YSXXFE + YSXXPE ) intest 
 from lna_acct   where  acctno=#acctno# and acctst=#acctst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
            <parameter property="acctst" ref="LnDict.LNF.acctst" jdbcType="VARCHAR" javaType="LnEnumType.E_ACCTST" mode="in" longname="贷款账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpInterestType.DpInterestAndPrincipal"/>
    </select>
    <insert id="insKnbpaycbatchBydetl" longname="获取支付2.0对账文件明细">
        <sql type="mysql"><![CDATA[
    	Insert 
    	Into
    	    	knb_payc_batch
    	    	(corpno,otcustac,otcustna,incustac,incustna,tranam,servsq,servdt,transq,keepdt,status,capitp,ioflag) select
    	    	    	'',a.decard,a.debnam,a.crcard,a.crdnam,
    	    	    	a.tranam,a.stady2,a.stady1,a.transq,a.keepdt,
    	    	    	a.transt,'',a.remark
    	    	from
    	    	    	Knb_Rptr_Detl a 
    	    	where
    	    	    	a.stady1 = #servdt#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	Insert 
    	Into
    	    	knb_payc_batch
    	    	(corpno,otcustac,otcustna,incustac,incustna,tranam,servsq,servdt,transq,keepdt,status,capitp,ioflag) select
    	    	    	'',a.decard,a.debnam,a.crcard,a.crdnam,
    	    	    	a.tranam,a.stady2,a.stady1,a.transq,a.keepdt,
    	    	    	a.transt,'',a.remark
    	    	from
    	    	    	Knb_Rptr_Detl a 
    	    	where
    	    	    	a.stady1 = #servdt#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="servdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="渠道日期" parameterType="condition"/>
        </parameterMap>
    </insert>
    <select cache="none" method="selectAll" type="sql" id="selTransferCount" longname="查询定转信息">
        <sql><![CDATA[
select cardno,custno,custac,acctno,tgacct,tranam,trdate from knb_acct_sign where trdate=#trdate# and (trandt<>#trandt# or trandt is null) ]]></sql>
        <sql type="oracle"><![CDATA[
select cardno,custno,custac,acctno,tgacct,tranam,trdate from knb_acct_sign where trdate=#trdate# and (trandt<>#trandt# or trandt is null) ]]></sql>
        <sql type="mysql"><![CDATA[
select cardno,custno,custac,acctno,tgacct,tranam,trdate from knb_acct_sign where trdate=#trdate# and (trandt<>#trandt# or trandt is null) ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="trdate" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
            <parameter property="trandt" jdbcType="VARCHAR" javaType="string" mode="in" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpTransfer.DpKnbAcctSign"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selAuacinTranDataByAcctno" longname="查询定转活对应活期账户复合类型">
        <sql type="oracle" desc="查询定转活对应活期账户复合类型。"><![CDATA[select * from 
(select D.signno, D.custno,
      D.custac, D.acctno, D.fxacct auacno, 
      D.period, D.frequy, D.miniam, D.keepam, 
      D.trottp, D.trmiam, D.upamnt, D.signam, 
      D.effedt, D.currdt, D.nextdt, D.unsgtp, D.otupam, D.otmiam,D.cncldt,
      abs(A.onlnbl), A.crcycd, A.acctna,A.corpno
    from kna_sign_detl D 
    left outer join kna_acct A on D.acctno = A.acctno 
    where D.signst=#signst# 
    and D.signtp=#signtp# 
) B
where B.acctno = #acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="signst" jdbcType="VARCHAR" javaType="CaEnumType.E_SIGNST" mode="in" longname="签约状态" parameterType="condition"/>
            <parameter property="signtp" jdbcType="VARCHAR" javaType="CaEnumType.E_SIGNTP" mode="in" longname="签约类型" parameterType="condition"/>
            <parameter property="acctno" ref="BaseDict.Comm.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDayEndType.AuacinTranData"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnlIoblCupsByTransq" longname="根据交易流水查询银联登记薄">
        <sql type="oracle"><![CDATA[select corpno, mntrsq, trandt, prepsq, uniseq, cardno, devcno, amntcd, tranam, prepdt, crcycd, cnkpdt, unkpdt, otacct, otacna, inacct, inacna, otbrch, inbrch, trbrch, prdate, prbrmk, trbrmk, trcode, stand1, stand2, retrdt, resssq, reprsq, servsq, chckno, chrgam, busino, busitp, authno, servtp, messtp, transt, proccd, spared, glacct, glacna, glseeq, descrb, fronsq, frondt, tmstmp, djtype, prepty, regoam, remark from knl_iobl_cups where mntrsq=#transq#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="交易流水" parameterType="condition"/>
        </parameterMap>
        <resultMap class="DpDepoBusiMain.KnlIoblCups"/>
    </select>
</sqls>
