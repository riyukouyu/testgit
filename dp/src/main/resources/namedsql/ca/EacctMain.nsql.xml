<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="EacctMain" longname="电子账户信息查询" package="cn.sunline.ltts.busi.ca.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <select cache="trans" method="selectOne" type="sql" id="selSumEacctBlH" longname="电子账户活期总余额">
        <sql type="oracle"><![CDATA[select nvl(sum(a.onlnbl),0) from kna_acct a where a.crcycd=#crcycd# 
and a.custac=#custac#]]></sql>
        <sql type="mysql"><![CDATA[select ifnull(sum(a.onlnbl),0) from kna_acct a where a.crcycd=#crcycd# 
and a.custac=#custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="crcycd" ref="PbDict.Intr.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <select cache="trans" method="selectOne" type="sql" id="selSumEacctBlFx" longname="电子账户定期总余额">
        <sql type="oracle"><![CDATA[select nvl(sum(a.onlnbl),0) from kna_fxac a where a.crcycd=#crcycd# 
and a.custac=#custac# ]]></sql>
        <sql type="mysql"><![CDATA[select ifnull(sum(a.onlnbl),0) from kna_fxac a where a.crcycd=#crcycd# 
and a.custac=#custac# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="crcycd" ref="PbDict.Intr.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <dynamicSelect cache="trans" method="selectPage" type="sql" id="selEacctTransDtlInfo" longname="电子账户交易明细查询">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ServEacctType.EacctTransDtlNameInfo"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.trandt,a.trantm,a.tranam,a.servtp,a.trancy,a.acctbl,a.smryds,a.transq,a.detlsq,a.amntcd,a.intrcd,b.inprcd,a.corrtg from (select * from knl_bill union select * from h_knl_bill) a,knp_txns b ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac=#ecctno#]]></str>
                    </if>
                    <str type="Str"><![CDATA[a.intrcd =b.prcscd]]></str>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.trandt desc,a.trantm desc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.trandt,a.trantm,a.tranam,a.servtp,a.trancy,a.acctbl,a.smryds,a.transq,a.detlsq,a.amntcd,a.intrcd,b.inprcd,a.corrtg from (select * from knl_bill union select * from h_knl_bill) a,knp_txns b ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac=#ecctno#]]></str>
                    </if>
                    <str type="Str"><![CDATA[a.intrcd =b.prcscd]]></str>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.trandt desc,a.trantm desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="trans" method="selectOne" type="sql" id="selCountEacctTransDtlHist" longname="电子账户历史交易明细总数">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="基础货币代码" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(*) from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(*) from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="trans" method="selectOne" type="sql" id="selCountEacctTransDtl" longname="电子账户当日交易明细总数">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="基础货币代码" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(*) from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(*) from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="trans" method="selectOne" type="sql" id="selCountFundTransDtlInfo" longname="基金交易总条数">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="基础货币代码" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(a.acctno) from fdl_bill a,kna_accs b]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.acctno=b.acctno and b.custac=#ecctno# ]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(a.acctno) from fdl_bill a,kna_accs b]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.acctno=b.acctno and b.custac=#ecctno# ]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectAll" type="sql" id="selTransHtyDtl" longname="交易历史明细查询">
        <parameterMap class="java.util.Map">
            <parameter property="crycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="基础货币代码" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpHKnlBill"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select * from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;eenddt!=null" type="If">
                        <str type="Str"><![CDATA[trandt between #bgindt# and #eenddt#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[crycd =#crycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;eenddt!=null" type="If">
                        <str type="Str"><![CDATA[trandt between #bgindt# and #eenddt#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[crycd =#crycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectAll" type="sql" id="selEacctBlHtyDtl" longname="历史余额明细查询">
        <parameterMap class="java.util.Map">
            <parameter property="crycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="基础货币代码" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpHKnlBill"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select * from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;eenddt!=null" type="If">
                        <str type="Str"><![CDATA[trandt between #bgindt# and #eenddt#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[crycd =#crycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;eenddt!=null" type="If">
                        <str type="Str"><![CDATA[trandt between #bgindt# and #eenddt#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[crycd =#crycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selSumFundBl" longname="基金账户余额">
        <sql type="oracle"><![CDATA[select nvl(sum(a.onlnbl+a.frozbl),0) from fda_fund a,kna_accs b 
where a.acctno=b.acctno 
and b.custac=#ecctno#
and b.crcycd=#crcycd#]]></sql>
        <sql type="mysql"><![CDATA[select ifnull(sum(a.onlnbl+a.frozbl),0) from fda_fund a,kna_accs b 
where a.acctno=b.acctno 
and b.custac=#ecctno#
and b.crcycd=#crcycd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <delete method="delete" id="delKtpActrByZero" longname="删除无效的初始数据">
        <sql type="oracle"><![CDATA[delete from ktp_actr where ecctno=#ecctno# and tramin=0.00 and tramou=0.00 and fdamin=0.00 and fdamou=0.00]]></sql>
        <sql type="mysql"><![CDATA[delete from ktp_actr where ecctno=#ecctno# and tramin=0.00 and tramou=0.00 and fdamin=0.00 and fdamou=0.00]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
    </delete>
    <select cache="none" method="selectOne" type="sql" id="selCountKtpActr" longname="查询智能储蓄交易的记录数">
        <sql type="oracle"><![CDATA[select count(*) from ktp_actr where ecctno=#ecctno#]]></sql>
        <sql type="mysql"><![CDATA[select count(*) from ktp_actr where ecctno=#ecctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selLastPrFd" longname="基金上日收益">
        <sql type="oracle"><![CDATA[select nvl(sum(a.lsprft),0) from fda_fund a,kna_accs b 
where a.acctno=b.acctno 
and b.custac=#ecctno#
and b.crcycd=#crcycd#]]></sql>
        <sql type="mysql"><![CDATA[select ifnull(sum(a.lsprft),0) from fda_fund a,kna_accs b 
where a.acctno=b.acctno 
and b.custac=#ecctno#
and b.crcycd=#crcycd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <dynamicSelect cache="trans" method="selectOne" type="sql" id="selCountEacctTransDtlAll" longname="电子账户交易交易明细总数">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="基础货币代码" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select sum(a) from (]]></str>
            <str type="Str"><![CDATA[select count(*) as a from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union]]></str>
            <str type="Str"><![CDATA[select count(*) as a from h_knl_bill ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[) b]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select sum(a) from (]]></str>
            <str type="Str"><![CDATA[select count(*) as a from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union]]></str>
            <str type="Str"><![CDATA[select count(*) as a from h_knl_bill ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[) b]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="trans" method="selectAll" type="sql" id="selEacctTransDtlInfoAll" longname="交易明细查询">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
            <parameter property="detlsq" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="序列号" parameterType="condition"/>
            <parameter property="record" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="记录数" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnlBill"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union]]></str>
            <str type="Str"><![CDATA[select * from h_knl_bill ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[) as a  order by trandt desc,  detlsq desc )]]></str>
            <where type="Where">
                <and type="And">
                    <if test="record!=null&amp;&amp;record!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[rownum<=#record# ]]></str>
                    </if>
                    <if test="detlsq!=null&amp;&amp;detlsq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[detlsq<#detlsq#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union]]></str>
            <str type="Str"><![CDATA[select * from h_knl_bill ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[) b order by trandt desc,  detlsq desc ) a limit #detlsq#,#record#]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="trans" method="selectAll" type="sql" id="selEacctTransDtlInfoTrandt" longname="电子账户当日交易明细查询">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
            <parameter property="detlsq" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="序列号" parameterType="condition"/>
            <parameter property="record" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="记录数" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnlBill"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt = #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by detlsq desc ) ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="record!=null&amp;&amp;record!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[rownum<=#record# ]]></str>
                    </if>
                    <if test="detlsq!=null&amp;&amp;detlsq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[detlsq<#detlsq#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt = #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by detlsq desc ) ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="record!=null&amp;&amp;record!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[rownum<=#record# ]]></str>
                    </if>
                    <if test="detlsq!=null&amp;&amp;detlsq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[detlsq<#detlsq#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="trans" method="selectAll" type="sql" id="selEacctTransDtlInfoHist" longname="电子账户历史交易明细查询">
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="eenddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
            <parameter property="eccttp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ECCTTP" mode="in" longname="明细类型" parameterType="condition"/>
            <parameter property="detlsq" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="序列号" parameterType="condition"/>
            <parameter property="record" jdbcType="VARCHAR" javaType="BaseType.U_LONGIN" mode="in" longname="记录数" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnlBill"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by trandt desc,detlsq desc ) ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="record!=null&amp;&amp;record!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[rownum<=#record# ]]></str>
                    </if>
                    <if test="detlsq!=null&amp;&amp;detlsq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[detlsq<#detlsq#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from (]]></str>
            <str type="Str"><![CDATA[select * from h_knl_bill]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt!=null&amp;&amp;bgindt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt >= #bgindt# ]]></str>
                    </if>
                    <if test="eenddt!=null&amp;&amp;eenddt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt <= #eenddt# ]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[trancy =#crcycd#]]></str>
                    </if>
                    <if test="ecctno!=null&amp;&amp;ecctno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[custac=#ecctno#]]></str>
                    </if>
                    <if test="eccttp==0" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','buyfud','rdopfd','api111')]]></str>
                    </if>
                    <if test="eccttp==1" type="If">
                        <str type="Str"><![CDATA[intrcd='buyfud' or intrcd='rdopfd']]></str>
                    </if>
                    <if test="eccttp==2" type="If">
                        <str type="Str"><![CDATA[intrcd not in('auacin','fxtocu','instpy','api111')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by trandt desc,detlsq desc )  as  a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="record!=null&amp;&amp;record!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[rownum<=#record# ]]></str>
                    </if>
                    <if test="detlsq!=null&amp;&amp;detlsq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[detlsq<#detlsq#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selByCusInfo" longname="根据客户证件号和证件类型查询电子账户信息">
        <sql type="oracle" desc="根据客户证件号和证件类型查询电子账户信息--仅查询电子账户的信息"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and  kn.ACCTST <> '2']]></sql>
        <sql type="mysql"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and  kn.ACCTST <> '2']]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCust"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selByCusInfoFirst" longname="根据客户证件号和证件类型查询最新电子账户信息">
        <sql type="oracle" desc="根据客户证件号和证件类型查询电子账户信息--仅查询电子账户的信息"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and  kn.ACCTST = '2'
order by tmstmp desc ]]></sql>
        <sql type="mysql"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and  kn.ACCTST = '2'
order by tmstmp desc ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCust"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selSumCabrFxdrAm" longname="查询支取部分的账户计提总额">
        <sql type="oracle"><![CDATA[select sum(a.cabrin)
			from knb_cabr_fxdr a,kna_accs b 
			where a.acctno = b.acctno 
			and b.custac=#ecctno#
			and a.cabrdt=#trandt#
			and b.crcycd=#crcycd#]]></sql>
        <sql type="mysql"><![CDATA[select sum(a.cabrin)
			from knb_cabr_fxdr a,kna_accs b 
			where a.acctno = b.acctno 
			and b.custac=#ecctno#
			and a.cabrdt=#trandt#
			and b.crcycd=#crcycd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="ecctno" ref="CaDict.Eacct.ecctno" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
            <parameter property="trandt" ref="DpDict.Acct.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selKnaCustByIdtfnoAndAcctst" longname="根据证件类型证件号码及状态查询电子账户信息">
        <sql type="db2"><![CDATA[select a.* from kna_cust a,cif_cust b,kna_cuad c,knp_acst d
where a.custno = b.custno
and a.custac = c.custac
and c.dime01 = d.dime01 
and c.dime02 = d.dime02 
and c.dime03 = d.dime03 
and c.dime04 = d.dime04 
and c.dime05 = d.dime05 
and c.dime06 = d.dime06 
and c.prcscd = d.prcscd
and b.idtftp = #idtftp#
and b.idtfno = #idtfno#
and d.cuacst = #cuacst#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from kna_cust a,cif_cust b,kna_cuad c,knp_acst d
where a.custno = b.custno
and a.custac = c.custac
and c.dime01 = d.dime01 
and c.dime02 = d.dime02 
and c.dime03 = d.dime03 
and c.dime04 = d.dime04 
and c.dime05 = d.dime05 
and c.dime06 = d.dime06 
and c.prcscd = d.prcscd
and b.idtftp = #idtftp#
and b.idtfno = #idtfno#
and d.cuacst = #cuacst#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from kna_cust a,cif_cust b,kna_cuad c,knp_acst d
where a.custno = b.custno
and a.custac = c.custac
and c.dime01 = d.dime01 
and c.dime02 = d.dime02 
and c.dime03 = d.dime03 
and c.dime04 = d.dime04 
and c.dime05 = d.dime05 
and c.dime06 = d.dime06 
and c.prcscd = d.prcscd
and b.idtftp = #idtftp#
and b.idtfno = #idtfno#
and d.cuacst = #cuacst#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" ref="DpDict.Acct.idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" ref="DpDict.Acct.idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
            <parameter property="cuacst" ref="CaDict.Eacct.cuacst" jdbcType="VARCHAR" javaType="CaEnumType.E_CUACST" mode="in" longname="客户账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ElectronicAccount.KnaCust"/>
    </select>
    <dynamicSelect cache="none" method="selectAll" type="sql" id="selKnaCustByIdtfno" longname="根据证件类型证件号吗查询电子账户信息">
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" ref="DpDict.Acct.idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" ref="DpDict.Acct.idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
            <parameter property="acctst" ref="CaDict.Eacct.acctst" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACCTST" mode="in" longname="电子账户状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ElectronicAccount.KnaCust"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select kn.* from kna_cust kn,cif_cust ci]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[kn.custno=ci.custno]]></str>
                    <str type="Str"><![CDATA[ci.idtftp=#idtftp#]]></str>
                    <str type="Str"><![CDATA[ci.idtfno=#idtfno#]]></str>
                    <if test="kn.acctst != &quot;&quot; and kn.acctst != null" type="If">
                        <str type="Str"><![CDATA[kn.acctst = #acctst#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select kn.* from kna_cust kn,cif_cust ci]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[kn.custno=ci.custno]]></str>
                    <str type="Str"><![CDATA[ci.idtftp=#idtftp#]]></str>
                    <str type="Str"><![CDATA[ci.idtfno=#idtfno#]]></str>
                    <if test="kn.acctst != &quot;&quot; and kn.acctst != null" type="If">
                        <str type="Str"><![CDATA[kn.acctst = #acctst#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select kn.* from kna_cust kn,cif_cust ci]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[kn.custno=ci.custno]]></str>
                    <str type="Str"><![CDATA[ci.idtftp=#idtftp#]]></str>
                    <str type="Str"><![CDATA[ci.idtfno=#idtfno#]]></str>
                    <if test="kn.acctst != &quot;&quot; and kn.acctst != null" type="If">
                        <str type="Str"><![CDATA[kn.acctst = #acctst#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selDpAcctInfoByCustac" longname="根据电子账号查询活期存款类子账户信息">
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="trandt" ref="DpDict.Acct.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="prodtp" ref="CaDict.Eacct.prodtp" jdbcType="VARCHAR" javaType="CaEnumType.E_PRODTP" mode="in" longname="产品类型" parameterType="condition"/>
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
            <parameter property="cuacst" jdbcType="VARCHAR" javaType="BaseType.U_CHAR08" mode="in" longname="负债账号状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaDpacctInfo"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select acct.ACCTNO,acct.ACCTNA,acct.CRCYCD,acct.CSEXTG,${prodtp} prodtp,
CASE acct.acsetp
	WHEN '01' THEN '1'
	WHEN '02' THEN '2'
	WHEN '03' THEN '4'
	WHEN '04' THEN '5'
	WHEN '06' THEN '3'
	ELSE ''
END pdtpdl,
acct.PRODCD,acct.ONLNBL,acct.BRCHNO openbr,
case when acct.UPBLDT < #trandt# then acct.ONLNBL else acct.LASTBL end as lastbl,
acct.LSTRDT,acct.OPENDT,acct.OPENSQ,acct.MATUDT,acct.BGINDT,
acct.CLOSDT,acct.CLOSSQ,case when acct.ACCTST = '3' then '1' else acct.ACCTST end as dpacst,prod.obgaon as sprdna from kna_acct acct,kna_acct_prod prod 
where acct.CUSTAC = #custac# and acct.crcycd = #crcycd# and acct.ACCTNO = prod.ACCTNO and acct.acctst = #cuacst#]]></str>
            <if test="acctno != '' &amp;&amp; acctno != null" type="If">
                <str type="Str"><![CDATA[and acct.ACCTNO not in (#acctno#)]]></str>
            </if>
            <str type="Str"><![CDATA[order by acct.acctst asc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select acct.ACCTNO,acct.ACCTNA,acct.CRCYCD,acct.CSEXTG,${prodtp} prodtp,
CASE acct.acsetp
    WHEN '01' THEN '1'
    WHEN '02' THEN '2'
    WHEN '03' THEN '4'
    WHEN '04' THEN '5'
    WHEN '06' THEN '3'
    ELSE ''
END pdtpdl,
acct.PRODCD,acct.ONLNBL,acct.BRCHNO openbr,
case when acct.UPBLDT < #trandt# then acct.ONLNBL else acct.LASTBL end as lastbl,
acct.LSTRDT,acct.OPENDT,acct.OPENSQ,acct.MATUDT,acct.BGINDT,
acct.CLOSDT,acct.CLOSSQ,case when acct.ACCTST = '3' then '1' else acct.ACCTST end as dpacst,prod.obgaon as sprdna from kna_acct acct,kna_acct_prod prod 
where acct.CUSTAC = #custac# and acct.crcycd = #crcycd# and acct.ACCTNO = prod.ACCTNO and acct.acctst = #cuacst#]]></str>
            <if test="acctno != '' &amp;&amp; acctno != null" type="If">
                <str type="Str"><![CDATA[and acct.ACCTNO not in (#acctno#)]]></str>
            </if>
            <str type="Str"><![CDATA[order by acct.acctst asc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select acct.ACCTNO,acct.ACCTNA,acct.CRCYCD,acct.CSEXTG,${prodtp} prodtp,
CASE acct.acsetp
    WHEN '01' THEN '1'
    WHEN '02' THEN '2'
    WHEN '03' THEN '4'
    WHEN '04' THEN '5'
    WHEN '06' THEN '3'
    ELSE ''
END pdtpdl,
acct.PRODCD,acct.ONLNBL,acct.BRCHNO openbr,
case when acct.UPBLDT < #trandt# then acct.ONLNBL else acct.LASTBL end as lastbl,
acct.LSTRDT,acct.OPENDT,acct.OPENSQ,acct.MATUDT,acct.BGINDT,
acct.CLOSDT,acct.CLOSSQ,case when acct.ACCTST = '3' then '1' else acct.ACCTST end as dpacst,prod.obgaon as sprdna from kna_acct acct,kna_acct_prod prod 
where acct.CUSTAC = #custac# and acct.crcycd = #crcycd# and acct.ACCTNO = prod.ACCTNO and acct.acctst = #cuacst#]]></str>
            <if test="acctno != '' &amp;&amp; acctno != null" type="If">
                <str type="Str"><![CDATA[and acct.ACCTNO not in (#acctno#)]]></str>
            </if>
            <str type="Str"><![CDATA[order by acct.acctst asc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selCustInfobyCustac" longname="查询电子账户相关信息">
        <sql type="oracle"><![CDATA[select a.idtftp,a.idtfno,a.custna,b.custid,b.custcd,c.custac,c.acctst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.opensv,c.clossv,c.cuacst,e.acalno teleno,d.cardno
from cif_cust a
left join cif_cust_accs b on(a.custno = b.custno and b.STATUS = '1')
left join kna_cust  c  on(a.custno = c.custno and c.acctst<>'2')
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALST = #acalst# and e.ACALTP = #acaltp#)
where c.custac =#custac#]]></sql>
        <sql type="mysql"><![CDATA[select a.idtftp,a.idtfno,a.custna,b.custid,b.custcd,c.custac,c.acctst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.opensv,c.clossv,c.cuacst,e.acalno teleno,d.cardno
from cif_cust a
left join cif_cust_accs b on(a.custno = b.custno and b.STATUS = '1')
left join kna_cust  c  on(a.custno = c.custno and c.acctst<>'2')
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALST = #acalst# and e.ACALTP = #acaltp#)
where c.custac =#custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acalst" ref="CaDict.Eacct.acalst" jdbcType="VARCHAR" javaType="CaEnumType.E_ACALST" mode="in" longname="关联状态" parameterType="condition"/>
            <parameter property="acaltp" ref="CaDict.Eacct.acaltp" jdbcType="VARCHAR" javaType="CaEnumType.E_ACALTP" mode="in" longname="账户别名类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CaCustInfo.accoutinfos"/>
    </select>
    <select cache="trans" method="selectOne" type="sql" id="selSumEacctWact" longname="电子账户亲情钱包总余额">
        <sql type="oracle"><![CDATA[select nvl(sum(a.onlnbl),0) from kna_wact a where a.crcycd=#crcycd# 
and a.custac=#custac#]]></sql>
        <sql type="mysql"><![CDATA[select ifnull(sum(a.onlnbl),0) from kna_wact a where a.crcycd=#crcycd# 
and a.custac=#custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selInfoUpregTable" longname="查询电子账户升级登记簿信息">
        <parameterMap class="java.util.Map">
            <parameter property="promst" ref="CaDict.Eacct.promst" jdbcType="VARCHAR" javaType="CaEnumType.E_PROMST" mode="in" longname="升级状态" parameterType="condition"/>
            <parameter property="brchno" ref="DpDict.Acct.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="账户所属机构" parameterType="condition"/>
            <parameter property="stardt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="stopdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="idtfno" ref="DpDict.Acct.idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
            <parameter property="idtftp" ref="DpDict.Acct.idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQryUpRegOut"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select b.CARDNO,a.CUSTAC,a.CUSTNA,a.ODACTP,a.UPACTP,a.BRCHNO,a.APLYDT,a.PROMSV,a.PROMDT,a.RISKLV,a.PROMST,d.IDTFTP,d.IDTFNO from knb_prom a
inner join kna_acdc b on(a.CUSTAC = b.CUSTAC)
inner join kna_cust c on(b.CUSTAC = c.CUSTAC)
inner join cif_cust d on(c.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="promst!=null" type="If">
                        <str type="Str"><![CDATA[a.promst=#promst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="idtfno !=null &amp;&amp; idtfno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[d.idtfno = #idtfno#]]></str>
                    </if>
                    <if test="idtftp !=null " type="If">
                        <str type="Str"><![CDATA[d.idtftp = #idtftp#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select b.CARDNO,a.CUSTAC,a.CUSTNA,a.ODACTP,a.UPACTP,a.BRCHNO,a.APLYDT,a.PROMSV,a.PROMDT,a.RISKLV,a.PROMST,d.IDTFTP,d.IDTFNO from knb_prom a
inner join kna_acdc b on(a.CUSTAC = b.CUSTAC)
inner join kna_cust c on(b.CUSTAC = c.CUSTAC)
inner join cif_cust d on(c.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="promst!=null" type="If">
                        <str type="Str"><![CDATA[a.promst=#promst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="idtfno !=null &amp;&amp; idtfno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[d.idtfno = #idtfno#]]></str>
                    </if>
                    <if test="idtftp !=null " type="If">
                        <str type="Str"><![CDATA[d.idtftp = #idtftp#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select b.CARDNO,a.CUSTAC,a.CUSTNA,a.ODACTP,a.UPACTP,a.BRCHNO,a.APLYDT,a.PROMSV,a.PROMDT,a.RISKLV,a.PROMST,d.IDTFTP,d.IDTFNO from knb_prom a
inner join kna_acdc b on(a.CUSTAC = b.CUSTAC)
inner join kna_cust c on(b.CUSTAC = c.CUSTAC)
inner join cif_cust d on(c.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="promst!=null" type="If">
                        <str type="Str"><![CDATA[a.promst=#promst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="idtfno !=null &amp;&amp; idtfno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[d.idtfno = #idtfno#]]></str>
                    </if>
                    <if test="idtftp !=null " type="If">
                        <str type="Str"><![CDATA[d.idtftp = #idtftp#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPage selectPageWithCount" type="sql" id="selSlepInfoBybrchno" longname="根据机构和日期查询电子账户休眠登记簿信息">
        <parameterMap class="java.util.Map">
            <parameter property="brchno" ref="DpDict.Acct.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="账户所属机构" parameterType="condition"/>
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
            <parameter property="startdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="stopdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="slepst" ref="CaDict.Eacct.slepst" jdbcType="VARCHAR" javaType="CaEnumType.E_SLEPST" mode="in" longname="休眠状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQrySlepInfo"/>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.SLEPST,c.CARDNO,a.CUSTNA,d.IDTFTP,d.IDTFNO,a.ACCTTP,substr(concat(a.trandt,a.trantm),1,12) slepdt,a.SPPRST dealrt,
substr(concat(a.spprdt,a.spprtm),1,12) dealdt,a.BRCHNO,a.USERID from knb_slep a 
inner join kna_cust b on(a.CUSTAC = b.CUSTAC)
inner join kna_acdc c on(a.CUSTAC = c.CUSTAC)
inner join cif_cust d on(b.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="slepst !=null" type="If">
                        <str type="Str"><![CDATA[a.slepst =#slepst# ]]></str>
                    </if>
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.cardno = #cardno#]]></str>
                    </if>
                    <if test="startdt !=null&amp;&amp;startdt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt>=#startdt# ]]></str>
                    </if>
                    <if test="stopdt !=null&amp;&amp;stopdt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt <=#stopdt# ]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.TRANDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.SLEPST,c.CARDNO,a.CUSTNA,d.IDTFTP,d.IDTFNO,a.ACCTTP,substr(concat(a.trandt,a.trantm),1,12) slepdt,a.SPPRST dealrt,
substr(concat(a.spprdt,a.spprtm),1,12) dealdt,a.BRCHNO,a.USERID from knb_slep a 
inner join kna_cust b on(a.CUSTAC = b.CUSTAC)
inner join kna_acdc c on(a.CUSTAC = c.CUSTAC)
inner join cif_cust d on(b.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="slepst !=null" type="If">
                        <str type="Str"><![CDATA[a.slepst =#slepst# ]]></str>
                    </if>
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.cardno = #cardno#]]></str>
                    </if>
                    <if test="startdt !=null&amp;&amp;startdt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt>=#startdt# ]]></str>
                    </if>
                    <if test="stopdt !=null&amp;&amp;stopdt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.trandt <=#stopdt# ]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.TRANDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selIDbycardno" longname="根据电子账号查询证件号码">
        <sql type="db2"><![CDATA[select ci.idtftp,ci.idtfno from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  kn.cardno=#cardno#]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	ci.idtftp,ci.idtfno 
    	from
    	    	kna_cust kn,cif_cust ci 
    	where
    	    	kn.custno=ci.custno and kn.cardno=#cardno#
    	]]></sql>
        <sql type="oracle"><![CDATA[select ci.idtftp,ci.idtfno from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  kn.cardno=#cardno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="cardno" jdbcType="VARCHAR" javaType="string" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.util.Map">
            <result property="idtftp" javaType="BaseEnumType.E_IDTFTP" column="idtftp"/>
            <result property="idtfno" javaType="BaseType.U_IDTFNO" column="idtfno"/>
        </resultMap>
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selKnaCustMpckrtt" longname="查询电子账户审核信息">
        <parameterMap class="java.util.Map">
            <parameter property="revist" jdbcType="VARCHAR" javaType="CaEnumType.E_MPCKRT" mode="in" longname="审核状态" parameterType="condition"/>
            <parameter property="custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="审核状态" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCustQrckif"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select a.custac,a.custna,b.cardno,c.idtftp,c.idtfno,a.mpckrt as revist,a.accttp,a.opendt as ortrdt from kna_cust a
left join kna_acdc b on(a.CUSTAC = b.CUSTAC)
left join cif_cust c on(a.CUSTNO = c.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt != null and bgindt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt >= #bgindt#]]></str>
                    </if>
                    <if test="endddt != null and endddt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt <=#endddt#]]></str>
                    </if>
                    <if test="revist != null " type="If">
                        <str type="Str"><![CDATA[a.mpckrt = #revist#]]></str>
                    </if>
                    <if test="custno != null" type="If">
                        <str type="Str"><![CDATA[a.custno = #custno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.custac,a.custna,b.cardno,c.idtftp,c.idtfno,a.mpckrt as revist,a.accttp,a.opendt as ortrdt from kna_cust a
left join kna_acdc b on(a.CUSTAC = b.CUSTAC)
left join cif_cust c on(a.CUSTNO = c.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt != null and bgindt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt >= #bgindt#]]></str>
                    </if>
                    <if test="endddt != null and endddt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt <=#endddt#]]></str>
                    </if>
                    <if test="revist != null " type="If">
                        <str type="Str"><![CDATA[a.mpckrt = #revist#]]></str>
                    </if>
                    <if test="custno != null" type="If">
                        <str type="Str"><![CDATA[a.custno = #custno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.custac,a.custna,b.cardno,c.idtftp,c.idtfno,a.mpckrt as revist,a.accttp,a.opendt as ortrdt from kna_cust a
left join kna_acdc b on(a.CUSTAC = b.CUSTAC)
left join cif_cust c on(a.CUSTNO = c.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt != null and bgindt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt >= #bgindt#]]></str>
                    </if>
                    <if test="endddt != null and endddt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt <=#endddt#]]></str>
                    </if>
                    <if test="revist != null " type="If">
                        <str type="Str"><![CDATA[a.mpckrt = #revist#]]></str>
                    </if>
                    <if test="custno != null" type="If">
                        <str type="Str"><![CDATA[a.custno = #custno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selKnpPromMpckrtt" longname="查询电子账户升级登记薄审核信息">
        <parameterMap class="java.util.Map">
            <parameter property="revist" jdbcType="VARCHAR" javaType="CaEnumType.E_MPCKRT" mode="in" longname="审核状态" parameterType="condition"/>
            <parameter property="custno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCustQrckif"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select c.custac,c.custna,b.cardno,d.idtftp,d.idtfno,c.mpckrt as revist,c.upactp as accatp,c.aplydt as ortrdt from knb_prom c
left join kna_acdc b on(c.custac = b.custac)
left join kna_cust a on(c.custac = a.custac)
left join cif_cust d on(a.custno = d.custno)
]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt != null and bgindt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.aplydt >= #bgindt#]]></str>
                    </if>
                    <if test="endddt != null and endddt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.aplydt <=#endddt#]]></str>
                    </if>
                    <if test="revist != null" type="If">
                        <str type="Str"><![CDATA[c.mpckrt = #revist#]]></str>
                    </if>
                    <if test="custno != null" type="If">
                        <str type="Str"><![CDATA[a.custno = #custno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select c.custac,c.custna,b.cardno,d.idtftp,d.idtfno,c.mpckrt as revist,c.upactp as accatp,c.aplydt as ortrdt from knb_prom c
left join kna_acdc b on(c.custac = b.custac)
left join kna_cust a on(c.custac = a.custac)
left join cif_cust d on(a.custno = d.custno)
]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt != null and bgindt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.aplydt >= #bgindt#]]></str>
                    </if>
                    <if test="endddt != null and endddt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.aplydt <=#endddt#]]></str>
                    </if>
                    <if test="revist != null" type="If">
                        <str type="Str"><![CDATA[c.mpckrt = #revist#]]></str>
                    </if>
                    <if test="custno != null" type="If">
                        <str type="Str"><![CDATA[a.custno = #custno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select c.custac,c.custna,b.cardno,d.idtftp,d.idtfno,c.mpckrt as revist,c.upactp as accatp,c.aplydt as ortrdt from knb_prom c
left join kna_acdc b on(c.custac = b.custac)
left join kna_cust a on(c.custac = a.custac)
left join cif_cust d on(a.custno = d.custno)
]]></str>
            <where type="Where">
                <and type="And">
                    <if test="bgindt != null and bgindt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.aplydt >= #bgindt#]]></str>
                    </if>
                    <if test="endddt != null and endddt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[c.aplydt <=#endddt#]]></str>
                    </if>
                    <if test="revist != null" type="If">
                        <str type="Str"><![CDATA[c.mpckrt = #revist#]]></str>
                    </if>
                    <if test="custno != null" type="If">
                        <str type="Str"><![CDATA[a.custno = #custno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selKnbcasp" longname="查询电子账户停用登记簿">
        <parameterMap class="java.util.Map">
            <parameter property="dealst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DEALST" mode="in" longname="处理状态" parameterType="condition"/>
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
            <parameter property="stardt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="stopdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQryDisaInfo"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select a.PROCST DEALST,b.CARDNO,a.CUSTNA,a.ACCTTP,a.BRCHNO,a.BKUPRS,concat(a.BKUPDT,substr(a.BKUPTM,1,4)) BKUPDT,a.REMARK,a.DCLRNA,a.DCLRTL,a.DCIDTP IDTFTP,a.DCIDNO IDTFNO,
a.USERID SPHDID,a.AUTHUS SPATID,a.PROCRS DEALRT,concat(a.PROCDT,substr(a.PROCTM,1,4)) DEALDT,a.DLHDID,a.DLATID,a.PROCDS
from knb_casp a
inner join kna_acdc b on (a.CUSTAC = b.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="dealst != null" type="If">
                        <str type="Str"><![CDATA[a.procst = #dealst#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.cardno = #cardno#]]></str>
                    </if>
                    <if test="stardt != null and stardt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.bkupdt between #stardt# and #stopdt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.BKUPDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.PROCST DEALST,b.CARDNO,a.CUSTNA,a.ACCTTP,a.BRCHNO,a.BKUPRS,concat(a.BKUPDT,substr(a.BKUPTM,1,4)) BKUPDT,a.REMARK,a.DCLRNA,a.DCLRTL,a.DCIDTP IDTFTP,a.DCIDNO IDTFNO,
a.USERID SPHDID,a.AUTHUS SPATID,a.PROCRS DEALRT,concat(a.PROCDT,substr(a.PROCTM,1,4)) DEALDT,a.DLHDID,a.DLATID,a.PROCDS
from knb_casp a
inner join kna_acdc b on (a.CUSTAC = b.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="dealst != null" type="If">
                        <str type="Str"><![CDATA[a.procst = #dealst#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.cardno = #cardno#]]></str>
                    </if>
                    <if test="stardt != null and stardt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.bkupdt between #stardt# and #stopdt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.BKUPDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.PROCST DEALST,b.CARDNO,a.CUSTNA,a.ACCTTP,a.BRCHNO,a.BKUPRS,concat(a.BKUPDT,substr(a.BKUPTM,1,4)) BKUPDT,a.REMARK,a.DCLRNA,a.DCLRTL,a.DCIDTP IDTFTP,a.DCIDNO IDTFNO,
a.USERID SPHDID,a.AUTHUS SPATID,a.PROCRS DEALRT,concat(a.PROCDT,substr(a.PROCTM,1,4)) DEALDT,a.DLHDID,a.DLATID,a.PROCDS
from knb_casp a
inner join kna_acdc b on (a.CUSTAC = b.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="dealst != null" type="If">
                        <str type="Str"><![CDATA[a.procst = #dealst#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.cardno = #cardno#]]></str>
                    </if>
                    <if test="stardt != null and stardt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.bkupdt between #stardt# and #stopdt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.BKUPDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selKnbdisa" longname="查询电子账户停用转久悬登记簿">
        <parameterMap class="java.util.Map">
            <parameter property="dealst" jdbcType="VARCHAR" javaType="BaseEnumType.E_DEALST" mode="in" longname="处理状态" parameterType="condition"/>
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
            <parameter property="stardt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="stopdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQryDisaInfo"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[SELECT a.PROCST DEALST,b.CARDNO,a.ACCTTP,a.CUSTNA,a.BRCHNO,a.PROPAM,(concat(a.BKUPDT,substr(a.BKUPTM,1,4))) PROPDT,
a.BKUPRS,a.REMARK,a.USERID SPHDID,a.AUTHUS SPATID,(concat(a.PROCDT,substr(a.PROCTM,1,4))) DEALDT,
a.PROCRS DEALRT,a.APPRFG,a.APPRWY,a.APWYDS,a.DLHDID,a.DLATID,d.IDTFNO,d.IDTFTP FROM knb_disa a
INNER JOIN kna_acdc b on (a.CUSTAC = b.CUSTAC)
INNER JOIN kna_cust c on (a.CUSTAC = c.CUSTAC)
INNER JOIN cif_cust d on (c.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="dealst != null" type="If">
                        <str type="Str"><![CDATA[a.procst = #dealst#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.cardno = #cardno#]]></str>
                    </if>
                    <if test="stardt != null and stardt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.bkupdt between #stardt# and #stopdt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.BKUPDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[SELECT a.PROCST DEALST,b.CARDNO,a.ACCTTP,a.CUSTNA,a.BRCHNO,a.PROPAM,(concat(a.BKUPDT,substr(a.BKUPTM,1,4))) PROPDT,
a.BKUPRS,a.REMARK,a.USERID SPHDID,a.AUTHUS SPATID,(concat(a.PROCDT,substr(a.PROCTM,1,4))) DEALDT,
a.PROCRS DEALRT,a.APPRFG,a.APPRWY,a.APWYDS,a.DLHDID,a.DLATID,d.IDTFNO,d.IDTFTP FROM knb_disa a
INNER JOIN kna_acdc b on (a.CUSTAC = b.CUSTAC)
INNER JOIN kna_cust c on (a.CUSTAC = c.CUSTAC)
INNER JOIN cif_cust d on (c.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="dealst != null" type="If">
                        <str type="Str"><![CDATA[a.procst = #dealst#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.cardno = #cardno#]]></str>
                    </if>
                    <if test="stardt != null and stardt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.bkupdt between #stardt# and #stopdt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.BKUPDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[SELECT a.PROCST DEALST,b.CARDNO,a.ACCTTP,a.CUSTNA,a.BRCHNO,a.PROPAM,(concat(a.BKUPDT,substr(a.BKUPTM,1,4))) PROPDT,
a.BKUPRS,a.REMARK,a.USERID SPHDID,a.AUTHUS SPATID,(concat(a.PROCDT,substr(a.PROCTM,1,4))) DEALDT,
a.PROCRS DEALRT,a.APPRFG,a.APPRWY,a.APWYDS,a.DLHDID,a.DLATID,d.IDTFNO,d.IDTFTP FROM knb_disa a
INNER JOIN kna_acdc b on (a.CUSTAC = b.CUSTAC)
INNER JOIN kna_cust c on (a.CUSTAC = c.CUSTAC)
INNER JOIN cif_cust d on (c.CUSTNO = d.CUSTNO)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="brchno != null and brchno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno = #brchno#]]></str>
                    </if>
                    <if test="dealst != null" type="If">
                        <str type="Str"><![CDATA[a.procst = #dealst#]]></str>
                    </if>
                    <if test="cardno != null and cardno !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.cardno = #cardno#]]></str>
                    </if>
                    <if test="stardt != null and stardt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.bkupdt between #stardt# and #stopdt#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.BKUPDT desc,a.tmstmp desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectPageWithCount" type="sql" id="selCustPromMpckrt" longname="查询人工审核信息">
        <sql type="db2"><![CDATA[select info.custac,info.custna,info.cardno,info.idtftp,info.idtfno,info.revist,info.accttp,info.ortrdt,info.revitp from (select a.custac,a.custna,b.cardno,c.idtftp,c.idtfno,a.mpckrt as revist,a.accttp,a.opendt as ortrdt,'1' as revitp from kna_cust a
left join kna_acdc b on(a.CUSTAC = b.CUSTAC)
left join cif_cust c on(a.CUSTNO = c.CUSTNO) 
where a.opendt >= #bgindt# and a.opendt <=#endddt# and a.mpckrt like #revist# and a.custno like #custno# 
union all 
select e.custac,e.custna,f.cardno,d.idtftp,d.idtfno,e.mpckrt as revist,e.upactp as accatp,e.aplydt as ortrdt,'2' as revitp  from knb_prom e
left join kna_acdc f on(e.custac = f.custac)
left join kna_cust m on(e.custac = m.custac)
left join cif_cust d on(m.custno = d.custno)
where e.aplydt >= #bgindt# and e.aplydt <=#endddt# and e.mpckrt like #revist# and m.custno like #custno#) as info]]></sql>
        <sql type="oracle"><![CDATA[select info.custac,info.custna,info.cardno,info.idtftp,info.idtfno,info.revist,info.accttp,info.ortrdt,info.revitp from (select a.custac,a.custna,b.cardno,c.idtftp,c.idtfno,a.mpckrt as revist,a.accttp,a.opendt as ortrdt,'1' as revitp from kna_cust a
left join kna_acdc b on(a.CUSTAC = b.CUSTAC)
left join cif_cust c on(a.CUSTNO = c.CUSTNO) 
where a.opendt >= #bgindt# and a.opendt <=#endddt# and a.mpckrt like #revist# and a.custno like #custno# 
union all 
select e.custac,e.custna,f.cardno,d.idtftp,d.idtfno,e.mpckrt as revist,e.upactp as accatp,e.aplydt as ortrdt,'2' as revitp  from knb_prom e
left join kna_acdc f on(e.custac = f.custac)
left join kna_cust m on(e.custac = m.custac)
left join cif_cust d on(m.custno = d.custno)
where e.aplydt >= #bgindt# and e.aplydt <=#endddt# and e.mpckrt like #revist# and m.custno like #custno#) as info]]></sql>
        <sql type="mysql"><![CDATA[select info.custac,info.custna,info.cardno,info.idtftp,info.idtfno,info.revist,info.accttp,info.ortrdt,info.revitp from (select a.custac,a.custna,b.cardno,c.idtftp,c.idtfno,a.mpckrt as revist,a.accttp,a.opendt as ortrdt,'1' as revitp from kna_cust a
left join kna_acdc b on(a.CUSTAC = b.CUSTAC)
left join cif_cust c on(a.CUSTNO = c.CUSTNO) 
where a.opendt >= #bgindt# and a.opendt <=#endddt# and a.mpckrt like #revist# and a.custno like #custno# 
union all 
select e.custac,e.custna,f.cardno,d.idtftp,d.idtfno,e.mpckrt as revist,e.upactp as accatp,e.aplydt as ortrdt,'2' as revitp  from knb_prom e
left join kna_acdc f on(e.custac = f.custac)
left join kna_cust m on(e.custac = m.custac)
left join cif_cust d on(m.custno = d.custno)
where e.aplydt >= #bgindt# and e.aplydt <=#endddt# and e.mpckrt like #revist# and m.custno like #custno#) as info]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="revist" jdbcType="VARCHAR" javaType="string" mode="in" longname="审核状态" parameterType="condition"/>
            <parameter property="custno" jdbcType="VARCHAR" javaType="string" mode="in" longname="客户号" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="开始日期" parameterType="condition"/>
            <parameter property="endddt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="结束日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCustQrckif"/>
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selDpAcctInfoByOpdt" longname="根据电子账户和开户日期查询子账户信息">
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="begndt" ref="DpDict.Depr.begndt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="endate" ref="FnDict.Fnfc.endate" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="截止日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaDpAcctfos"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select d.ACCTNO as acctno ,d.CRCYCD  as crcycd ,d.ONLNBL as ONLNBL ,d.CSEXTG as CSEXTG,d.dpacst as dpacst,d.OPENDT as OPENDT,d.acsetp as prodtp ,d.pdtpdl from (]]></str>
            <str type="Str"><![CDATA[select a.ACCTNO as acctno ,a.CRCYCD  as crcycd ,a.ONLNBL as ONLNBL ,a.CSEXTG as CSEXTG,a.ACCTST as dpacst,a.OPENDT as OPENDT,a.ACSETP as acsetp ,c.prodtx  as pdtpdl  from kna_acct a ,kup_dppb c ]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[a.prodcd =c.prodcd and a.custac=#custac# ]]></str>
                    <if test="begndt!=null and begndt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt >= #begndt# ]]></str>
                    </if>
                    <if test="enddate !=null and enddate !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt<#endate#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union all]]></str>
            <str type="Str"><![CDATA[select b.ACCTNO as acctno ,b.CRCYCD  as crcycd ,b.ONLNBL as ONLNBL ,b.CSEXTG as CSEXTG,b.ACCTST as dpacst,b.OPENDT as OPENDT,b.ACSETP as acsetp ,e.prodtx  as pdtpdl  from kna_fxac b  ,kup_dppb e]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[b.prodcd =e.prodcd and b.custac=#custac# ]]></str>
                    <if test="begndt!=null and begndt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.opendt>=#begndt#]]></str>
                    </if>
                    <if test="endate!=null and endate!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.opendt<=#endate#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[)d]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select d.ACCTNO as acctno ,d.CRCYCD  as crcycd ,d.ONLNBL as ONLNBL ,d.CSEXTG as CSEXTG,d.dpacst as dpacst,d.OPENDT as OPENDT,d.acsetp as prodtp ,d.pdtpdl from (]]></str>
            <str type="Str"><![CDATA[select a.ACCTNO as acctno ,a.CRCYCD  as crcycd ,a.ONLNBL as ONLNBL ,a.CSEXTG as CSEXTG,a.ACCTST as dpacst,a.OPENDT as OPENDT,a.ACSETP as acsetp ,c.prodtx  as pdtpdl  from kna_acct a ,kup_dppb c ]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[a.prodcd =c.prodcd and a.custac=#custac# ]]></str>
                    <if test="begndt!=null and begndt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt >= #begndt# ]]></str>
                    </if>
                    <if test="enddate !=null and enddate !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt<#endate#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union all]]></str>
            <str type="Str"><![CDATA[select b.ACCTNO as acctno ,b.CRCYCD  as crcycd ,b.ONLNBL as ONLNBL ,b.CSEXTG as CSEXTG,b.ACCTST as dpacst,b.OPENDT as OPENDT,b.ACSETP as acsetp ,e.prodtx  as pdtpdl  from kna_fxac b  ,kup_dppb e]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[b.prodcd =e.prodcd and b.custac=#custac# ]]></str>
                    <if test="begndt!=null and begndt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.opendt>=#begndt#]]></str>
                    </if>
                    <if test="endate!=null and endate!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.opendt<=#endate#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[)d]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select d.ACCTNO as acctno ,d.CRCYCD  as crcycd ,d.ONLNBL as ONLNBL ,d.CSEXTG as CSEXTG,d.dpacst as dpacst,d.OPENDT as OPENDT,d.acsetp as prodtp ,d.pdtpdl from (]]></str>
            <str type="Str"><![CDATA[select a.ACCTNO as acctno ,a.CRCYCD  as crcycd ,a.ONLNBL as ONLNBL ,a.CSEXTG as CSEXTG,a.ACCTST as dpacst,a.OPENDT as OPENDT,a.ACSETP as acsetp ,c.prodtx  as pdtpdl  from kna_acct a ,kup_dppb c ]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[a.prodcd =c.prodcd and a.custac=#custac# ]]></str>
                    <if test="begndt!=null and begndt !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt >= #begndt# ]]></str>
                    </if>
                    <if test="enddate !=null and enddate !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.opendt<#endate#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[union all]]></str>
            <str type="Str"><![CDATA[select b.ACCTNO as acctno ,b.CRCYCD  as crcycd ,b.ONLNBL as ONLNBL ,b.CSEXTG as CSEXTG,b.ACCTST as dpacst,b.OPENDT as OPENDT,b.ACSETP as acsetp ,e.prodtx  as pdtpdl  from kna_fxac b  ,kup_dppb e]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[b.prodcd =e.prodcd and b.custac=#custac# ]]></str>
                    <if test="begndt!=null and begndt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.opendt>=#begndt#]]></str>
                    </if>
                    <if test="endate!=null and endate!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[b.opendt<=#endate#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[)d]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selCardnoByIdtftpIdtfno" longname="根据证件类型和证件号码获取电子账号">
        <sql type="db2"><![CDATA[select a.cardno from kna_acdc a 
			left join kna_cust b on a.CUSTAC = b.CUSTAC
			left join cif_cust c on b.CUSTNO = c.CUSTNO
			where c.IDTFTP = #idtftp# 
			and c.IDTFNO = #idtfno#
			and b.ACCTST <> '2']]></sql>
        <sql type="oracle"><![CDATA[select a.cardno from kna_acdc a 
			left join kna_cust b on a.CUSTAC = b.CUSTAC
			left join cif_cust c on b.CUSTNO = c.CUSTNO
			where c.IDTFTP = #idtftp# 
			and c.IDTFNO = #idtfno#
			and b.ACCTST <> '2']]></sql>
        <sql type="mysql"><![CDATA[select a.cardno from kna_acdc a 
			left join kna_cust b on a.CUSTAC = b.CUSTAC
			left join cif_cust c on b.CUSTNO = c.CUSTNO
			where c.IDTFTP = #idtftp# 
			and c.IDTFNO = #idtfno#
			and b.ACCTST <> '2']]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
        </parameterMap>
        <!-- <resultMap class="java.lang.String">
            <result property="cardno" javaType="BaseType.U_CARDNO"/>
        </resultMap> -->
        <resultMap class="java.lang.String"/>
        <!-- <resultMap class="ElectronicAccount.KnaAcdc"/> -->
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selKnbCacqInfos" longname="查询电子账户绑定账户修改登记簿信息">
        <parameterMap class="java.util.Map">
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
            <parameter property="idtftp" ref="DpDict.Acct.idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" ref="DpDict.Acct.idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
            <parameter property="bgindt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="matudt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="mantwy" ref="CaDict.Eacct.mantwy" jdbcType="VARCHAR" javaType="CaEnumType.E_MANTWY" mode="in" longname="维护方式" parameterType="condition"/>
            <parameter property="servtp" jdbcType="VARCHAR" javaType="MsType.U_CHANNEL" mode="in" longname="渠道" parameterType="condition"/>
            <parameter property="orgnbr" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="操作机构" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQryModInfoList"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[SELECT A.MANTWY,D.CARDNO,B.CUSTNA,C.IDTFTP,C.IDTFNO,A.ODOPAC,A.CDOPAC,A.TRANDT,A.SERVTP FROM knb_cacq A
INNER JOIN kna_cust B ON(A.CUSTAC = B.CUSTAC)
INNER JOIN cif_cust C ON(B.CUSTNO = C.CUSTNO)
INNER JOIN kna_acdc D ON(B.CUSTAC = D.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="cardno != null &amp;&amp; cardno != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[D.cardno = #cardno#]]></str>
                    </if>
                    <if test="idtfno != null &amp;&amp; idtfno != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[C.idtfno=#idtfno#]]></str>
                    </if>
                    <if test="idtftp != null" type="If">
                        <str type="Str"><![CDATA[C.idtftp = #idtftp#]]></str>
                    </if>
                    <if test="orgnbr != null &amp;&amp; orgnbr != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[B.brchno=#orgnbr#]]></str>
                    </if>
                    <if test="bgindt!=null &amp;&amp; bgindt != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[A.trandt between #bgindt# and #matudt#]]></str>
                    </if>
                    <if test="mantwy != null" type="If">
                        <str type="Str"><![CDATA[A.mantwy=#mantwy#]]></str>
                    </if>
                    <if test="servtp != null" type="If">
                        <str type="Str"><![CDATA[A.servtp = #servtp#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[SELECT A.MANTWY,D.CARDNO,B.CUSTNA,C.IDTFTP,C.IDTFNO,A.ODOPAC,A.CDOPAC,A.TRANDT,A.SERVTP FROM knb_cacq A
INNER JOIN kna_cust B ON(A.CUSTAC = B.CUSTAC)
INNER JOIN cif_cust C ON(B.CUSTNO = C.CUSTNO)
INNER JOIN kna_acdc D ON(B.CUSTAC = D.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="cardno != null &amp;&amp; cardno != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[D.cardno = #cardno#]]></str>
                    </if>
                    <if test="idtfno != null &amp;&amp; idtfno != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[C.idtfno=#idtfno#]]></str>
                    </if>
                    <if test="idtftp != null" type="If">
                        <str type="Str"><![CDATA[C.idtftp = #idtftp#]]></str>
                    </if>
                    <if test="orgnbr != null &amp;&amp; orgnbr != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[B.brchno=#orgnbr#]]></str>
                    </if>
                    <if test="bgindt!=null &amp;&amp; bgindt != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[A.trandt between #bgindt# and #matudt#]]></str>
                    </if>
                    <if test="mantwy != null" type="If">
                        <str type="Str"><![CDATA[A.mantwy=#mantwy#]]></str>
                    </if>
                    <if test="servtp != null" type="If">
                        <str type="Str"><![CDATA[A.servtp = #servtp#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[SELECT A.MANTWY,D.CARDNO,B.CUSTNA,C.IDTFTP,C.IDTFNO,A.ODOPAC,A.CDOPAC,A.TRANDT,A.SERVTP FROM knb_cacq A
INNER JOIN kna_cust B ON(A.CUSTAC = B.CUSTAC)
INNER JOIN cif_cust C ON(B.CUSTNO = C.CUSTNO)
INNER JOIN kna_acdc D ON(B.CUSTAC = D.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="cardno != null &amp;&amp; cardno != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[D.cardno = #cardno#]]></str>
                    </if>
                    <if test="idtfno != null &amp;&amp; idtfno != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[C.idtfno=#idtfno#]]></str>
                    </if>
                    <if test="idtftp != null" type="If">
                        <str type="Str"><![CDATA[C.idtftp = #idtftp#]]></str>
                    </if>
                    <if test="orgnbr != null &amp;&amp; orgnbr != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[B.brchno=#orgnbr#]]></str>
                    </if>
                    <if test="bgindt!=null &amp;&amp; bgindt != &quot;&quot;" type="If">
                        <str type="Str"><![CDATA[A.trandt between #bgindt# and #matudt#]]></str>
                    </if>
                    <if test="mantwy != null" type="If">
                        <str type="Str"><![CDATA[A.mantwy=#mantwy#]]></str>
                    </if>
                    <if test="servtp != null" type="If">
                        <str type="Str"><![CDATA[A.servtp = #servtp#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selEffectAcctnoByCrcycd" longname="查询机构币种下有效结算子户记录数">
        <sql><![CDATA[select count(1) as count from kna_acct where  acctst !='2' and brchno =#brchno# and crcycd =#crcycd#]]></sql>
        <sql type="oracle"><![CDATA[select count(1) as count from kna_acct where  acctst !='2' and brchno =#brchno# and crcycd =#crcycd#]]></sql>
        <sql type="mysql"><![CDATA[select count(1) as count from kna_acct where  acctst !='2' and brchno =#brchno# and crcycd =#crcycd#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="brchno" ref="BaseDict.Comm.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnpAcstByIdx1" longname="查询账户状态表">
        <sql><![CDATA[select * from knp_acst 
where prcscd=#prcscd# and corpno=#corpno#
and dime01=#dime01# and dime02=#dime02# 
and dime03=#dime03# and dime04=#dime04# 
and dime05=#dime05# and dime06=#dime06# ]]></sql>
        <sql type="oracle"><![CDATA[select * from knp_acst 
where prcscd=#prcscd# and corpno=#corpno#
and dime01=#dime01# and dime02=#dime02# 
and dime03=#dime03# and dime04=#dime04# 
and dime05=#dime05# and dime06=#dime06# ]]></sql>
        <sql type="mysql"><![CDATA[select * from knp_acst 
where prcscd=#prcscd# and corpno=#corpno#
and dime01=#dime01# and dime02=#dime02# 
and dime03=#dime03# and dime04=#dime04# 
and dime05=#dime05# and dime06=#dime06# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prcscd" ref="BaseDict.Comm.prcscd" jdbcType="VARCHAR" javaType="BaseType.U_PRCSCD" mode="in" longname="交易码" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="dime01" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="状态维度1" parameterType="condition"/>
            <parameter property="dime02" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="状态维度2" parameterType="condition"/>
            <parameter property="dime03" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="状态维度3" parameterType="condition"/>
            <parameter property="dime04" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="状态维度4" parameterType="condition"/>
            <parameter property="dime05" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="状态维度5" parameterType="condition"/>
            <parameter property="dime06" jdbcType="VARCHAR" javaType="BaseType.U_CHAR10" mode="in" longname="状态维度6" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ElectronicAccount.KnpAcst"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnpAcctType" longname="查询客户账户类型定义表信息">
        <sql><![CDATA[select * from knp_acct_type where cacttp=#cacttp# and corpno=#corpno#]]></sql>
        <sql type="oracle"><![CDATA[select * from knp_acct_type where cacttp=#cacttp# and corpno=#corpno#]]></sql>
        <sql type="mysql"><![CDATA[select * from knp_acct_type where cacttp=#cacttp# and corpno=#corpno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="cacttp" ref="DpDict.Prod.cacttp" jdbcType="VARCHAR" javaType="DpEnumType.E_CUSACT" mode="in" longname="客户账号类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ElectronicAccount.KnpAcctType"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKcdProd" longname="查询卡产品表信息">
        <sql><![CDATA[select * from kcd_prod where prodcd=#prodcd# and corpno=#corpno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kcd_prod where prodcd=#prodcd# and corpno=#corpno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kcd_prod where prodcd=#prodcd# and corpno=#corpno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="prodcd" jdbcType="VARCHAR" javaType="BaseType.U_PRODCD" mode="in" longname="产品编号" parameterType="condition"/>
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ElectronicAccount.KcdProd"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selSumFnacctBill" longname="电子账户理财总余额">
        <sql type="db2"><![CDATA[select ifnull(sum(a.nowtam),0) from fna_acct a where a.crcycd=#crcycd# 
and a.custac=#custac# ]]></sql>
        <sql type="mysql"><![CDATA[select ifnull(sum(a.nowtam),0) from fna_acct a where a.crcycd=#crcycd# 
and a.custac=#custac# ]]></sql>
        <sql type="oracle"><![CDATA[select nvl(sum(a.nowtam),0) from fna_acct a where a.crcycd=#crcycd# 
and a.custac=#custac# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <dynamicSelect cache="none" method="selectAll" type="sql" id="selAccOpenInfo" longname="查询电子账户当日开户信息">
        <parameterMap class="java.util.Map">
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="开户机构" parameterType="condition"/>
            <parameter property="maxnum" jdbcType="VARCHAR" javaType="BaseType.U_INTEGE" mode="in" longname="最大记录数" parameterType="condition"/>
            <parameter property="trandt" ref="PbDict.Intr.trandt" jdbcType="VARCHAR" javaType="PbBaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaAccOpenInfo"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[SELECT b.CUSTID,a.CUSTNA FROM kna_cust A LEFT JOIN  cif_cust_accs B ON a.CUSTNO = b.CUSTNO
inner join kna_cuad e on(A.CUSTAC = e.CUSTAC and B.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
where f.CUACST  != '2' and f.CUACST !='9' and a.OPENDT = #trandt# and a.brchno = #brchno# and a.corpno=#corpno# and rownum <= ${maxnum} 
order by a.tmstmp ]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[SELECT b.CUSTID,a.CUSTNA FROM kna_cust A LEFT JOIN  cif_cust_accs B ON a.CUSTNO = b.CUSTNO
inner join kna_cuad e on(A.CUSTAC = e.CUSTAC and B.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
where f.CUACST  != '2' and f.CUACST !='9' and a.OPENDT = #trandt# and a.brchno = #brchno# and a.corpno=#corpno# 
order by a.tmstmp limit ${maxnum} ]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selDpFxacInfoByCustac" longname="根据电子账号查询定期存款类子账户信息">
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="trandt" ref="DpDict.Acct.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="prodtp" ref="CaDict.Eacct.prodtp" jdbcType="VARCHAR" javaType="CaEnumType.E_PRODTP" mode="in" longname="产品类型" parameterType="condition"/>
            <parameter property="cuacst" jdbcType="VARCHAR" javaType="BaseType.U_CHAR08" mode="in" longname="负债账号状态" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaDpacctInfo"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select fxac.ACCTNO,fxac.ACCTNA,fxac.OPMONY,fxac.DEPTTM,fxac.DEPTDY,fxac.CRCYCD,fxac.CSEXTG,${prodtp} prodtp,
 case when fxac.acsetp='05' then '7' when fxac.acsetp='07' then '6' end as pdtpdl,fxac.PRODCD,fxac.ONLNBL,fxac.BRCHNO openbr,
case when fxac.UPBLDT < #trandt# then fxac.ONLNBL else fxac.LASTBL end as lastbl,
intr.CUUSIN as intrvl,fxac.LSTRDT,fxac.OPENDT,fxac.OPENSQ,fxac.MATUDT,fxac.BGINDT,
fxac.CLOSDT,fxac.CLOSSQ,
case when fxac.ACCTST = '3' then '1' else fxac.ACCTST end as dpacst,prod.obgaon as sprdna
from kna_fxac fxac,kub_inrt intr,kna_fxac_prod prod 
where fxac.acctst = #cuacst# and fxac.CUSTAC = #custac# and fxac.crcycd = #crcycd# and fxac.ACCTNO = intr.ACCTNO and fxac.ACCTNO = prod.ACCTNO order by fxac.acctst asc,fxac.opendt desc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select fxac.ACCTNO,fxac.ACCTNA,fxac.OPMONY,fxac.DEPTTM,fxac.DEPTDY,fxac.CRCYCD,fxac.CSEXTG,${prodtp} prodtp,
 case when fxac.acsetp='05' then '7' when fxac.acsetp='07' then '6' end as pdtpdl,fxac.PRODCD,fxac.ONLNBL,fxac.BRCHNO openbr,
case when fxac.UPBLDT < #trandt# then fxac.ONLNBL else fxac.LASTBL end as lastbl,
intr.CUUSIN as intrvl,fxac.LSTRDT,fxac.OPENDT,fxac.OPENSQ,fxac.MATUDT,fxac.BGINDT,
fxac.CLOSDT,fxac.CLOSSQ,
case when fxac.ACCTST = '3' then '1' else fxac.ACCTST end as dpacst,prod.obgaon as sprdna
from kna_fxac fxac,kub_inrt intr,kna_fxac_prod prod 
where fxac.acctst = #cuacst# and fxac.CUSTAC = #custac# and fxac.crcycd = #crcycd# and fxac.ACCTNO = intr.ACCTNO and fxac.ACCTNO = prod.ACCTNO order by fxac.acctst asc,fxac.opendt desc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select fxac.ACCTNO,fxac.ACCTNA,fxac.OPMONY,fxac.DEPTTM,fxac.DEPTDY,fxac.CRCYCD,fxac.CSEXTG,${prodtp} prodtp,
 case when fxac.acsetp='05' then '7' when fxac.acsetp='07' then '6' end as pdtpdl,fxac.PRODCD,fxac.ONLNBL,fxac.BRCHNO openbr,
case when fxac.UPBLDT < #trandt# then fxac.ONLNBL else fxac.LASTBL end as lastbl,
intr.CUUSIN as intrvl,fxac.LSTRDT,fxac.OPENDT,fxac.OPENSQ,fxac.MATUDT,fxac.BGINDT,
fxac.CLOSDT,fxac.CLOSSQ,
case when fxac.ACCTST = '3' then '1' else fxac.ACCTST end as dpacst,prod.obgaon as sprdna
from kna_fxac fxac,kub_inrt intr,kna_fxac_prod prod 
where fxac.acctst = #cuacst# and fxac.CUSTAC = #custac# and fxac.crcycd = #crcycd# and fxac.ACCTNO = intr.ACCTNO and fxac.ACCTNO = prod.ACCTNO order by fxac.acctst asc,fxac.opendt desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectAll" type="sql" id="selLedgerQuery" longname="柜面分户账查询">
        <parameterMap class="java.util.Map">
            <parameter property="cardno" ref="BaseDict.Comm.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="交易卡号" parameterType="condition"/>
            <parameter property="idtfno" ref="DpDict.Acct.idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
            <parameter property="idtftp" ref="DpDict.Acct.idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="acctst" jdbcType="VARCHAR" javaType="CaEnumType.E_CUACST" mode="in" longname="客户账户状态" parameterType="condition"/>
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CaCustInfo.accoutinfos"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select a.CORPNO,a.CUSTNA,a.CUSTAC,a.BRCHNO,a.OPENDT,a.BRCHNO openbr,a.OPENSV,a.CLOSDT,a.CLOSSV,a.acctst acttst,b.IDTFNO,b.IDTFTP,
c.CUSTID,c.CUSTCD,d.CARDNO,f.CUACST acctst from kna_cust a
inner join cif_cust b on(a.CUSTNO = b.CUSTNO )
inner join cif_cust_accs c on(b.CUSTNO = c.CUSTNO)
inner join kna_cuad e on(a.CUSTAC = e.CUSTAC and c.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
left join kna_acdc d on(a.CUSTAC = d.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="cardno != &quot;&quot; &amp;&amp; cardno != null" type="If">
                        <str type="Str"><![CDATA[d.cardno = #cardno#]]></str>
                    </if>
                    <if test="idtfno != &quot;&quot; &amp;&amp; idtfno != null" type="If">
                        <str type="Str"><![CDATA[b.idtfno = #idtfno#]]></str>
                    </if>
                    <if test="idtftp != null" type="If">
                        <str type="Str"><![CDATA[b.idtftp = #idtftp#]]></str>
                    </if>
                    <if test="acctst != null" type="If">
                        <str type="Str"><![CDATA[f.cuacst = #acctst#]]></str>
                    </if>
                    <if test="corpno != &quot;&quot; &amp;&amp; corpno != null" type="If">
                        <str type="Str"><![CDATA[a.corpno = #corpno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by f.cuacst asc,a.opendt desc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.CORPNO,a.CUSTNA,a.CUSTAC,a.BRCHNO,a.OPENDT,a.BRCHNO openbr,a.OPENSV,a.CLOSDT,a.CLOSSV,a.acctst acttst,b.IDTFNO,b.IDTFTP,
c.CUSTID,c.CUSTCD,d.CARDNO,f.CUACST acctst from kna_cust a
inner join cif_cust b on(a.CUSTNO = b.CUSTNO )
inner join cif_cust_accs c on(b.CUSTNO = c.CUSTNO)
inner join kna_cuad e on(a.CUSTAC = e.CUSTAC and c.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
left join kna_acdc d on(a.CUSTAC = d.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="cardno != &quot;&quot; &amp;&amp; cardno != null" type="If">
                        <str type="Str"><![CDATA[d.cardno = #cardno#]]></str>
                    </if>
                    <if test="idtfno != &quot;&quot; &amp;&amp; idtfno != null" type="If">
                        <str type="Str"><![CDATA[b.idtfno = #idtfno#]]></str>
                    </if>
                    <if test="idtftp != null" type="If">
                        <str type="Str"><![CDATA[b.idtftp = #idtftp#]]></str>
                    </if>
                    <if test="acctst != null" type="If">
                        <str type="Str"><![CDATA[f.cuacst = #acctst#]]></str>
                    </if>
                    <if test="corpno != &quot;&quot; &amp;&amp; corpno != null" type="If">
                        <str type="Str"><![CDATA[a.corpno = #corpno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by f.cuacst asc,a.opendt desc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.CORPNO,a.CUSTNA,a.CUSTAC,a.BRCHNO,a.OPENDT,a.BRCHNO openbr,a.OPENSV,a.CLOSDT,a.CLOSSV,a.acctst acttst,b.IDTFNO,b.IDTFTP,
c.CUSTID,c.CUSTCD,d.CARDNO,f.CUACST acctst from kna_cust a
inner join cif_cust b on(a.CUSTNO = b.CUSTNO )
inner join cif_cust_accs c on(b.CUSTNO = c.CUSTNO)
inner join kna_cuad e on(a.CUSTAC = e.CUSTAC and c.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
left join kna_acdc d on(a.CUSTAC = d.CUSTAC)]]></str>
            <where type="Where">
                <and type="And">
                    <if test="cardno != &quot;&quot; &amp;&amp; cardno != null" type="If">
                        <str type="Str"><![CDATA[d.cardno = #cardno#]]></str>
                    </if>
                    <if test="idtfno != &quot;&quot; &amp;&amp; idtfno != null" type="If">
                        <str type="Str"><![CDATA[b.idtfno = #idtfno#]]></str>
                    </if>
                    <if test="idtftp != null" type="If">
                        <str type="Str"><![CDATA[b.idtftp = #idtftp#]]></str>
                    </if>
                    <if test="acctst != null" type="If">
                        <str type="Str"><![CDATA[f.cuacst = #acctst#]]></str>
                    </if>
                    <if test="corpno != &quot;&quot; &amp;&amp; corpno != null" type="If">
                        <str type="Str"><![CDATA[a.corpno = #corpno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by f.cuacst asc,a.opendt desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectFirst" type="sql" id="selKnaAcctByacsetp" longname="根据电子账号子账户类型查询负债活期账户表">
        <sql type="db2"><![CDATA[select * from kna_acct where custac=#custac# and acsetp=#acsetp# order by tmstmp desc]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where custac=#custac# and acsetp=#acsetp# order by tmstmp desc]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where custac=#custac# and acsetp=#acsetp# order by tmstmp desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnaAcct"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selCustInfobyCardno" longname="查询电子账户基本信息">
        <sql><![CDATA[select a.idtftp,a.idtfno,a.custna,b.custid,b.custcd,c.custac,c.acctst acttst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.opensv,c.clossv,c.cuacst,e.acalno teleno,d.cardno
from cif_cust a
left join cif_cust_accs b on(a.custno = b.custno)
left join kna_cust  c  on(a.custno = c.custno)
left join kna_cuad f on(f.custid = b.custid and c.custac = f.custac)
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALTP = #acaltp#)
where c.custac =#custac#
order by e.tmstmp desc]]></sql>
        <sql type="oracle"><![CDATA[select a.idtftp,a.idtfno,a.custna,b.custid,b.custcd,c.custac,c.acctst acttst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.opensv,c.clossv,c.cuacst,e.acalno teleno,d.cardno
from cif_cust a
left join cif_cust_accs b on(a.custno = b.custno)
left join kna_cust  c  on(a.custno = c.custno)
left join kna_cuad f on(f.custid = b.custid and c.custac = f.custac)
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALTP = #acaltp#)
where c.custac =#custac#
order by e.tmstmp desc]]></sql>
        <sql type="mysql"><![CDATA[select a.idtftp,a.idtfno,a.custna,b.custid,b.custcd,c.custac,c.acctst acttst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.opensv,c.clossv,c.cuacst,e.acalno teleno,d.cardno
from cif_cust a
left join cif_cust_accs b on(a.custno = b.custno)
left join kna_cust  c  on(a.custno = c.custno)
left join kna_cuad f on(f.custid = b.custid and c.custac = f.custac)
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALTP = #acaltp#)
where c.custac =#custac#
order by e.tmstmp desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acaltp" ref="CaDict.Eacct.acaltp" jdbcType="VARCHAR" javaType="CaEnumType.E_ACALTP" mode="in" longname="账户别名类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CaCustInfo.accoutinfos"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selCustInfoByIdtfno" longname="根据客户证件号和类型查询电子账户信息">
        <sql type="db2"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and kn.acctst<>'2']]></sql>
        <sql type="oracle"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and kn.acctst<>'2']]></sql>
        <sql type="mysql"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno#
and kn.acctst<>'2']]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCust"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selCountAccOpenInfo" longname="查询电子账户当日开户信息记录数">
        <sql type="db2"><![CDATA[SELECT COUNT(1) FROM kna_cust A LEFT JOIN  cif_cust_accs B ON a.CUSTNO = b.CUSTNO
inner join kna_cuad e on(A.CUSTAC = e.CUSTAC and B.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
where f.CUACST  != '2' and f.CUACST !='9' and a.OPENDT = #trandt# and a.brchno = #brchno# ]]></sql>
        <sql type="oracle"><![CDATA[SELECT COUNT(1) FROM kna_cust A LEFT JOIN  cif_cust_accs B ON a.CUSTNO = b.CUSTNO
inner join kna_cuad e on(A.CUSTAC = e.CUSTAC and B.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
where f.CUACST  != '2' and f.CUACST !='9' and a.OPENDT = #trandt# and a.brchno = #brchno# ]]></sql>
        <sql type="mysql"><![CDATA[SELECT COUNT(1) FROM kna_cust A LEFT JOIN  cif_cust_accs B ON a.CUSTNO = b.CUSTNO
inner join kna_cuad e on(A.CUSTAC = e.CUSTAC and B.custid = e.custid)
inner join knp_acst f on(e.dime01=f.dime01
and e.dime02=f.dime02 and e.dime03=f.dime03 and e.dime04=f.dime04
and e.dime05=f.dime05 and e.dime06=f.dime06 and e.prcscd=f.prcscd) 
where f.CUACST  != '2' and f.CUACST !='9' and a.OPENDT = #trandt# and a.brchno = #brchno# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="开户机构" parameterType="condition"/>
            <parameter property="maxnum" jdbcType="VARCHAR" javaType="BaseType.U_INTEGE" mode="in" longname="最大记录数" parameterType="condition"/>
            <parameter property="trandt" ref="PbDict.Intr.trandt" jdbcType="VARCHAR" javaType="PbBaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selCustAllInfosByIdtfno" longname="根据客户证件号和类型查询电子账户全部信息">
        <sql type="db2"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno# ]]></sql>
        <sql type="oracle"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno# ]]></sql>
        <sql type="mysql"><![CDATA[select kn.* from kna_cust kn,cif_cust ci
where kn.custno=ci.custno 
and  ci.idtftp=#idtftp#
and  ci.idtfno=#idtfno# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="idtftp" jdbcType="VARCHAR" javaType="BaseEnumType.E_IDTFTP" mode="in" longname="证件类型" parameterType="condition"/>
            <parameter property="idtfno" jdbcType="VARCHAR" javaType="BaseType.U_IDTFNO" mode="in" longname="证件号码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaCust"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selCustInfosbyCustac" longname="查询电子账户全部信息">
        <sql><![CDATA[select a.idtftp,a.idtfno,a.custna,c.custac,c.acctst acttst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.cuacst,e.acalno,e.acalst,d.cardno
from cif_cust a
inner join kna_cust  c  on(a.custno = c.custno)
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALTP = #acaltp#)
left join knb_opac f on(c.custac = f.custac)
where c.custac =#custac#
order by e.tmstmp desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acaltp" ref="CaDict.Eacct.acaltp" jdbcType="VARCHAR" javaType="CaEnumType.E_ACALTP" mode="in" longname="账户别名类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CaCustInfo.acctAllInfos"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selFrozInfosByCustac" longname="查询冻结止付信息">
        <sql type="db2"><![CDATA[select a.FROZNO,a.FROZDT,a.FROZTM,a.CRCYCD,a.FREXOG,a.FROGNA,a.REMARK,a.FRLMTP,c.FROZBL 
from knb_froz a inner join (select frozno,min(frozsq) frozsq from knb_froz 
where frozst = '0' and (froztp = '1' or froztp = '2')
group by frozno) b on (a.frozno = b.frozno and a.frozsq = b.frozsq)
inner join knb_froz_detl c on (a.frozno = c.frozno and a.frozsq = c.frozsq) and a.custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select a.FROZNO,a.FROZDT,a.FROZTM,a.CRCYCD,a.FREXOG,a.FROGNA,a.REMARK,a.FRLMTP,c.FROZBL 
from knb_froz a inner join (select frozno,min(frozsq) frozsq from knb_froz 
where frozst = '0' and (froztp = '1' or froztp = '2')
group by frozno) b on (a.frozno = b.frozno and a.frozsq = b.frozsq)
inner join knb_froz_detl c on (a.frozno = c.frozno and a.frozsq = c.frozsq) and a.custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select a.FROZNO,a.FROZDT,a.FROZTM,a.CRCYCD,a.FREXOG,a.FROGNA,a.REMARK,a.FRLMTP,c.FROZBL 
from knb_froz a inner join (select frozno,min(frozsq) frozsq from knb_froz 
where frozst = '0' and (froztp = '1' or froztp = '2')
group by frozno) b on (a.frozno = b.frozno and a.frozsq = b.frozsq)
inner join knb_froz_detl c on (a.frozno = c.frozno and a.frozsq = c.frozsq) and a.custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpFrozComplexType.IoDpQryFrozTableInfo"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selFacesgByCustac" longname="根据电子账号查询面签标识">
        <sql type="db2"><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <sql type="oracle"><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <sql type="mysql"><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="BaseEnumType.E_YES___"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selKnaAcctByactp" longname="根据电子账号子账户类型查询负债活期账户表(区分升级结算户专用)">
        <sql type="db2"><![CDATA[select * from kna_acct where custac=#custac# and acsetp=#acsetp# order by acctno]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where custac=#custac# and acsetp=#acsetp# order by acctno]]></sql>
        <sql type="mysql"><![CDATA[select cuad.facesg from kna_cuad cuad where cuad.custac = #custac# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnaAcct"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selknaAcalbycustac" longname="根据电子账号查询别名关系表获取手机号">
        <sql type="db2"><![CDATA[select a.* from kna_acal a where a.custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select a.* from kna_acal a where a.custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from kna_acal a where a.custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ElectronicAccount.KnaAcal"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKubInrtInfoByAcctno" longname="查询电子账户利率信息">
        <sql><![CDATA[select * from kub_inrt where acctno=#acctno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kub_inrt where acctno=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kub_inrt where acctno=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKubInrtInfo"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnaSignDetlInfoByAcctno" longname="根据负债账号查询签约明细信息">
        <sql type="db2"><![CDATA[select * from kna_sign_detl where fxacct=#acctno#]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_sign_detl where fxacct=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_sign_detl where fxacct=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTable.IoCaKnaSignDetl"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selKnaFxacDetlInfoByAcctno" longname="查询定期存款明细中最早记录对应的最大金额">
        <sql><![CDATA[select * from kna_fxac_detl where acctno=#acctno# order by bgindt asc,onlnbl desc
]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_fxac_detl where acctno=#acctno# order by bgindt asc,onlnbl desc
]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_fxac_detl where acctno=#acctno# order by bgindt asc,onlnbl desc
]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnaFxacDetlInfo"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selKnbAcinInfoByAcctno" longname="查询计息信息通过存款账号">
        <sql><![CDATA[select a.* from knb_acin a where a.acctno=#acctno#]]></sql>
        <sql type="mysql"><![CDATA[select a.* from knb_acin a where a.acctno=#acctno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="acctno" ref="DpDict.Acct.acctno" jdbcType="VARCHAR" javaType="BaseType.U_ACCTNO" mode="in" longname="负债账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnbAcin"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selCustacOpenDatas" longname="获取营销活动电子账户数据">
        <sql><![CDATA[ SELECT
	b.custid,
	c.custna
FROM
	cif_cust_accs b,
	kna_cust c
WHERE
	c.custno = b.custno
AND c.opendt >= #cystdt#
AND c.opendt < #cyendt#
AND c.brchno = #brchno#
order by c.opendt asc
LIMIT #syunum# ]]></sql>
        <sql type="oracle"><![CDATA[ SELECT
	b.custid,
	c.custna
FROM
	cif_cust_accs b,
	kna_cust c
WHERE
	c.custno = b.custno
AND c.opendt >= #cystdt#
AND c.opendt < #cyendt#
AND c.brchno = #brchno#
AND rownum <=   #syunum# 
order by c.opendt asc]]></sql>
        <sql type="mysql"><![CDATA[ SELECT
	b.custid,
	c.custna
FROM
	cif_cust_accs b,
	kna_cust c
WHERE
	c.custno = b.custno
AND c.opendt >= #cystdt#
AND c.opendt < #cyendt#
AND c.brchno = #brchno#
order by c.opendt asc
LIMIT #syunum# ]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="cystdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="周期开始时间" parameterType="condition"/>
            <parameter property="cyendt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="周期结束时间" parameterType="condition"/>
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="syunum" jdbcType="INTEGER" javaType="int" mode="in" longname="数量" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CaCustInfo.DataOfActiid"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selCountCustacOpenDatas" longname="获取营销活动电子账户数据总数">
        <sql><![CDATA[SELECT count(1) from (
SELECT
	b.custid,
	c.custna
FROM
	cif_cust_accs b,
	kna_cust c
WHERE
	c.custno = b.custno
AND c.opendt >= #cystdt#
AND c.opendt < #cyendt#
AND c.brchno = #brchno#
LIMIT #syunum# ) d]]></sql>
        <sql type="oracle"><![CDATA[SELECT count(1) from (
SELECT
	b.custid,
	c.custna
FROM
	cif_cust_accs b,
	kna_cust c
WHERE
	c.custno = b.custno
AND c.opendt >= #cystdt#
AND c.opendt < #cyendt#
AND c.brchno = #brchno#
and  rownum <=  #syunum# ) d]]></sql>
        <sql type="mysql"><![CDATA[SELECT count(1) from (
SELECT
	b.custid,
	c.custna
FROM
	cif_cust_accs b,
	kna_cust c
WHERE
	c.custno = b.custno
AND c.opendt >= #cystdt#
AND c.opendt < #cyendt#
AND c.brchno = #brchno#
LIMIT #syunum# ) d]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="cystdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="周期开始时间" parameterType="condition"/>
            <parameter property="cyendt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="周期结束时间" parameterType="condition"/>
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="syunum" jdbcType="VARCHAR" javaType="BaseType.U_INTEGE" mode="in" longname="数量" parameterType="condition"/>
        </parameterMap>
        <resultMap class="int"/>
    </select>
    <select cache="none" method="selectFirst" type="sql" id="selKnaAcctByacsetpAndcrcycd" longname="根据电子账号子账户类型和币种查询负债活期账户表">
        <sql type="db2"><![CDATA[select * from kna_acct where custac=#custac# and crcycd=#crcycd# and acsetp=#acsetp# order by tmstmp desc]]></sql>
        <sql type="oracle"><![CDATA[select * from kna_acct where custac=#custac# and crcycd=#crcycd# and acsetp=#acsetp# order by tmstmp desc]]></sql>
        <sql type="mysql"><![CDATA[select * from kna_acct where custac=#custac# and crcycd=#crcycd# and acsetp=#acsetp# order by tmstmp desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="CaDict.Eacct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="电子账号" parameterType="condition"/>
            <parameter property="acsetp" ref="DpDict.Acct.acsetp" jdbcType="VARCHAR" javaType="BaseEnumType.E_ACSETP" mode="in" longname="子账号类型" parameterType="condition"/>
            <parameter property="crcycd" ref="DpDict.Acct.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpTable.IoDpKnaAcct"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="selIdIfInfo" longname="根据客户账号查询证件信息">
        <sql><![CDATA[select A.IDTFTP,A.IDTFNO from cif_cust a inner join kna_cust B on(a.CUSTNO = B.CUSTNO) 
where custac = #custac#]]></sql>
        <sql type="oracle"><![CDATA[select A.IDTFTP,A.IDTFNO from cif_cust a inner join kna_cust B on(a.CUSTNO = B.CUSTNO) 
where custac = #custac#]]></sql>
        <sql type="mysql"><![CDATA[select A.IDTFTP,A.IDTFNO from cif_cust a inner join kna_cust B on(a.CUSTNO = B.CUSTNO) 
where custac = #custac#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCuCustComplexType.CustInfo"/>
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selInfoDeregTable" longname="查询电子账户降级登记簿信息">
        <parameterMap class="java.util.Map">
            <parameter property="deomst" jdbcType="VARCHAR" javaType="CaEnumType.E_PROMST" mode="in" longname="降级状态" parameterType="condition"/>
            <parameter property="brchno" ref="DpDict.Acct.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="账户所属机构" parameterType="condition"/>
            <parameter property="stardt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="stopdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="custac" ref="BaseDict.Comm.custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR32" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQryDeRegOut"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select a.CUSTAC,a.CUSTNA,a.ODACTP,a.DEACTP,a.BRCHNO,a.APLYDT,a.DEOMSV,a.DEOMDT,a.DEOMST from knb_deom a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="deomst!=null" type="If">
                        <str type="Str"><![CDATA[a.deomst=#deomst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="custac!=null &amp;&amp; custac!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac=#custac#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.CUSTAC,a.CUSTNA,a.ODACTP,a.DEACTP,a.BRCHNO,a.APLYDT,a.DEOMSV,a.DEOMDT,a.DEOMST from knb_deom a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="deomst!=null" type="If">
                        <str type="Str"><![CDATA[a.deomst=#deomst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="custac!=null &amp;&amp; custac!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac=#custac#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.CUSTAC,a.CUSTNA,a.ODACTP,a.DEACTP,a.BRCHNO,a.APLYDT,a.DEOMSV,a.DEOMDT,a.DEOMST from knb_deom a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="deomst!=null" type="If">
                        <str type="Str"><![CDATA[a.deomst=#deomst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="custac!=null &amp;&amp; custac!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac=#custac#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selInfoDeregTables" longname="查询电子账户降级登记簿信息">
        <parameterMap class="java.util.Map">
            <parameter property="deomst" jdbcType="VARCHAR" javaType="CaEnumType.E_PROMST" mode="in" longname="降级状态" parameterType="condition"/>
            <parameter property="brchno" ref="DpDict.Acct.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="账户所属机构" parameterType="condition"/>
            <parameter property="stardt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="stopdt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CHAR400" mode="in" longname="客户账号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoCaTypGenEAccountInfo.IoCaQryDeRegOut"/>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select a.CUSTAC,a.CUSTNA,a.ODACTP,a.DEACTP,a.BRCHNO,a.APLYDT,a.DEOMSV,a.DEOMDT,a.DEOMST from knb_deom a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="deomst!=null" type="If">
                        <str type="Str"><![CDATA[a.deomst=#deomst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="custac!=null &amp;&amp; custac!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac in (${custac})]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.CUSTAC,a.CUSTNA,a.ODACTP,a.DEACTP,a.BRCHNO,a.APLYDT,a.DEOMSV,a.DEOMDT,a.DEOMST from knb_deom a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="deomst!=null" type="If">
                        <str type="Str"><![CDATA[a.deomst=#deomst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="custac!=null &amp;&amp; custac!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac in (${custac})]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.CUSTAC,a.CUSTNA,a.ODACTP,a.DEACTP,a.BRCHNO,a.APLYDT,a.DEOMSV,a.DEOMDT,a.DEOMST from knb_deom a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="deomst!=null" type="If">
                        <str type="Str"><![CDATA[a.deomst=#deomst#]]></str>
                    </if>
                    <if test="stardt!=null &amp;&amp; stardt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.aplydt  between #stardt# and #stopdt#]]></str>
                    </if>
                    <if test="brchno!=null &amp;&amp; brchno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.brchno=#brchno#]]></str>
                    </if>
                    <if test="custac!=null &amp;&amp; custac!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[a.custac in (${custac})]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selProdInfoByCustac" longname="查询电子账号下是否存在未到期产品和亲情钱包">
        <sql type="db2"><![CDATA[select sum(prod.count) from 
(select count(*) as count from kna_acct a where a.custac=#custac# and a.acsetp not in('01','02') and a.acctst<>'2'
union all
select count(*) as count from kna_fxac b where b.custac=#custac# and b.acctst<>'2'
union all
select count(*) as count from fna_acct c where c.custac=#custac# and c.acctst<>'2') prod]]></sql>
        <sql type="oracle"><![CDATA[select sum(prod.count) from 
(select count(*) as count from kna_acct a where a.custac=#custac# and a.acsetp not in('01','02') and a.acctst<>'2'
union all
select count(*) as count from kna_fxac b where b.custac=#custac# and b.acctst<>'2'
union all
select count(*) as count from fna_acct c where c.custac=#custac# and c.acctst<>'2') prod]]></sql>
        <sql type="mysql"><![CDATA[select sum(prod.count) from 
(select count(*) as count from kna_acct a where a.custac=#custac# and a.acsetp not in('01','02') and a.acctst<>'2'
union all
select count(*) as count from kna_fxac b where b.custac=#custac# and b.acctst<>'2'
union all
select count(*) as count from fna_acct c where c.custac=#custac# and c.acctst<>'2') prod]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" jdbcType="VARCHAR" javaType="BaseType.U_CUSTAC" mode="in" longname="电子账号ID" parameterType="condition"/>
        </parameterMap>
        <resultMap class="java.math.BigDecimal"/>
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selAcToAcDelay" longname="查询电子账户延迟转帐登记簿">
        <parameterMap class="java.util.Map">
            <parameter property="transq" ref="DpDict.Acct.transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="主交易流水" parameterType="condition"/>
            <parameter property="cardno" ref="DpDict.Acct.cardno" jdbcType="VARCHAR" javaType="BaseType.U_CARDNO" mode="in" longname="卡号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoDpFrozComplexType.IoAcToAcDelayInfo"/>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[
            select transq,trandt,trantm,acdate,actime,servtp,capitp,cardno, cuacno,acctno, brchno,
                   incorp,tocorp, tobrch,toacct,toscac,toacno,crcycd,trantp,tranam,delayt,tlcgam
            from kna_delay ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="transq !=null &amp;&amp; transq !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq =#transq#]]></str>
                    </if>
                    <if test="cardno!=null&amp;&amp;cardno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[cardno=#cardno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by  tmstmp  ]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[
            select transq,trandt,trantm,acdate,actime,servtp,capitp,cardno, cuacno,acctno, brchno,
                   incorp,tocorp, tobrch,toacct,toscac,toacno,crcycd,trantp,tranam,delayt,tlcgam
            from KnaDelay ]]></str>
            <where type="Where">
                <and type="And">
                    <if test="transq !=null &amp;&amp; transq !=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq =#transq#]]></str>
                    </if>
                    <if test="cardno!=null&amp;&amp;cardno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[cardno=#cardno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by  a.tmstmp  ]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectOne" type="sql" id="selinpusq" longname="上送系统流水查询">
        <sql type="oracle"><![CDATA[select f.cardno, e.inpusq, e.inpudt
  from kna_acdc f
 inner join (select d.custac, c.inpusq, c.inpudt
               from kna_cust d
              inner join (select m.custno, t.inpusq, t.inpudt
                           from kna_acct m
                          inner join (select b.inpudt, b.inpusq, a.acctno
                                       from kns_acsq a
                                      inner join kns_redu b
                                         on a.transq = b.transq
                                        and a.transq =
                                            #transq#) t
                             on m.acctno = t.acctno) c
                 on d.custno = c.custno) e
    on f.custac = e.custac
]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="transq" ref="BaseDict.Comm.transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="交易流水" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CustInfoCountType.InfoKnsredu"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selCustInfosByCustacAndServtp" longname="根据电子账号及渠道类型查询电子账户信息">
        <sql type="oracle"><![CDATA[select a.idtftp,a.idtfno,a.custna,c.custac,c.acctst acttst,c.brchno,
c.opendt,c.brchno openbr,c.closdt,c.cuacst,e.acalno,e.acalst,d.cardno
from cif_cust a
inner join kna_cust  c  on(a.custno = c.custno)
left join kna_acdc d on(c.custac = d.custac)
left join kna_acal e on(c.custac = e.custac and e.ACALTP = #acaltp#)
left join knb_opac f on(c.custac = f.custac)
where c.custac =#custac# and f.chnlid=#servtp#
order by e.tmstmp desc]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="custac" ref="DpDict.Acct.custac" jdbcType="VARCHAR" javaType="BaseType.U_CUACNO" mode="in" longname="客户账号" parameterType="condition"/>
            <parameter property="acaltp" ref="CaDict.Eacct.acaltp" jdbcType="VARCHAR" javaType="CaEnumType.E_ACALTP" mode="in" longname="账户别名类型" parameterType="condition"/>
            <parameter property="servtp" jdbcType="VARCHAR" javaType="BaseEnumType.E_CHNLID" mode="in" longname="渠道类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="CaCustInfo.acctAllInfos"/>
    </select>
</sqls>
