<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls id="PBChargeDvid" longname="收费分成处理" package="cn.sunline.ltts.busi.cg.namedsql.charg" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <description><![CDATA[收费分成信息处理]]></description>
    <dynamicSelect cache="none" method="selectPage selectPageWithCount" type="sql" id="selDvidRegisterInfo" longname="查询收费分成登记簿信息">
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="stadat" ref="PbDict.Charge.stadat" jdbcType="VARCHAR" javaType="PbBaseType.U_DATE08" mode="in" longname="起始日期" parameterType="condition"/>
            <parameter property="enddat" ref="PbDict.Charge.enddat" jdbcType="VARCHAR" javaType="PbBaseType.U_DATE08" mode="in" longname="终止日期" parameterType="condition"/>
            <parameter property="calseq" ref="PbDict.Charge.calseq" jdbcType="VARCHAR" javaType="PbBaseType.U_TRNSEQ" mode="in" longname="计费柜员流水" parameterType="condition"/>
        </parameterMap>
        <resultMap class="PBCharge.KcbDvidRgst"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select * from kcb_dvid_rgst]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[corpno = #corpno#]]></str>
                    <if test="stadat != null and stadat !=''" type="If">
                        <str type="Str"><![CDATA[caldat >= #stadat#]]></str>
                    </if>
                    <if test="enddat != null and enddat !=''" type="If">
                        <str type="Str"><![CDATA[caldat <= #enddat#]]></str>
                    </if>
                    <if test="calseq != null and calseq !=''" type="If">
                        <str type="Str"><![CDATA[calseq = #calseq#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by caldat ]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
           <str type="Str"><![CDATA[select * from kcb_dvid_rgst]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[corpno = #corpno#]]></str>
                    <if test="stadat != null and stadat !=''" type="If">
                        <str type="Str"><![CDATA[caldat >= #stadat#]]></str>
                    </if>
                    <if test="enddat != null and enddat !=''" type="If">
                        <str type="Str"><![CDATA[caldat <= #enddat#]]></str>
                    </if>
                    <if test="calseq != null and calseq !=''" type="If">
                        <str type="Str"><![CDATA[calseq = #calseq#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by caldat ]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from kcb_dvid_rgst]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[corpno = #corpno#]]></str>
                    <if test="stadat != null and stadat !=''" type="If">
                        <str type="Str"><![CDATA[caldat >= #stadat#]]></str>
                    </if>
                    <if test="enddat != null and enddat !=''" type="If">
                        <str type="Str"><![CDATA[caldat <= #enddat#]]></str>
                    </if>
                    <if test="calseq != null and calseq !=''" type="If">
                        <str type="Str"><![CDATA[calseq = #calseq#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by caldat ]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectAll" type="sql" id="selDivdRegstInfoByBatch" longname="批量获取收费分成登记">
        <sql><![CDATA[
    	SELECT
    	    	* 
    	FROM
    	    	kcb_dvid_rgst 
    	where
    	    	corpno = #corpno# and trandt < #trandt# 
    	    	and dvidst = '0' 
    	ORDER BY
    	    	crcycd, trandt, trnseq, evrgsq
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	SELECT
    	    	* 
    	FROM
    	    	kcb_dvid_rgst 
    	where
    	    	corpno = #corpno# and trandt < #trandt# 
    	    	and dvidst = '0' 
    	ORDER BY
    	    	crcycd, trandt, trnseq, evrgsq
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	SELECT
    	    	* 
    	FROM
    	    	kcb_dvid_rgst 
    	where
    	    	corpno = #corpno# and trandt < #trandt# 
    	    	and dvidst = '0' 
    	ORDER BY
    	    	crcycd, trandt, trnseq, evrgsq
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="trandt" ref="PbDict.Charge.trandt" jdbcType="VARCHAR" javaType="PbBaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="brchno" ref="PbDict.Charge.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="账务机构" parameterType="condition"/>
        </parameterMap>
        <resultMap class="PBCharge.KcbDvidRgst"/>
    </select>
</sqls>
