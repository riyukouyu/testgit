<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls id="FeShare" longname="分润处理" package="cn.sunline.ltts.busi.fe.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <dynamicSelect cache="none" method="selectFirst" type="sql" id="selcnt_kcp_chrg_dvid" longname="收费分润管理查询记录数">
        <parameterMap class="java.util.Map">
            <parameter property="chrgcd" ref="FeDict.Chrg.chrgcd" jdbcType="VARCHAR" javaType="FeBaseType.U_CHRGCD" mode="in" longname="费种代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_dvid u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[chrgcd like CONCAT('%',#chrgcd#,'%')]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_dvid u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[chrgcd like '%' || #chrgcd# || '%']]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_dvid u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[chrgcd like CONCAT('%',#chrgcd#,'%')]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selall_kcp_chrg_dvid" longname="收费分润管理查询">
        <parameterMap class="java.util.Map">
            <parameter property="chrgcd" ref="FeDict.Chrg.chrgcd" jdbcType="VARCHAR" javaType="FeBaseType.U_CHRGCD" mode="in" longname="费种代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoFeChrgComplexType.IoCgCrsp"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select a.chrgcd as chrgcd, a.crcycd as crcycd, a.indvrt as indvrt, a.oudvrt as oudvrt, a.trdvrt as trdvrt, a.spavrt as spavrt, a.efctdt as efctdt, a.inefdt as inefdt, b.chrgna as chrgna from kcp_chrg_dvid a left join kcp_chrg b on a.chrgcd = b.chrgcd]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like CONCAT('%',#chrgcd#,'%')]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.chrgcd as chrgcd, a.crcycd as crcycd, a.indvrt as indvrt, a.oudvrt as oudvrt, a.trdvrt as trdvrt, a.spavrt as spavrt, a.efctdt as efctdt, a.inefdt as inefdt, b.chrgna as chrgna from kcp_chrg_dvid a left join kcp_chrg b on a.chrgcd = b.chrgcd]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like '%' || #chrgcd# || '%']]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.chrgcd as chrgcd, a.crcycd as crcycd, a.indvrt as indvrt, a.oudvrt as oudvrt, a.trdvrt as trdvrt, a.spavrt as spavrt, a.efctdt as efctdt, a.inefdt as inefdt, b.chrgna as chrgna from kcp_chrg_dvid a left join kcp_chrg b on a.chrgcd = b.chrgcd]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like CONCAT('%',#chrgcd#,'%')]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <update method="update" id="upall_kcp_chrg_dvid" longname="收费分润管理修改">
        <sql><![CDATA[
    	update
    	    	kcp_chrg_dvid 
    	set
    	    	indvrt=#indvrt#,oudvrt=#oudvrt#,trdvrt=#trdvrt#,spavrt=#spavrt#,inefdt=#inefdt#,
    	    	efctdt=#efctdt# 
    	where
    	    	chrgcd=#chrgcd# and crcycd=#crcycd# 
    	    	and inefdt >= #datetm#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	update
    	    	kcp_chrg_dvid 
    	set
    	    	indvrt=#indvrt#,oudvrt=#oudvrt#,trdvrt=#trdvrt#,spavrt=#spavrt#,inefdt=#inefdt#,
    	    	efctdt=#efctdt# 
    	where
    	    	chrgcd=#chrgcd# and crcycd=#crcycd# 
    	    	and inefdt >= #datetm#
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	update
    	    	kcp_chrg_dvid 
    	set
    	    	indvrt=#indvrt#,oudvrt=#oudvrt#,trdvrt=#trdvrt#,spavrt=#spavrt#,inefdt=#inefdt#,
    	    	efctdt=#efctdt# 
    	where
    	    	chrgcd=#chrgcd# and crcycd=#crcycd# 
    	    	and inefdt >= #datetm#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="chrgcd" ref="FeDict.Chrg.chrgcd" jdbcType="VARCHAR" javaType="FeBaseType.U_CHRGCD" mode="in" longname="费种代码" parameterType="condition"/>
            <parameter property="crcycd" ref="FeDict.Chrg.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
            <parameter property="inefdt" ref="FeDict.Chrg.inefdt" jdbcType="VARCHAR" javaType="FeBaseType.U_DATE08" mode="in" longname="失效日期" parameterType="condition"/>
            <parameter property="indvrt" ref="FeDict.Chrg.indvrt" jdbcType="VARCHAR" javaType="BaseType.U_INSTRT" mode="in" longname="转入行分成比率" parameterType="condition"/>
            <parameter property="oudvrt" ref="FeDict.Chrg.oudvrt" jdbcType="VARCHAR" javaType="BaseType.U_INSTRT" mode="in" longname="转出行分成比率" parameterType="condition"/>
            <parameter property="trdvrt" ref="FeDict.Chrg.trdvrt" jdbcType="VARCHAR" javaType="BaseType.U_INSTRT" mode="in" longname="交易行分成比率" parameterType="condition"/>
            <parameter property="spavrt" ref="FeDict.Chrg.spavrt" jdbcType="VARCHAR" javaType="BaseType.U_INSTRT" mode="in" longname="备用行分成比率" parameterType="condition"/>
            <parameter property="efctdt" ref="FeDict.Chrg.efctdt" jdbcType="VARCHAR" javaType="FeBaseType.U_DATE08" mode="in" longname="生效日期" parameterType="condition"/>
            <parameter property="datetm" ref="ApDict.Aplt.datetm" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="维护日期" parameterType="condition"/>
        </parameterMap>
    </update>
</sqls>
