<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls id="FeFormula" longname="计费公式" package="cn.sunline.ltts.busi.fe.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <description><![CDATA[计费公式代码]]></description>
    <select cache="none" method="selectAll" type="sql" id="selChargeFormDetl" longname="查询收费公式明细表">
        <sql><![CDATA[
    	SELECT
    	    	* 
    	FROM
    	    	kcp_chrg_fmdt 
    	WHERE
    	    	corpno = #corpno# AND chrgfm = #chrgfm# 
    	    	AND sbbkcd LIKE #sbbkcd# AND brchno LIKE #brchno# 
    	    	AND crcycd LIKE #crcycd# 
    	order by
    	    	limiam 
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	SELECT
    	    	* 
    	FROM
    	    	kcp_chrg_fmdt 
    	WHERE
    	    	corpno = #corpno# AND chrgfm = #chrgfm# 
    	    	AND sbbkcd LIKE #sbbkcd# AND brchno LIKE #brchno# 
    	    	AND crcycd LIKE #crcycd# 
    	order by
    	    	limiam 
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	SELECT
    	    	* 
    	FROM
    	    	kcp_chrg_fmdt 
    	WHERE
    	    	corpno = #corpno# AND chrgfm = #chrgfm# 
    	    	AND sbbkcd LIKE #sbbkcd# AND brchno LIKE #brchno# 
    	    	AND crcycd LIKE #crcycd# 
    	order by
    	    	limiam 
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="sbbkcd" ref="FeDict.Chrg.sbbkcd" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="分行代码" parameterType="condition"/>
            <parameter property="brchno" ref="PbDict.Brch.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="crcycd" ref="FeDict.Chrg.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="货币代号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeTable.KcpChrgFmdt"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selChargeFormDetlInfo" longname="获取收费公式明细信息">
        <sql><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	corpno = #corpno# and chrgfm = #chrgfm# 
    	    	and sbbkcd in(
    	    	    	'99', #sbbkcd#
    	    	) and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd in(
    	    	    	'99', #crcycd#
    	    	) and limiam <= #limiam# 
    	order by
    	    	limiam 
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	corpno = #corpno# and chrgfm = #chrgfm# 
    	    	and sbbkcd in(
    	    	    	'99', #sbbkcd#
    	    	) and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd in(
    	    	    	'99', #crcycd#
    	    	) and limiam <= #limiam# 
    	order by
    	    	limiam 
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	corpno = #corpno# and chrgfm = #chrgfm# 
    	    	and sbbkcd in(
    	    	    	'99', #sbbkcd#
    	    	) and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd in(
    	    	    	'99', #crcycd#
    	    	) and limiam <= #limiam# 
    	order by
    	    	limiam 
    	]]></sql>
        <parameterMap class="FeTable.KcpChrgFmdt"/>
        <resultMap class="FeTable.KcpChrgFmdt"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selChargeFormExpInfo" longname="获取收费公式解析信息">
        <sql><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmex 
    	where
    	    	corpno in (
    	    	    	'999', #corpno#
    	    	) AND chrgcd = #chrgcd# 
    	    	AND scencd in (
    	    	    	'%', #scencd#
    	    	) AND crcycd = #crcycd# 
    	    	AND efctdt <= #trandt# AND inefdt >= #trandt# 
    	order by
    	    	chrgcd
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmex 
    	where
    	    	corpno in (
    	    	    	'999', #corpno#
    	    	) AND chrgcd = #chrgcd# 
    	    	AND scencd in (
    	    	    	'%', #scencd#
    	    	) AND crcycd = #crcycd# 
    	    	AND efctdt <= #trandt# AND inefdt >= #trandt# 
    	order by
    	    	chrgcd
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmex 
    	where
    	    	corpno in (
    	    	    	'999', #corpno#
    	    	) AND chrgcd = #chrgcd# 
    	    	AND scencd in (
    	    	    	'%', #scencd#
    	    	) AND crcycd = #crcycd# 
    	    	AND efctdt <= #trandt# AND inefdt >= #trandt# 
    	order by
    	    	chrgcd
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="ApDict.Aplt.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="chrgcd" ref="FeDict.Chrg.chrgcd" jdbcType="VARCHAR" javaType="FeBaseType.U_CHRGCD" mode="in" longname="费种代码" parameterType="condition"/>
            <parameter property="scencd" ref="FeDict.Chrg.scencd" jdbcType="VARCHAR" javaType="FeBaseType.U_SCENCD" mode="in" longname="场景代码" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeTable.KcpChrgFmex"/>
    </select>
    <dynamicSelect cache="none" method="selectFirst" type="sql" id="selcnt_kcp_chrg_fmdf" longname="收费公式定义表查询记录数">
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmdf u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm=#chrgfm#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmdf u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm=#chrgfm#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmdf u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm=#chrgfm#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selall_kcp_chrg_fmdf" longname="收费公式定义表查询">
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="fmunam" ref="FeDict.Chrg.fmunam" jdbcType="VARCHAR" javaType="BaseType.U_CHAR200" mode="in" longname="公式名称" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeConfigTranType.CgKcpChrgFmdf"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select a.* from kcp_chrg_fmdf a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm like CONCAT('%',#chrgfm#,'%')]]></str>
                    </if>
                    <if test="fmunam!=null and fmunam!=''" type="If">
                        <str type="Str"><![CDATA[fmunam like CONCAT('%' , #fmunam# ,'%')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.chrgfm desc ]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.* from kcp_chrg_fmdf a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm like '%' || #chrgfm# || '%']]></str>
                    </if>
                    <if test="fmunam!=null and fmunam!=''" type="If">
                        <str type="Str"><![CDATA[fmunam like '%' || #fmunam# || '%']]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.chrgfm desc ]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.* from kcp_chrg_fmdf a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm like CONCAT('%',#chrgfm#,'%')]]></str>
                    </if>
                    <if test="fmunam!=null and fmunam!=''" type="If">
                        <str type="Str"><![CDATA[fmunam like CONCAT('%' , #fmunam# ,'%')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.chrgfm desc ]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectFirst" type="sql" id="selcnt_kcp_chrg_fmdt" longname="收费公式明细表查询记录数">
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="brchno" ref="BaseDict.Comm.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="limiam" ref="FeDict.Chrg.limiam" jdbcType="VARCHAR" javaType="BaseType.U_ACBLTP" mode="in" longname="金额区间金额下限" parameterType="condition"/>
            <parameter property="sbbkcd" ref="FeDict.Chrg.sbbkcd" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="分行代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmdt u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm=#chrgfm#]]></str>
                    </if>
                    <if test="brchno!=null and brchno!=''" type="If">
                        <str type="Str"><![CDATA[brchno=#brchno#]]></str>
                    </if>
                    <if test="crcycd!=null " type="If">
                        <str type="Str"><![CDATA[crcycd=#crcycd#]]></str>
                    </if>
                    <if test="limiam!=null and limiam!=''" type="If">
                        <str type="Str"><![CDATA[limiam=#limiam#]]></str>
                    </if>
                    <if test="sbbkcd!=null and sbbkcd!=''" type="If">
                        <str type="Str"><![CDATA[sbbkcd=#sbbkcd#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmdt u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm=#chrgfm#]]></str>
                    </if>
                    <if test="brchno!=null and brchno!=''" type="If">
                        <str type="Str"><![CDATA[brchno=#brchno#]]></str>
                    </if>
                    <if test="crcycd!=null " type="If">
                        <str type="Str"><![CDATA[crcycd=#crcycd#]]></str>
                    </if>
                    <if test="limiam!=null and limiam!=''" type="If">
                        <str type="Str"><![CDATA[limiam=#limiam#]]></str>
                    </if>
                    <if test="sbbkcd!=null and sbbkcd!=''" type="If">
                        <str type="Str"><![CDATA[sbbkcd=#sbbkcd#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmdt u]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[chrgfm=#chrgfm#]]></str>
                    </if>
                    <if test="brchno!=null and brchno!=''" type="If">
                        <str type="Str"><![CDATA[brchno=#brchno#]]></str>
                    </if>
                    <if test="crcycd!=null " type="If">
                        <str type="Str"><![CDATA[crcycd=#crcycd#]]></str>
                    </if>
                    <if test="limiam!=null and limiam!=''" type="If">
                        <str type="Str"><![CDATA[limiam=#limiam#]]></str>
                    </if>
                    <if test="sbbkcd!=null and sbbkcd!=''" type="If">
                        <str type="Str"><![CDATA[sbbkcd=#sbbkcd#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selall_kcp_chrg_fmdt" longname="计费公式明细表查询">
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="brchno" ref="FeDict.Chrg.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="limiam" ref="FeDict.Chrg.limiam" jdbcType="VARCHAR" javaType="BaseType.U_ACBLTP" mode="in" longname="金额区间金额下限" parameterType="condition"/>
            <parameter property="sbbkcd" ref="FeDict.Chrg.sbbkcd" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="分行代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoFeChrgComplexType.IoCgCmdt"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select a.chrgfm as chrgfm, a.sbbkcd as sbbkcd, a.brchno as brchno, a.crcycd as crcycd, a.limiam as limiam, a.cufetp as cufetp, a.chrgrt as chrgrt, a.pecgam as pecgam, a.amfomu as amfomu, a.sequno as sequno, a.cgmnam as cgmnam, a.cgmxam as cgmxam, a.remark as remark, a.parflg as parflg, b.fmunam as fmunam from kcp_chrg_fmdt a left join kcp_chrg_fmdf b on a.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgfm=#chrgfm#]]></str>
                    </if>
                    <if test="brchno!=null and brchno!=''" type="If">
                        <str type="Str"><![CDATA[a.brchno in  (${brchno})]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="limiam!=null and limiam!=''" type="If">
                        <str type="Str"><![CDATA[a.limiam=#limiam#]]></str>
                    </if>
                    <if test="sbbkcd!=null and sbbkcd!=''" type="If">
                        <str type="Str"><![CDATA[a.sbbkcd=#sbbkcd#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by brchno desc,limiam ]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.chrgfm as chrgfm, a.sbbkcd as sbbkcd, a.brchno as brchno, a.crcycd as crcycd, a.limiam as limiam, a.cufetp as cufetp, a.chrgrt as chrgrt, a.pecgam as pecgam, a.amfomu as amfomu, a.sequno as sequno, a.cgmnam as cgmnam, a.cgmxam as cgmxam, a.remark as remark, a.parflg as parflg, b.fmunam as fmunam from kcp_chrg_fmdt a left join kcp_chrg_fmdf b on a.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgfm=#chrgfm#]]></str>
                    </if>
                    <if test="brchno!=null and brchno!=''" type="If">
                        <str type="Str"><![CDATA[a.brchno in  (${brchno})]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="limiam!=null and limiam!=''" type="If">
                        <str type="Str"><![CDATA[a.limiam=#limiam#]]></str>
                    </if>
                    <if test="sbbkcd!=null and sbbkcd!=''" type="If">
                        <str type="Str"><![CDATA[a.sbbkcd=#sbbkcd#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by brchno desc,limiam ]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.chrgfm as chrgfm, a.sbbkcd as sbbkcd, a.brchno as brchno, a.crcycd as crcycd, a.limiam as limiam, a.cufetp as cufetp, a.chrgrt as chrgrt, a.pecgam as pecgam, a.amfomu as amfomu, a.sequno as sequno, a.cgmnam as cgmnam, a.cgmxam as cgmxam, a.remark as remark, a.parflg as parflg, b.fmunam as fmunam from kcp_chrg_fmdt a left join kcp_chrg_fmdf b on a.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgfm=#chrgfm#]]></str>
                    </if>
                    <if test="brchno!=null and brchno!=''" type="If">
                        <str type="Str"><![CDATA[a.brchno in  (${brchno})]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="limiam!=null and limiam!=''" type="If">
                        <str type="Str"><![CDATA[a.limiam=#limiam#]]></str>
                    </if>
                    <if test="sbbkcd!=null and sbbkcd!=''" type="If">
                        <str type="Str"><![CDATA[a.sbbkcd=#sbbkcd#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by brchno desc,limiam ]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectFirst" type="sql" id="selcnt_kcp_chrg_fmex" longname="收费公式明细表查询记录数">
        <parameterMap class="java.util.Map">
            <parameter property="chrgcd" ref="FeDict.Chrg.chrgcd" jdbcType="VARCHAR" javaType="FeBaseType.U_CHRGCD" mode="in" longname="费种代码" parameterType="condition"/>
            <parameter property="scencd" ref="FeDict.Chrg.scencd" jdbcType="VARCHAR" javaType="FeBaseType.U_SCENCD" mode="in" longname="场景代码" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmex u left join kcp_chrg a on u.chrgcd = a.chrgcd left join kcp_chrg_fmdf b on u.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like #chrgcd#]]></str>
                    </if>
                    <if test="scencd!=null and scencd!=''" type="If">
                        <str type="Str"><![CDATA[a.scencd=#scencd#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[b.chrgfm  like CONCAT('%', #chrgfm#, '%' )]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmex u left join kcp_chrg a on u.chrgcd = a.chrgcd left join kcp_chrg_fmdf b on u.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like #chrgcd#]]></str>
                    </if>
                    <if test="scencd!=null and scencd!=''" type="If">
                        <str type="Str"><![CDATA[a.scencd=#scencd#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[b.chrgfm  like '%' || #chrgfm# || '%']]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select count(*) as count from kcp_chrg_fmex u left join kcp_chrg a on u.chrgcd = a.chrgcd left join kcp_chrg_fmdf b on u.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like #chrgcd#]]></str>
                    </if>
                    <if test="scencd!=null and scencd!=''" type="If">
                        <str type="Str"><![CDATA[a.scencd=#scencd#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[b.chrgfm  like CONCAT('%', #chrgfm#, '%' )]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="selall_kcp_chrg_fmex" longname="收费公式明细表查询">
        <parameterMap class="java.util.Map">
            <parameter property="chrgcd" ref="FeDict.Chrg.chrgcd" jdbcType="VARCHAR" javaType="FeBaseType.U_CHRGCD" mode="in" longname="费种代码" parameterType="condition"/>
            <parameter property="scencd" ref="FeDict.Chrg.scencd" jdbcType="VARCHAR" javaType="FeBaseType.U_SCENCD" mode="in" longname="场景代码" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="IoFeChrgComplexType.IoCgFmex"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select a.chrgcd as chrgcd, a.scencd as scencd, a.crcycd as crcycd, a.chrgfm as chrgfm, a.efctdt as efctdt, a.inefdt as inefdt, a.seqnum as seqnum, b.fmunam as fmunam, c.chrgna as chrgna from kcp_chrg_fmex a left join kcp_chrg c on c.chrgcd = a.chrgcd left join kcp_chrg_fmdf b on a.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like CONCAT('%',#chrgcd#,'%')]]></str>
                    </if>
                    <if test="scencd!=null and scencd!=''" type="If">
                        <str type="Str"><![CDATA[a.scencd=#scencd#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgfm like CONCAT('%',#chrgfm#,'%')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.chrgcd,a.chrgfm desc]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.chrgcd as chrgcd, a.scencd as scencd, a.crcycd as crcycd, a.chrgfm as chrgfm, a.efctdt as efctdt, a.inefdt as inefdt, a.seqnum as seqnum, b.fmunam as fmunam, c.chrgna as chrgna from kcp_chrg_fmex a left join kcp_chrg c on c.chrgcd = a.chrgcd left join kcp_chrg_fmdf b on a.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like '%' || #chrgcd# || '%']]></str>
                    </if>
                    <if test="scencd!=null and scencd!=''" type="If">
                        <str type="Str"><![CDATA[a.scencd=#scencd#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgfm like '%' || #chrgfm# || '%']]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.chrgcd,a.chrgfm desc]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.chrgcd as chrgcd, a.scencd as scencd, a.crcycd as crcycd, a.chrgfm as chrgfm, a.efctdt as efctdt, a.inefdt as inefdt, a.seqnum as seqnum, b.fmunam as fmunam, c.chrgna as chrgna from kcp_chrg_fmex a left join kcp_chrg c on c.chrgcd = a.chrgcd left join kcp_chrg_fmdf b on a.chrgfm = b.chrgfm]]></str>
            <where type="Where">
                <and type="And">
                    <if test="chrgcd!=null and chrgcd!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgcd like CONCAT('%',#chrgcd#,'%')]]></str>
                    </if>
                    <if test="scencd!=null and scencd!=''" type="If">
                        <str type="Str"><![CDATA[a.scencd=#scencd#]]></str>
                    </if>
                    <if test="crcycd!=null" type="If">
                        <str type="Str"><![CDATA[a.crcycd=#crcycd#]]></str>
                    </if>
                    <if test="chrgfm!=null and chrgfm!=''" type="If">
                        <str type="Str"><![CDATA[a.chrgfm like CONCAT('%',#chrgfm#,'%')]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by a.chrgcd,a.chrgfm desc]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectAll" type="sql" id="selChargeFormDetlLstInf" longname="查询计费公式明细表信息">
        <sql><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	chrgfm = #chrgfm# and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd in(
    	    	    	'99', #crcycd#
    	    	) and limiam <= #limiam# 
    	order by
    	    	limiam 
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	chrgfm = #chrgfm# and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd in(
    	    	    	'99', #crcycd#
    	    	) and limiam <= #limiam# 
    	order by
    	    	limiam 
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	chrgfm = #chrgfm# and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd in(
    	    	    	'99', #crcycd#
    	    	) and limiam <= #limiam# 
    	order by
    	    	limiam 
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="brchno" ref="PbDict.Brch.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="limiam" ref="FeDict.Chrg.limiam" jdbcType="VARCHAR" javaType="BaseType.U_ACBLTP" mode="in" longname="金额区间金额下限" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeTable.KcpChrgFmdt"/>
    </select>
    <dynamicSelect cache="none" method="selectOne" type="sql" id="selfum_kcp_chrg_fmdf" longname="查询计费公式定义表公式名称">
        <parameterMap class="java.util.Map">
            <parameter property="fmunam" ref="FeDict.Chrg.fmunam" jdbcType="VARCHAR" javaType="BaseType.U_CHAR200" mode="in" longname="公式名称" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeTable.KcpChrgFmdf"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select a.* from kcp_chrg_fmdf a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="fmunam != null and fmunam != ''" type="If">
                        <str type="Str"><![CDATA[a.fmunam = #fmunam#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select a.* from kcp_chrg_fmdf a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="fmunam != null and fmunam != ''" type="If">
                        <str type="Str"><![CDATA[a.fmunam = #fmunam#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select a.* from kcp_chrg_fmdf a]]></str>
            <where type="Where">
                <and type="And">
                    <if test="fmunam != null and fmunam != ''" type="If">
                        <str type="Str"><![CDATA[a.fmunam = #fmunam#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectFirst" type="sql" id="selone_kcp_chrg_fmdf" longname="查询收费公式定义">
        <sql><![CDATA[
    	select
    	    	a.* 
    	from
    	    	kcp_chrg_fmdf a 
    	where
    	    	a.chrgfm = #chrgfm# AND a.efctdt <= #trandt# 
    	    	AND a.inefdt >= #trandt# 
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	a.* 
    	from
    	    	kcp_chrg_fmdf a 
    	where
    	    	a.chrgfm = #chrgfm# AND a.efctdt <= #trandt# 
    	    	AND a.inefdt >= #trandt# 
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	a.* 
    	from
    	    	kcp_chrg_fmdf a 
    	where
    	    	a.chrgfm = #chrgfm# AND a.efctdt <= #trandt# 
    	    	AND a.inefdt >= #trandt# 
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeTable.KcpChrgFmdf"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selOne_kcp_chrg_fmdt" longname="查询单条计费公式明细表信息">
        <sql><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	chrgfm = #chrgfm# and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd = #crcycd# and limiam <= #limiam# 
    	order by
    	    	limiam limit 1
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	* 
    	from
    	    	kcp_chrg_fmdt 
    	where
    	    	chrgfm = #chrgfm# and brchno in (
    	    	    	'%',#brchno#
    	    	) 
    	    	and crcycd = #crcycd# and limiam <= #limiam# 
    	order by
    	    	limiam limit 1
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	* 
    	from
    	    	(select
    	    	    	t1.* ,rownum rn 
    	    	from
    	    	    	kcp_chrg_fmdt t1 ) t 
    	where
    	    	chrgfm = #chrgfm# and brchno in (
    	    	    	'%',#brchno# 
    	    	) 
    	    	and crcycd = #crcycd# and limiam <= #limiam# 
    	    	and t.rn=1 
    	order by
    	    	limiam 
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="chrgfm" ref="FeDict.Chrg.chrgfm" jdbcType="VARCHAR" javaType="FeBaseType.U_FOMUCD" mode="in" longname="计费公式代码" parameterType="condition"/>
            <parameter property="brchno" ref="PbDict.Brch.brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="crcycd" ref="BaseDict.Comm.crcycd" jdbcType="VARCHAR" javaType="BaseType.U_CRCYCD" mode="in" longname="币种" parameterType="condition"/>
            <parameter property="limiam" ref="FeDict.Chrg.limiam" jdbcType="VARCHAR" javaType="BaseType.U_ACBLTP" mode="in" longname="金额区间金额下限" parameterType="condition"/>
        </parameterMap>
        <resultMap class="FeTable.KcpChrgFmdt"/>
    </select>
</sqls>
